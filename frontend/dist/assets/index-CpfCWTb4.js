(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))d(u);new MutationObserver(u=>{for(const p of u)if(p.type==="childList")for(const f of p.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&d(f)}).observe(document,{childList:!0,subtree:!0});function c(u){const p={};return u.integrity&&(p.integrity=u.integrity),u.referrerPolicy&&(p.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?p.credentials="include":u.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(u){if(u.ep)return;u.ep=!0;const p=c(u);fetch(u.href,p)}})();function su(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var wo={exports:{}},ar={},No={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kd;function _f(){if(kd)return _e;kd=1;var a=Symbol.for("react.element"),o=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),F=Symbol.iterator;function R(w){return w===null||typeof w!="object"?null:(w=F&&w[F]||w["@@iterator"],typeof w=="function"?w:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,L={};function h(w,N,y){this.props=w,this.context=N,this.refs=L,this.updater=y||H}h.prototype.isReactComponent={},h.prototype.setState=function(w,N){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,N,"setState")},h.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function se(){}se.prototype=h.prototype;function ee(w,N,y){this.props=w,this.context=N,this.refs=L,this.updater=y||H}var V=ee.prototype=new se;V.constructor=ee,g(V,h.prototype),V.isPureReactComponent=!0;var q=Array.isArray,ie=Object.prototype.hasOwnProperty,de={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function C(w,N,y){var T,k={},G=null,J=null;if(N!=null)for(T in N.ref!==void 0&&(J=N.ref),N.key!==void 0&&(G=""+N.key),N)ie.call(N,T)&&!P.hasOwnProperty(T)&&(k[T]=N[T]);var W=arguments.length-2;if(W===1)k.children=y;else if(1<W){for(var Y=Array(W),Ne=0;Ne<W;Ne++)Y[Ne]=arguments[Ne+2];k.children=Y}if(w&&w.defaultProps)for(T in W=w.defaultProps,W)k[T]===void 0&&(k[T]=W[T]);return{$$typeof:a,type:w,key:G,ref:J,props:k,_owner:de.current}}function X(w,N){return{$$typeof:a,type:w.type,key:N,ref:w.ref,props:w.props,_owner:w._owner}}function oe(w){return typeof w=="object"&&w!==null&&w.$$typeof===a}function ue(w){var N={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(y){return N[y]})}var U=/\/+/g;function re(w,N){return typeof w=="object"&&w!==null&&w.key!=null?ue(""+w.key):N.toString(36)}function Q(w,N,y,T,k){var G=typeof w;(G==="undefined"||G==="boolean")&&(w=null);var J=!1;if(w===null)J=!0;else switch(G){case"string":case"number":J=!0;break;case"object":switch(w.$$typeof){case a:case o:J=!0}}if(J)return J=w,k=k(J),w=T===""?"."+re(J,0):T,q(k)?(y="",w!=null&&(y=w.replace(U,"$&/")+"/"),Q(k,N,y,"",function(Ne){return Ne})):k!=null&&(oe(k)&&(k=X(k,y+(!k.key||J&&J.key===k.key?"":(""+k.key).replace(U,"$&/")+"/")+w)),N.push(k)),1;if(J=0,T=T===""?".":T+":",q(w))for(var W=0;W<w.length;W++){G=w[W];var Y=T+re(G,W);J+=Q(G,N,y,Y,k)}else if(Y=R(w),typeof Y=="function")for(w=Y.call(w),W=0;!(G=w.next()).done;)G=G.value,Y=T+re(G,W++),J+=Q(G,N,y,Y,k);else if(G==="object")throw N=String(w),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return J}function pe(w,N,y){if(w==null)return w;var T=[],k=0;return Q(w,T,"","",function(G){return N.call(y,G,k++)}),T}function $(w){if(w._status===-1){var N=w._result;N=N(),N.then(function(y){(w._status===0||w._status===-1)&&(w._status=1,w._result=y)},function(y){(w._status===0||w._status===-1)&&(w._status=2,w._result=y)}),w._status===-1&&(w._status=0,w._result=N)}if(w._status===1)return w._result.default;throw w._result}var be={current:null},O={transition:null},ne={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:O,ReactCurrentOwner:de};function D(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:pe,forEach:function(w,N,y){pe(w,function(){N.apply(this,arguments)},y)},count:function(w){var N=0;return pe(w,function(){N++}),N},toArray:function(w){return pe(w,function(N){return N})||[]},only:function(w){if(!oe(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},_e.Component=h,_e.Fragment=c,_e.Profiler=u,_e.PureComponent=ee,_e.StrictMode=d,_e.Suspense=A,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,_e.act=D,_e.cloneElement=function(w,N,y){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var T=g({},w.props),k=w.key,G=w.ref,J=w._owner;if(N!=null){if(N.ref!==void 0&&(G=N.ref,J=de.current),N.key!==void 0&&(k=""+N.key),w.type&&w.type.defaultProps)var W=w.type.defaultProps;for(Y in N)ie.call(N,Y)&&!P.hasOwnProperty(Y)&&(T[Y]=N[Y]===void 0&&W!==void 0?W[Y]:N[Y])}var Y=arguments.length-2;if(Y===1)T.children=y;else if(1<Y){W=Array(Y);for(var Ne=0;Ne<Y;Ne++)W[Ne]=arguments[Ne+2];T.children=W}return{$$typeof:a,type:w.type,key:k,ref:G,props:T,_owner:J}},_e.createContext=function(w){return w={$$typeof:f,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:p,_context:w},w.Consumer=w},_e.createElement=C,_e.createFactory=function(w){var N=C.bind(null,w);return N.type=w,N},_e.createRef=function(){return{current:null}},_e.forwardRef=function(w){return{$$typeof:v,render:w}},_e.isValidElement=oe,_e.lazy=function(w){return{$$typeof:b,_payload:{_status:-1,_result:w},_init:$}},_e.memo=function(w,N){return{$$typeof:S,type:w,compare:N===void 0?null:N}},_e.startTransition=function(w){var N=O.transition;O.transition={};try{w()}finally{O.transition=N}},_e.unstable_act=D,_e.useCallback=function(w,N){return be.current.useCallback(w,N)},_e.useContext=function(w){return be.current.useContext(w)},_e.useDebugValue=function(){},_e.useDeferredValue=function(w){return be.current.useDeferredValue(w)},_e.useEffect=function(w,N){return be.current.useEffect(w,N)},_e.useId=function(){return be.current.useId()},_e.useImperativeHandle=function(w,N,y){return be.current.useImperativeHandle(w,N,y)},_e.useInsertionEffect=function(w,N){return be.current.useInsertionEffect(w,N)},_e.useLayoutEffect=function(w,N){return be.current.useLayoutEffect(w,N)},_e.useMemo=function(w,N){return be.current.useMemo(w,N)},_e.useReducer=function(w,N,y){return be.current.useReducer(w,N,y)},_e.useRef=function(w){return be.current.useRef(w)},_e.useState=function(w){return be.current.useState(w)},_e.useSyncExternalStore=function(w,N,y){return be.current.useSyncExternalStore(w,N,y)},_e.useTransition=function(){return be.current.useTransition()},_e.version="18.3.1",_e}var _d;function Oo(){return _d||(_d=1,No.exports=_f()),No.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad;function Af(){if(Ad)return ar;Ad=1;var a=Oo(),o=Symbol.for("react.element"),c=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,u=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function f(v,A,S){var b,F={},R=null,H=null;S!==void 0&&(R=""+S),A.key!==void 0&&(R=""+A.key),A.ref!==void 0&&(H=A.ref);for(b in A)d.call(A,b)&&!p.hasOwnProperty(b)&&(F[b]=A[b]);if(v&&v.defaultProps)for(b in A=v.defaultProps,A)F[b]===void 0&&(F[b]=A[b]);return{$$typeof:o,type:v,key:R,ref:H,props:F,_owner:u.current}}return ar.Fragment=c,ar.jsx=f,ar.jsxs=f,ar}var Ed;function Ef(){return Ed||(Ed=1,wo.exports=Af()),wo.exports}var n=Ef(),jl={},So={exports:{}},gt={},Co={exports:{}},ko={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fd;function Ff(){return Fd||(Fd=1,(function(a){function o(O,ne){var D=O.length;O.push(ne);e:for(;0<D;){var w=D-1>>>1,N=O[w];if(0<u(N,ne))O[w]=ne,O[D]=N,D=w;else break e}}function c(O){return O.length===0?null:O[0]}function d(O){if(O.length===0)return null;var ne=O[0],D=O.pop();if(D!==ne){O[0]=D;e:for(var w=0,N=O.length,y=N>>>1;w<y;){var T=2*(w+1)-1,k=O[T],G=T+1,J=O[G];if(0>u(k,D))G<N&&0>u(J,k)?(O[w]=J,O[G]=D,w=G):(O[w]=k,O[T]=D,w=T);else if(G<N&&0>u(J,D))O[w]=J,O[G]=D,w=G;else break e}}return ne}function u(O,ne){var D=O.sortIndex-ne.sortIndex;return D!==0?D:O.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;a.unstable_now=function(){return p.now()}}else{var f=Date,v=f.now();a.unstable_now=function(){return f.now()-v}}var A=[],S=[],b=1,F=null,R=3,H=!1,g=!1,L=!1,h=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(O){for(var ne=c(S);ne!==null;){if(ne.callback===null)d(S);else if(ne.startTime<=O)d(S),ne.sortIndex=ne.expirationTime,o(A,ne);else break;ne=c(S)}}function q(O){if(L=!1,V(O),!g)if(c(A)!==null)g=!0,$(ie);else{var ne=c(S);ne!==null&&be(q,ne.startTime-O)}}function ie(O,ne){g=!1,L&&(L=!1,se(C),C=-1),H=!0;var D=R;try{for(V(ne),F=c(A);F!==null&&(!(F.expirationTime>ne)||O&&!ue());){var w=F.callback;if(typeof w=="function"){F.callback=null,R=F.priorityLevel;var N=w(F.expirationTime<=ne);ne=a.unstable_now(),typeof N=="function"?F.callback=N:F===c(A)&&d(A),V(ne)}else d(A);F=c(A)}if(F!==null)var y=!0;else{var T=c(S);T!==null&&be(q,T.startTime-ne),y=!1}return y}finally{F=null,R=D,H=!1}}var de=!1,P=null,C=-1,X=5,oe=-1;function ue(){return!(a.unstable_now()-oe<X)}function U(){if(P!==null){var O=a.unstable_now();oe=O;var ne=!0;try{ne=P(!0,O)}finally{ne?re():(de=!1,P=null)}}else de=!1}var re;if(typeof ee=="function")re=function(){ee(U)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,pe=Q.port2;Q.port1.onmessage=U,re=function(){pe.postMessage(null)}}else re=function(){h(U,0)};function $(O){P=O,de||(de=!0,re())}function be(O,ne){C=h(function(){O(a.unstable_now())},ne)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(O){O.callback=null},a.unstable_continueExecution=function(){g||H||(g=!0,$(ie))},a.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<O?Math.floor(1e3/O):5},a.unstable_getCurrentPriorityLevel=function(){return R},a.unstable_getFirstCallbackNode=function(){return c(A)},a.unstable_next=function(O){switch(R){case 1:case 2:case 3:var ne=3;break;default:ne=R}var D=R;R=ne;try{return O()}finally{R=D}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(O,ne){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var D=R;R=O;try{return ne()}finally{R=D}},a.unstable_scheduleCallback=function(O,ne,D){var w=a.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?w+D:w):D=w,O){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=D+N,O={id:b++,callback:ne,priorityLevel:O,startTime:D,expirationTime:N,sortIndex:-1},D>w?(O.sortIndex=D,o(S,O),c(A)===null&&O===c(S)&&(L?(se(C),C=-1):L=!0,be(q,D-w))):(O.sortIndex=N,o(A,O),g||H||(g=!0,$(ie))),O},a.unstable_shouldYield=ue,a.unstable_wrapCallback=function(O){var ne=R;return function(){var D=R;R=ne;try{return O.apply(this,arguments)}finally{R=D}}}})(ko)),ko}var Pd;function Pf(){return Pd||(Pd=1,Co.exports=Ff()),Co.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Td;function Tf(){if(Td)return gt;Td=1;var a=Oo(),o=Pf();function c(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,u={};function p(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(u[e]=t,e=0;e<t.length;e++)d.add(t[e])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A=Object.prototype.hasOwnProperty,S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},F={};function R(e){return A.call(F,e)?!0:A.call(b,e)?!1:S.test(e)?F[e]=!0:(b[e]=!0,!1)}function H(e,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function g(e,t,s,r){if(t===null||typeof t>"u"||H(e,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function L(e,t,s,r,l,i,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=m}var h={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){h[e]=new L(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];h[t]=new L(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){h[e]=new L(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){h[e]=new L(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){h[e]=new L(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){h[e]=new L(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){h[e]=new L(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){h[e]=new L(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){h[e]=new L(e,5,!1,e.toLowerCase(),null,!1,!1)});var se=/[\-:]([a-z])/g;function ee(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(se,ee);h[t]=new L(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(se,ee);h[t]=new L(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(se,ee);h[t]=new L(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){h[e]=new L(e,1,!1,e.toLowerCase(),null,!1,!1)}),h.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){h[e]=new L(e,1,!1,e.toLowerCase(),null,!0,!0)});function V(e,t,s,r){var l=h.hasOwnProperty(t)?h[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(g(t,s,l,r)&&(s=null),r||l===null?R(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):l.mustUseProperty?e[l.propertyName]=s===null?l.type===3?!1:"":s:(t=l.attributeName,r=l.attributeNamespace,s===null?e.removeAttribute(t):(l=l.type,s=l===3||l===4&&s===!0?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}var q=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),de=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),ue=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),O=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var D=Object.assign,w;function N(e){if(w===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);w=t&&t[1]||""}return`
`+w+e}var y=!1;function T(e,t){if(!e||y)return"";y=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(M){var r=M}Reflect.construct(e,[],t)}else{try{t.call()}catch(M){r=M}e.call(t.prototype)}else{try{throw Error()}catch(M){r=M}e()}}catch(M){if(M&&r&&typeof M.stack=="string"){for(var l=M.stack.split(`
`),i=r.stack.split(`
`),m=l.length-1,j=i.length-1;1<=m&&0<=j&&l[m]!==i[j];)j--;for(;1<=m&&0<=j;m--,j--)if(l[m]!==i[j]){if(m!==1||j!==1)do if(m--,j--,0>j||l[m]!==i[j]){var _=`
`+l[m].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=m&&0<=j);break}}}finally{y=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?N(e):""}function k(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=T(e.type,!1),e;case 11:return e=T(e.type.render,!1),e;case 1:return e=T(e.type,!0),e;default:return""}}function G(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case de:return"Portal";case X:return"Profiler";case C:return"StrictMode";case re:return"Suspense";case Q:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ue:return(e.displayName||"Context")+".Consumer";case oe:return(e._context.displayName||"Context")+".Provider";case U:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pe:return t=e.displayName||null,t!==null?t:G(e.type)||"Memo";case $:t=e._payload,e=e._init;try{return G(e(t))}catch{}}return null}function J(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ne(e){var t=Y(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var l=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(m){r=""+m,i.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(m){r=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $e(e){e._valueTracker||(e._valueTracker=Ne(e))}function at(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function ot(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function et(e,t){var s=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Qt(e,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=W(t.value!=null?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dt(e,t){t=t.checked,t!=null&&V(e,"checked",t,!1)}function Ct(e,t){dt(e,t);var s=W(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ys(e,t.type,s):t.hasOwnProperty("defaultValue")&&ys(e,t.type,W(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bt(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function ys(e,t,s){(t!=="number"||ot(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var qt=Array.isArray;function an(e,t,s,r){if(e=e.options,t){t={};for(var l=0;l<s.length;l++)t["$"+s[l]]=!0;for(s=0;s<e.length;s++)l=t.hasOwnProperty("$"+e[s].value),e[s].selected!==l&&(e[s].selected=l),l&&r&&(e[s].defaultSelected=!0)}else{for(s=""+W(s),t=null,l=0;l<e.length;l++){if(e[l].value===s){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function vs(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(c(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jt(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(c(92));if(qt(s)){if(1<s.length)throw Error(c(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:W(s)}}function ce(e,t){var s=W(t.value),r=W(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function ye(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Re(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ae(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pe,ke=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,s,r,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pe=Pe||document.createElement("div"),Pe.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function We(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kt=["Webkit","ms","Moz","O"];Object.keys(ut).forEach(function(e){kt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ut[t]=ut[e]})});function _n(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||ut.hasOwnProperty(e)&&ut[e]?(""+t).trim():t+"px"}function Ol(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,l=_n(s,t[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,l):e[s]=l}}var bs=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function js(e,t){if(t){if(bs[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(c(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(c(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(c(61))}if(t.style!=null&&typeof t.style!="object")throw Error(c(62))}}function Ut(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wn=null;function ws(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ns=null,Kt=null,Gn=null;function Ho(e){if(e=Ws(e)){if(typeof Ns!="function")throw Error(c(280));var t=e.stateNode;t&&(t=Ir(t),Ns(e.stateNode,e.type,t))}}function Vo(e){Kt?Gn?Gn.push(e):Gn=[e]:Kt=e}function Wo(){if(Kt){var e=Kt,t=Gn;if(Gn=Kt=null,Ho(e),t)for(e=0;e<t.length;e++)Ho(t[e])}}function Go(e,t){return e(t)}function Yo(){}var Bl=!1;function Qo(e,t,s){if(Bl)return e(t,s);Bl=!0;try{return Go(e,t,s)}finally{Bl=!1,(Kt!==null||Gn!==null)&&(Yo(),Wo())}}function Ss(e,t){var s=e.stateNode;if(s===null)return null;var r=Ir(s);if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(c(231,t,typeof s));return s}var Ml=!1;if(v)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){Ml=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{Ml=!1}function Tu(e,t,s,r,l,i,m,j,_){var M=Array.prototype.slice.call(arguments,3);try{t.apply(s,M)}catch(Z){this.onError(Z)}}var ks=!1,pr=null,hr=!1,zl=null,Ru={onError:function(e){ks=!0,pr=e}};function Lu(e,t,s,r,l,i,m,j,_){ks=!1,pr=null,Tu.apply(Ru,arguments)}function Du(e,t,s,r,l,i,m,j,_){if(Lu.apply(this,arguments),ks){if(ks){var M=pr;ks=!1,pr=null}else throw Error(c(198));hr||(hr=!0,zl=M)}}function An(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function qo(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jo(e){if(An(e)!==e)throw Error(c(188))}function Iu(e){var t=e.alternate;if(!t){if(t=An(e),t===null)throw Error(c(188));return t!==e?null:e}for(var s=e,r=t;;){var l=s.return;if(l===null)break;var i=l.alternate;if(i===null){if(r=l.return,r!==null){s=r;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===s)return Jo(l),e;if(i===r)return Jo(l),t;i=i.sibling}throw Error(c(188))}if(s.return!==r.return)s=l,r=i;else{for(var m=!1,j=l.child;j;){if(j===s){m=!0,s=l,r=i;break}if(j===r){m=!0,r=l,s=i;break}j=j.sibling}if(!m){for(j=i.child;j;){if(j===s){m=!0,s=i,r=l;break}if(j===r){m=!0,r=i,s=l;break}j=j.sibling}if(!m)throw Error(c(189))}}if(s.alternate!==r)throw Error(c(190))}if(s.tag!==3)throw Error(c(188));return s.stateNode.current===s?e:t}function Ko(e){return e=Iu(e),e!==null?Xo(e):null}function Xo(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xo(e);if(t!==null)return t;e=e.sibling}return null}var Zo=o.unstable_scheduleCallback,ei=o.unstable_cancelCallback,Ou=o.unstable_shouldYield,Bu=o.unstable_requestPaint,He=o.unstable_now,Mu=o.unstable_getCurrentPriorityLevel,Ul=o.unstable_ImmediatePriority,ti=o.unstable_UserBlockingPriority,xr=o.unstable_NormalPriority,zu=o.unstable_LowPriority,ni=o.unstable_IdlePriority,gr=null,$t=null;function Uu(e){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(gr,e,void 0,(e.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:Vu,$u=Math.log,Hu=Math.LN2;function Vu(e){return e>>>=0,e===0?32:31-($u(e)/Hu|0)|0}var yr=64,vr=4194304;function _s(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function br(e,t){var s=e.pendingLanes;if(s===0)return 0;var r=0,l=e.suspendedLanes,i=e.pingedLanes,m=s&268435455;if(m!==0){var j=m&~l;j!==0?r=_s(j):(i&=m,i!==0&&(r=_s(i)))}else m=s&~l,m!==0?r=_s(m):i!==0&&(r=_s(i));if(r===0)return 0;if(t!==0&&t!==r&&(t&l)===0&&(l=r&-r,i=t&-t,l>=i||l===16&&(i&4194240)!==0))return t;if((r&4)!==0&&(r|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)s=31-Rt(t),l=1<<s,r|=e[s],t&=~l;return r}function Wu(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gu(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,i=e.pendingLanes;0<i;){var m=31-Rt(i),j=1<<m,_=l[m];_===-1?((j&s)===0||(j&r)!==0)&&(l[m]=Wu(j,t)):_<=t&&(e.expiredLanes|=j),i&=~j}}function $l(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function si(){var e=yr;return yr<<=1,(yr&4194240)===0&&(yr=64),e}function Hl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function As(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rt(t),e[t]=s}function Yu(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var l=31-Rt(s),i=1<<l;t[l]=0,r[l]=-1,e[l]=-1,s&=~i}}function Vl(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-Rt(s),l=1<<r;l&t|e[r]&t&&(e[r]|=t),s&=~l}}var Te=0;function ri(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var li,Wl,ai,oi,ii,Gl=!1,jr=[],on=null,cn=null,dn=null,Es=new Map,Fs=new Map,un=[],Qu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ci(e,t){switch(e){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":Es.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(t.pointerId)}}function Ps(e,t,s,r,l,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:i,targetContainers:[l]},t!==null&&(t=Ws(t),t!==null&&Wl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function qu(e,t,s,r,l){switch(t){case"focusin":return on=Ps(on,e,t,s,r,l),!0;case"dragenter":return cn=Ps(cn,e,t,s,r,l),!0;case"mouseover":return dn=Ps(dn,e,t,s,r,l),!0;case"pointerover":var i=l.pointerId;return Es.set(i,Ps(Es.get(i)||null,e,t,s,r,l)),!0;case"gotpointercapture":return i=l.pointerId,Fs.set(i,Ps(Fs.get(i)||null,e,t,s,r,l)),!0}return!1}function di(e){var t=En(e.target);if(t!==null){var s=An(t);if(s!==null){if(t=s.tag,t===13){if(t=qo(s),t!==null){e.blockedOn=t,ii(e.priority,function(){ai(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Ql(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);Wn=r,s.target.dispatchEvent(r),Wn=null}else return t=Ws(s),t!==null&&Wl(t),e.blockedOn=s,!1;t.shift()}return!0}function ui(e,t,s){wr(e)&&s.delete(t)}function Ju(){Gl=!1,on!==null&&wr(on)&&(on=null),cn!==null&&wr(cn)&&(cn=null),dn!==null&&wr(dn)&&(dn=null),Es.forEach(ui),Fs.forEach(ui)}function Ts(e,t){e.blockedOn===t&&(e.blockedOn=null,Gl||(Gl=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ju)))}function Rs(e){function t(l){return Ts(l,e)}if(0<jr.length){Ts(jr[0],e);for(var s=1;s<jr.length;s++){var r=jr[s];r.blockedOn===e&&(r.blockedOn=null)}}for(on!==null&&Ts(on,e),cn!==null&&Ts(cn,e),dn!==null&&Ts(dn,e),Es.forEach(t),Fs.forEach(t),s=0;s<un.length;s++)r=un[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<un.length&&(s=un[0],s.blockedOn===null);)di(s),s.blockedOn===null&&un.shift()}var Yn=q.ReactCurrentBatchConfig,Nr=!0;function Ku(e,t,s,r){var l=Te,i=Yn.transition;Yn.transition=null;try{Te=1,Yl(e,t,s,r)}finally{Te=l,Yn.transition=i}}function Xu(e,t,s,r){var l=Te,i=Yn.transition;Yn.transition=null;try{Te=4,Yl(e,t,s,r)}finally{Te=l,Yn.transition=i}}function Yl(e,t,s,r){if(Nr){var l=Ql(e,t,s,r);if(l===null)ua(e,t,r,Sr,s),ci(e,r);else if(qu(l,e,t,s,r))r.stopPropagation();else if(ci(e,r),t&4&&-1<Qu.indexOf(e)){for(;l!==null;){var i=Ws(l);if(i!==null&&li(i),i=Ql(e,t,s,r),i===null&&ua(e,t,r,Sr,s),i===l)break;l=i}l!==null&&r.stopPropagation()}else ua(e,t,r,null,s)}}var Sr=null;function Ql(e,t,s,r){if(Sr=null,e=ws(r),e=En(e),e!==null)if(t=An(e),t===null)e=null;else if(s=t.tag,s===13){if(e=qo(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Sr=e,null}function mi(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mu()){case Ul:return 1;case ti:return 4;case xr:case zu:return 16;case ni:return 536870912;default:return 16}default:return 16}}var mn=null,ql=null,Cr=null;function fi(){if(Cr)return Cr;var e,t=ql,s=t.length,r,l="value"in mn?mn.value:mn.textContent,i=l.length;for(e=0;e<s&&t[e]===l[e];e++);var m=s-e;for(r=1;r<=m&&t[s-r]===l[i-r];r++);return Cr=l.slice(e,1<r?1-r:void 0)}function kr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _r(){return!0}function pi(){return!1}function jt(e){function t(s,r,l,i,m){this._reactName=s,this._targetInst=l,this.type=r,this.nativeEvent=i,this.target=m,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(s=e[j],this[j]=s?s(i):i[j]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?_r:pi,this.isPropagationStopped=pi,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),t}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jl=jt(Qn),Ls=D({},Qn,{view:0,detail:0}),Zu=jt(Ls),Kl,Xl,Ds,Ar=D({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ea,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ds&&(Ds&&e.type==="mousemove"?(Kl=e.screenX-Ds.screenX,Xl=e.screenY-Ds.screenY):Xl=Kl=0,Ds=e),Kl)},movementY:function(e){return"movementY"in e?e.movementY:Xl}}),hi=jt(Ar),em=D({},Ar,{dataTransfer:0}),tm=jt(em),nm=D({},Ls,{relatedTarget:0}),Zl=jt(nm),sm=D({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),rm=jt(sm),lm=D({},Qn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),am=jt(lm),om=D({},Qn,{data:0}),xi=jt(om),im={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function um(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dm[e])?!!t[e]:!1}function ea(){return um}var mm=D({},Ls,{key:function(e){if(e.key){var t=im[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ea,charCode:function(e){return e.type==="keypress"?kr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fm=jt(mm),pm=D({},Ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gi=jt(pm),hm=D({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ea}),xm=jt(hm),gm=D({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ym=jt(gm),vm=D({},Ar,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bm=jt(vm),jm=[9,13,27,32],ta=v&&"CompositionEvent"in window,Is=null;v&&"documentMode"in document&&(Is=document.documentMode);var wm=v&&"TextEvent"in window&&!Is,yi=v&&(!ta||Is&&8<Is&&11>=Is),vi=" ",bi=!1;function ji(e,t){switch(e){case"keyup":return jm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wi(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qn=!1;function Nm(e,t){switch(e){case"compositionend":return wi(t);case"keypress":return t.which!==32?null:(bi=!0,vi);case"textInput":return e=t.data,e===vi&&bi?null:e;default:return null}}function Sm(e,t){if(qn)return e==="compositionend"||!ta&&ji(e,t)?(e=fi(),Cr=ql=mn=null,qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yi&&t.locale!=="ko"?null:t.data;default:return null}}var Cm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ni(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cm[e.type]:t==="textarea"}function Si(e,t,s,r){Vo(r),t=Rr(t,"onChange"),0<t.length&&(s=new Jl("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var Os=null,Bs=null;function km(e){$i(e,0)}function Er(e){var t=es(e);if(at(t))return e}function _m(e,t){if(e==="change")return t}var Ci=!1;if(v){var na;if(v){var sa="oninput"in document;if(!sa){var ki=document.createElement("div");ki.setAttribute("oninput","return;"),sa=typeof ki.oninput=="function"}na=sa}else na=!1;Ci=na&&(!document.documentMode||9<document.documentMode)}function _i(){Os&&(Os.detachEvent("onpropertychange",Ai),Bs=Os=null)}function Ai(e){if(e.propertyName==="value"&&Er(Bs)){var t=[];Si(t,Bs,e,ws(e)),Qo(km,t)}}function Am(e,t,s){e==="focusin"?(_i(),Os=t,Bs=s,Os.attachEvent("onpropertychange",Ai)):e==="focusout"&&_i()}function Em(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Er(Bs)}function Fm(e,t){if(e==="click")return Er(t)}function Pm(e,t){if(e==="input"||e==="change")return Er(t)}function Tm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lt=typeof Object.is=="function"?Object.is:Tm;function Ms(e,t){if(Lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var l=s[r];if(!A.call(t,l)||!Lt(e[l],t[l]))return!1}return!0}function Ei(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fi(e,t){var s=Ei(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ei(s)}}function Pi(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pi(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ti(){for(var e=window,t=ot();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=ot(e.document)}return t}function ra(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Rm(e){var t=Ti(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Pi(s.ownerDocument.documentElement,s)){if(r!==null&&ra(s)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=s.textContent.length,i=Math.min(r.start,l);r=r.end===void 0?i:Math.min(r.end,l),!e.extend&&i>r&&(l=r,r=i,i=l),l=Fi(s,i);var m=Fi(s,r);l&&m&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Lm=v&&"documentMode"in document&&11>=document.documentMode,Jn=null,la=null,zs=null,aa=!1;function Ri(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;aa||Jn==null||Jn!==ot(r)||(r=Jn,"selectionStart"in r&&ra(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zs&&Ms(zs,r)||(zs=r,r=Rr(la,"onSelect"),0<r.length&&(t=new Jl("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=Jn)))}function Fr(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Kn={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionend:Fr("Transition","TransitionEnd")},oa={},Li={};v&&(Li=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function Pr(e){if(oa[e])return oa[e];if(!Kn[e])return e;var t=Kn[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Li)return oa[e]=t[s];return e}var Di=Pr("animationend"),Ii=Pr("animationiteration"),Oi=Pr("animationstart"),Bi=Pr("transitionend"),Mi=new Map,zi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fn(e,t){Mi.set(e,t),p(t,[e])}for(var ia=0;ia<zi.length;ia++){var ca=zi[ia],Dm=ca.toLowerCase(),Im=ca[0].toUpperCase()+ca.slice(1);fn(Dm,"on"+Im)}fn(Di,"onAnimationEnd"),fn(Ii,"onAnimationIteration"),fn(Oi,"onAnimationStart"),fn("dblclick","onDoubleClick"),fn("focusin","onFocus"),fn("focusout","onBlur"),fn(Bi,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Om=new Set("cancel close invalid load scroll toggle".split(" ").concat(Us));function Ui(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,Du(r,t,void 0,e),e.currentTarget=null}function $i(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],l=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var m=r.length-1;0<=m;m--){var j=r[m],_=j.instance,M=j.currentTarget;if(j=j.listener,_!==i&&l.isPropagationStopped())break e;Ui(l,j,M),i=_}else for(m=0;m<r.length;m++){if(j=r[m],_=j.instance,M=j.currentTarget,j=j.listener,_!==i&&l.isPropagationStopped())break e;Ui(l,j,M),i=_}}}if(hr)throw e=zl,hr=!1,zl=null,e}function De(e,t){var s=t[ga];s===void 0&&(s=t[ga]=new Set);var r=e+"__bubble";s.has(r)||(Hi(t,e,2,!1),s.add(r))}function da(e,t,s){var r=0;t&&(r|=4),Hi(s,e,r,t)}var Tr="_reactListening"+Math.random().toString(36).slice(2);function $s(e){if(!e[Tr]){e[Tr]=!0,d.forEach(function(s){s!=="selectionchange"&&(Om.has(s)||da(s,!1,e),da(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tr]||(t[Tr]=!0,da("selectionchange",!1,t))}}function Hi(e,t,s,r){switch(mi(t)){case 1:var l=Ku;break;case 4:l=Xu;break;default:l=Yl}s=l.bind(null,t,s,e),l=void 0,!Ml||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,s,{capture:!0,passive:l}):e.addEventListener(t,s,!0):l!==void 0?e.addEventListener(t,s,{passive:l}):e.addEventListener(t,s,!1)}function ua(e,t,s,r,l){var i=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var m=r.tag;if(m===3||m===4){var j=r.stateNode.containerInfo;if(j===l||j.nodeType===8&&j.parentNode===l)break;if(m===4)for(m=r.return;m!==null;){var _=m.tag;if((_===3||_===4)&&(_=m.stateNode.containerInfo,_===l||_.nodeType===8&&_.parentNode===l))return;m=m.return}for(;j!==null;){if(m=En(j),m===null)return;if(_=m.tag,_===5||_===6){r=i=m;continue e}j=j.parentNode}}r=r.return}Qo(function(){var M=i,Z=ws(s),te=[];e:{var K=Mi.get(e);if(K!==void 0){var me=Jl,he=e;switch(e){case"keypress":if(kr(s)===0)break e;case"keydown":case"keyup":me=fm;break;case"focusin":he="focus",me=Zl;break;case"focusout":he="blur",me=Zl;break;case"beforeblur":case"afterblur":me=Zl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=hi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=tm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=xm;break;case Di:case Ii:case Oi:me=rm;break;case Bi:me=ym;break;case"scroll":me=Zu;break;case"wheel":me=bm;break;case"copy":case"cut":case"paste":me=am;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=gi}var ge=(t&4)!==0,Ve=!ge&&e==="scroll",I=ge?K!==null?K+"Capture":null:K;ge=[];for(var E=M,B;E!==null;){B=E;var ae=B.stateNode;if(B.tag===5&&ae!==null&&(B=ae,I!==null&&(ae=Ss(E,I),ae!=null&&ge.push(Hs(E,ae,B)))),Ve)break;E=E.return}0<ge.length&&(K=new me(K,he,null,s,Z),te.push({event:K,listeners:ge}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",me=e==="mouseout"||e==="pointerout",K&&s!==Wn&&(he=s.relatedTarget||s.fromElement)&&(En(he)||he[Xt]))break e;if((me||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,me?(he=s.relatedTarget||s.toElement,me=M,he=he?En(he):null,he!==null&&(Ve=An(he),he!==Ve||he.tag!==5&&he.tag!==6)&&(he=null)):(me=null,he=M),me!==he)){if(ge=hi,ae="onMouseLeave",I="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(ge=gi,ae="onPointerLeave",I="onPointerEnter",E="pointer"),Ve=me==null?K:es(me),B=he==null?K:es(he),K=new ge(ae,E+"leave",me,s,Z),K.target=Ve,K.relatedTarget=B,ae=null,En(Z)===M&&(ge=new ge(I,E+"enter",he,s,Z),ge.target=B,ge.relatedTarget=Ve,ae=ge),Ve=ae,me&&he)t:{for(ge=me,I=he,E=0,B=ge;B;B=Xn(B))E++;for(B=0,ae=I;ae;ae=Xn(ae))B++;for(;0<E-B;)ge=Xn(ge),E--;for(;0<B-E;)I=Xn(I),B--;for(;E--;){if(ge===I||I!==null&&ge===I.alternate)break t;ge=Xn(ge),I=Xn(I)}ge=null}else ge=null;me!==null&&Vi(te,K,me,ge,!1),he!==null&&Ve!==null&&Vi(te,Ve,he,ge,!0)}}e:{if(K=M?es(M):window,me=K.nodeName&&K.nodeName.toLowerCase(),me==="select"||me==="input"&&K.type==="file")var ve=_m;else if(Ni(K))if(Ci)ve=Pm;else{ve=Em;var je=Am}else(me=K.nodeName)&&me.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(ve=Fm);if(ve&&(ve=ve(e,M))){Si(te,ve,s,Z);break e}je&&je(e,K,M),e==="focusout"&&(je=K._wrapperState)&&je.controlled&&K.type==="number"&&ys(K,"number",K.value)}switch(je=M?es(M):window,e){case"focusin":(Ni(je)||je.contentEditable==="true")&&(Jn=je,la=M,zs=null);break;case"focusout":zs=la=Jn=null;break;case"mousedown":aa=!0;break;case"contextmenu":case"mouseup":case"dragend":aa=!1,Ri(te,s,Z);break;case"selectionchange":if(Lm)break;case"keydown":case"keyup":Ri(te,s,Z)}var we;if(ta)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else qn?ji(e,s)&&(Se="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Se="onCompositionStart");Se&&(yi&&s.locale!=="ko"&&(qn||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&qn&&(we=fi()):(mn=Z,ql="value"in mn?mn.value:mn.textContent,qn=!0)),je=Rr(M,Se),0<je.length&&(Se=new xi(Se,e,null,s,Z),te.push({event:Se,listeners:je}),we?Se.data=we:(we=wi(s),we!==null&&(Se.data=we)))),(we=wm?Nm(e,s):Sm(e,s))&&(M=Rr(M,"onBeforeInput"),0<M.length&&(Z=new xi("onBeforeInput","beforeinput",null,s,Z),te.push({event:Z,listeners:M}),Z.data=we))}$i(te,t)})}function Hs(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Rr(e,t){for(var s=t+"Capture",r=[];e!==null;){var l=e,i=l.stateNode;l.tag===5&&i!==null&&(l=i,i=Ss(e,s),i!=null&&r.unshift(Hs(e,i,l)),i=Ss(e,t),i!=null&&r.push(Hs(e,i,l))),e=e.return}return r}function Xn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vi(e,t,s,r,l){for(var i=t._reactName,m=[];s!==null&&s!==r;){var j=s,_=j.alternate,M=j.stateNode;if(_!==null&&_===r)break;j.tag===5&&M!==null&&(j=M,l?(_=Ss(s,i),_!=null&&m.unshift(Hs(s,_,j))):l||(_=Ss(s,i),_!=null&&m.push(Hs(s,_,j)))),s=s.return}m.length!==0&&e.push({event:t,listeners:m})}var Bm=/\r\n?/g,Mm=/\u0000|\uFFFD/g;function Wi(e){return(typeof e=="string"?e:""+e).replace(Bm,`
`).replace(Mm,"")}function Lr(e,t,s){if(t=Wi(t),Wi(e)!==t&&s)throw Error(c(425))}function Dr(){}var ma=null,fa=null;function pa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ha=typeof setTimeout=="function"?setTimeout:void 0,zm=typeof clearTimeout=="function"?clearTimeout:void 0,Gi=typeof Promise=="function"?Promise:void 0,Um=typeof queueMicrotask=="function"?queueMicrotask:typeof Gi<"u"?function(e){return Gi.resolve(null).then(e).catch($m)}:ha;function $m(e){setTimeout(function(){throw e})}function xa(e,t){var s=t,r=0;do{var l=s.nextSibling;if(e.removeChild(s),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(r===0){e.removeChild(l),Rs(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=l}while(s);Rs(t)}function pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yi(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Zn=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Zn,Vs="__reactProps$"+Zn,Xt="__reactContainer$"+Zn,ga="__reactEvents$"+Zn,Hm="__reactListeners$"+Zn,Vm="__reactHandles$"+Zn;function En(e){var t=e[Ht];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Xt]||s[Ht]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Yi(e);e!==null;){if(s=e[Ht])return s;e=Yi(e)}return t}e=s,s=e.parentNode}return null}function Ws(e){return e=e[Ht]||e[Xt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function es(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(c(33))}function Ir(e){return e[Vs]||null}var ya=[],ts=-1;function hn(e){return{current:e}}function Ie(e){0>ts||(e.current=ya[ts],ya[ts]=null,ts--)}function Le(e,t){ts++,ya[ts]=e.current,e.current=t}var xn={},tt=hn(xn),mt=hn(!1),Fn=xn;function ns(e,t){var s=e.type.contextTypes;if(!s)return xn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},i;for(i in s)l[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function ft(e){return e=e.childContextTypes,e!=null}function Or(){Ie(mt),Ie(tt)}function Qi(e,t,s){if(tt.current!==xn)throw Error(c(168));Le(tt,t),Le(mt,s)}function qi(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(c(108,J(e)||"Unknown",l));return D({},s,r)}function Br(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xn,Fn=tt.current,Le(tt,e),Le(mt,mt.current),!0}function Ji(e,t,s){var r=e.stateNode;if(!r)throw Error(c(169));s?(e=qi(e,t,Fn),r.__reactInternalMemoizedMergedChildContext=e,Ie(mt),Ie(tt),Le(tt,e)):Ie(mt),Le(mt,s)}var Zt=null,Mr=!1,va=!1;function Ki(e){Zt===null?Zt=[e]:Zt.push(e)}function Wm(e){Mr=!0,Ki(e)}function gn(){if(!va&&Zt!==null){va=!0;var e=0,t=Te;try{var s=Zt;for(Te=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}Zt=null,Mr=!1}catch(l){throw Zt!==null&&(Zt=Zt.slice(e+1)),Zo(Ul,gn),l}finally{Te=t,va=!1}}return null}var ss=[],rs=0,zr=null,Ur=0,_t=[],At=0,Pn=null,en=1,tn="";function Tn(e,t){ss[rs++]=Ur,ss[rs++]=zr,zr=e,Ur=t}function Xi(e,t,s){_t[At++]=en,_t[At++]=tn,_t[At++]=Pn,Pn=e;var r=en;e=tn;var l=32-Rt(r)-1;r&=~(1<<l),s+=1;var i=32-Rt(t)+l;if(30<i){var m=l-l%5;i=(r&(1<<m)-1).toString(32),r>>=m,l-=m,en=1<<32-Rt(t)+l|s<<l|r,tn=i+e}else en=1<<i|s<<l|r,tn=e}function ba(e){e.return!==null&&(Tn(e,1),Xi(e,1,0))}function ja(e){for(;e===zr;)zr=ss[--rs],ss[rs]=null,Ur=ss[--rs],ss[rs]=null;for(;e===Pn;)Pn=_t[--At],_t[At]=null,tn=_t[--At],_t[At]=null,en=_t[--At],_t[At]=null}var wt=null,Nt=null,Oe=!1,Dt=null;function Zi(e,t){var s=Tt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function ec(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wt=e,Nt=pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wt=e,Nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Pn!==null?{id:en,overflow:tn}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Tt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,wt=e,Nt=null,!0):!1;default:return!1}}function wa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Na(e){if(Oe){var t=Nt;if(t){var s=t;if(!ec(e,t)){if(wa(e))throw Error(c(418));t=pn(s.nextSibling);var r=wt;t&&ec(e,t)?Zi(r,s):(e.flags=e.flags&-4097|2,Oe=!1,wt=e)}}else{if(wa(e))throw Error(c(418));e.flags=e.flags&-4097|2,Oe=!1,wt=e}}}function tc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wt=e}function $r(e){if(e!==wt)return!1;if(!Oe)return tc(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!pa(e.type,e.memoizedProps)),t&&(t=Nt)){if(wa(e))throw nc(),Error(c(418));for(;t;)Zi(e,t),t=pn(t.nextSibling)}if(tc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Nt=pn(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Nt=null}}else Nt=wt?pn(e.stateNode.nextSibling):null;return!0}function nc(){for(var e=Nt;e;)e=pn(e.nextSibling)}function ls(){Nt=wt=null,Oe=!1}function Sa(e){Dt===null?Dt=[e]:Dt.push(e)}var Gm=q.ReactCurrentBatchConfig;function Gs(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(c(309));var r=s.stateNode}if(!r)throw Error(c(147,e));var l=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(m){var j=l.refs;m===null?delete j[i]:j[i]=m},t._stringRef=i,t)}if(typeof e!="string")throw Error(c(284));if(!s._owner)throw Error(c(290,e))}return e}function Hr(e,t){throw e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sc(e){var t=e._init;return t(e._payload)}function rc(e){function t(I,E){if(e){var B=I.deletions;B===null?(I.deletions=[E],I.flags|=16):B.push(E)}}function s(I,E){if(!e)return null;for(;E!==null;)t(I,E),E=E.sibling;return null}function r(I,E){for(I=new Map;E!==null;)E.key!==null?I.set(E.key,E):I.set(E.index,E),E=E.sibling;return I}function l(I,E){return I=Cn(I,E),I.index=0,I.sibling=null,I}function i(I,E,B){return I.index=B,e?(B=I.alternate,B!==null?(B=B.index,B<E?(I.flags|=2,E):B):(I.flags|=2,E)):(I.flags|=1048576,E)}function m(I){return e&&I.alternate===null&&(I.flags|=2),I}function j(I,E,B,ae){return E===null||E.tag!==6?(E=xo(B,I.mode,ae),E.return=I,E):(E=l(E,B),E.return=I,E)}function _(I,E,B,ae){var ve=B.type;return ve===P?Z(I,E,B.props.children,ae,B.key):E!==null&&(E.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===$&&sc(ve)===E.type)?(ae=l(E,B.props),ae.ref=Gs(I,E,B),ae.return=I,ae):(ae=fl(B.type,B.key,B.props,null,I.mode,ae),ae.ref=Gs(I,E,B),ae.return=I,ae)}function M(I,E,B,ae){return E===null||E.tag!==4||E.stateNode.containerInfo!==B.containerInfo||E.stateNode.implementation!==B.implementation?(E=go(B,I.mode,ae),E.return=I,E):(E=l(E,B.children||[]),E.return=I,E)}function Z(I,E,B,ae,ve){return E===null||E.tag!==7?(E=zn(B,I.mode,ae,ve),E.return=I,E):(E=l(E,B),E.return=I,E)}function te(I,E,B){if(typeof E=="string"&&E!==""||typeof E=="number")return E=xo(""+E,I.mode,B),E.return=I,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ie:return B=fl(E.type,E.key,E.props,null,I.mode,B),B.ref=Gs(I,null,E),B.return=I,B;case de:return E=go(E,I.mode,B),E.return=I,E;case $:var ae=E._init;return te(I,ae(E._payload),B)}if(qt(E)||ne(E))return E=zn(E,I.mode,B,null),E.return=I,E;Hr(I,E)}return null}function K(I,E,B,ae){var ve=E!==null?E.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return ve!==null?null:j(I,E,""+B,ae);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ie:return B.key===ve?_(I,E,B,ae):null;case de:return B.key===ve?M(I,E,B,ae):null;case $:return ve=B._init,K(I,E,ve(B._payload),ae)}if(qt(B)||ne(B))return ve!==null?null:Z(I,E,B,ae,null);Hr(I,B)}return null}function me(I,E,B,ae,ve){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return I=I.get(B)||null,j(E,I,""+ae,ve);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case ie:return I=I.get(ae.key===null?B:ae.key)||null,_(E,I,ae,ve);case de:return I=I.get(ae.key===null?B:ae.key)||null,M(E,I,ae,ve);case $:var je=ae._init;return me(I,E,B,je(ae._payload),ve)}if(qt(ae)||ne(ae))return I=I.get(B)||null,Z(E,I,ae,ve,null);Hr(E,ae)}return null}function he(I,E,B,ae){for(var ve=null,je=null,we=E,Se=E=0,Ke=null;we!==null&&Se<B.length;Se++){we.index>Se?(Ke=we,we=null):Ke=we.sibling;var Fe=K(I,we,B[Se],ae);if(Fe===null){we===null&&(we=Ke);break}e&&we&&Fe.alternate===null&&t(I,we),E=i(Fe,E,Se),je===null?ve=Fe:je.sibling=Fe,je=Fe,we=Ke}if(Se===B.length)return s(I,we),Oe&&Tn(I,Se),ve;if(we===null){for(;Se<B.length;Se++)we=te(I,B[Se],ae),we!==null&&(E=i(we,E,Se),je===null?ve=we:je.sibling=we,je=we);return Oe&&Tn(I,Se),ve}for(we=r(I,we);Se<B.length;Se++)Ke=me(we,I,Se,B[Se],ae),Ke!==null&&(e&&Ke.alternate!==null&&we.delete(Ke.key===null?Se:Ke.key),E=i(Ke,E,Se),je===null?ve=Ke:je.sibling=Ke,je=Ke);return e&&we.forEach(function(kn){return t(I,kn)}),Oe&&Tn(I,Se),ve}function ge(I,E,B,ae){var ve=ne(B);if(typeof ve!="function")throw Error(c(150));if(B=ve.call(B),B==null)throw Error(c(151));for(var je=ve=null,we=E,Se=E=0,Ke=null,Fe=B.next();we!==null&&!Fe.done;Se++,Fe=B.next()){we.index>Se?(Ke=we,we=null):Ke=we.sibling;var kn=K(I,we,Fe.value,ae);if(kn===null){we===null&&(we=Ke);break}e&&we&&kn.alternate===null&&t(I,we),E=i(kn,E,Se),je===null?ve=kn:je.sibling=kn,je=kn,we=Ke}if(Fe.done)return s(I,we),Oe&&Tn(I,Se),ve;if(we===null){for(;!Fe.done;Se++,Fe=B.next())Fe=te(I,Fe.value,ae),Fe!==null&&(E=i(Fe,E,Se),je===null?ve=Fe:je.sibling=Fe,je=Fe);return Oe&&Tn(I,Se),ve}for(we=r(I,we);!Fe.done;Se++,Fe=B.next())Fe=me(we,I,Se,Fe.value,ae),Fe!==null&&(e&&Fe.alternate!==null&&we.delete(Fe.key===null?Se:Fe.key),E=i(Fe,E,Se),je===null?ve=Fe:je.sibling=Fe,je=Fe);return e&&we.forEach(function(kf){return t(I,kf)}),Oe&&Tn(I,Se),ve}function Ve(I,E,B,ae){if(typeof B=="object"&&B!==null&&B.type===P&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case ie:e:{for(var ve=B.key,je=E;je!==null;){if(je.key===ve){if(ve=B.type,ve===P){if(je.tag===7){s(I,je.sibling),E=l(je,B.props.children),E.return=I,I=E;break e}}else if(je.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===$&&sc(ve)===je.type){s(I,je.sibling),E=l(je,B.props),E.ref=Gs(I,je,B),E.return=I,I=E;break e}s(I,je);break}else t(I,je);je=je.sibling}B.type===P?(E=zn(B.props.children,I.mode,ae,B.key),E.return=I,I=E):(ae=fl(B.type,B.key,B.props,null,I.mode,ae),ae.ref=Gs(I,E,B),ae.return=I,I=ae)}return m(I);case de:e:{for(je=B.key;E!==null;){if(E.key===je)if(E.tag===4&&E.stateNode.containerInfo===B.containerInfo&&E.stateNode.implementation===B.implementation){s(I,E.sibling),E=l(E,B.children||[]),E.return=I,I=E;break e}else{s(I,E);break}else t(I,E);E=E.sibling}E=go(B,I.mode,ae),E.return=I,I=E}return m(I);case $:return je=B._init,Ve(I,E,je(B._payload),ae)}if(qt(B))return he(I,E,B,ae);if(ne(B))return ge(I,E,B,ae);Hr(I,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,E!==null&&E.tag===6?(s(I,E.sibling),E=l(E,B),E.return=I,I=E):(s(I,E),E=xo(B,I.mode,ae),E.return=I,I=E),m(I)):s(I,E)}return Ve}var as=rc(!0),lc=rc(!1),Vr=hn(null),Wr=null,os=null,Ca=null;function ka(){Ca=os=Wr=null}function _a(e){var t=Vr.current;Ie(Vr),e._currentValue=t}function Aa(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function is(e,t){Wr=e,Ca=os=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(pt=!0),e.firstContext=null)}function Et(e){var t=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:t,next:null},os===null){if(Wr===null)throw Error(c(308));os=e,Wr.dependencies={lanes:0,firstContext:e}}else os=os.next=e;return t}var Rn=null;function Ea(e){Rn===null?Rn=[e]:Rn.push(e)}function ac(e,t,s,r){var l=t.interleaved;return l===null?(s.next=s,Ea(t)):(s.next=l.next,l.next=s),t.interleaved=s,nn(e,r)}function nn(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var yn=!1;function Fa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Ee&2)!==0){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,nn(e,s)}return l=r.interleaved,l===null?(t.next=t,Ea(r)):(t.next=l.next,l.next=t),r.interleaved=t,nn(e,s)}function Gr(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,Vl(e,s)}}function ic(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var l=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var m={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?l=i=m:i=i.next=m,s=s.next}while(s!==null);i===null?l=i=t:i=i.next=t}else l=i=t;s={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Yr(e,t,s,r){var l=e.updateQueue;yn=!1;var i=l.firstBaseUpdate,m=l.lastBaseUpdate,j=l.shared.pending;if(j!==null){l.shared.pending=null;var _=j,M=_.next;_.next=null,m===null?i=M:m.next=M,m=_;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,j=Z.lastBaseUpdate,j!==m&&(j===null?Z.firstBaseUpdate=M:j.next=M,Z.lastBaseUpdate=_))}if(i!==null){var te=l.baseState;m=0,Z=M=_=null,j=i;do{var K=j.lane,me=j.eventTime;if((r&K)===K){Z!==null&&(Z=Z.next={eventTime:me,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var he=e,ge=j;switch(K=t,me=s,ge.tag){case 1:if(he=ge.payload,typeof he=="function"){te=he.call(me,te,K);break e}te=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ge.payload,K=typeof he=="function"?he.call(me,te,K):he,K==null)break e;te=D({},te,K);break e;case 2:yn=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,K=l.effects,K===null?l.effects=[j]:K.push(j))}else me={eventTime:me,lane:K,tag:j.tag,payload:j.payload,callback:j.callback,next:null},Z===null?(M=Z=me,_=te):Z=Z.next=me,m|=K;if(j=j.next,j===null){if(j=l.shared.pending,j===null)break;K=j,j=K.next,K.next=null,l.lastBaseUpdate=K,l.shared.pending=null}}while(!0);if(Z===null&&(_=te),l.baseState=_,l.firstBaseUpdate=M,l.lastBaseUpdate=Z,t=l.shared.interleaved,t!==null){l=t;do m|=l.lane,l=l.next;while(l!==t)}else i===null&&(l.shared.lanes=0);In|=m,e.lanes=m,e.memoizedState=te}}function cc(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=s,typeof l!="function")throw Error(c(191,l));l.call(r)}}}var Ys={},Vt=hn(Ys),Qs=hn(Ys),qs=hn(Ys);function Ln(e){if(e===Ys)throw Error(c(174));return e}function Pa(e,t){switch(Le(qs,t),Le(Qs,e),Le(Vt,Ys),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Re(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Re(t,e)}Ie(Vt),Le(Vt,t)}function cs(){Ie(Vt),Ie(Qs),Ie(qs)}function dc(e){Ln(qs.current);var t=Ln(Vt.current),s=Re(t,e.type);t!==s&&(Le(Qs,e),Le(Vt,s))}function Ta(e){Qs.current===e&&(Ie(Vt),Ie(Qs))}var Be=hn(0);function Qr(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ra=[];function La(){for(var e=0;e<Ra.length;e++)Ra[e]._workInProgressVersionPrimary=null;Ra.length=0}var qr=q.ReactCurrentDispatcher,Da=q.ReactCurrentBatchConfig,Dn=0,Me=null,Ye=null,qe=null,Jr=!1,Js=!1,Ks=0,Ym=0;function nt(){throw Error(c(321))}function Ia(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Lt(e[s],t[s]))return!1;return!0}function Oa(e,t,s,r,l,i){if(Dn=i,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qr.current=e===null||e.memoizedState===null?Km:Xm,e=s(r,l),Js){i=0;do{if(Js=!1,Ks=0,25<=i)throw Error(c(301));i+=1,qe=Ye=null,t.updateQueue=null,qr.current=Zm,e=s(r,l)}while(Js)}if(qr.current=Zr,t=Ye!==null&&Ye.next!==null,Dn=0,qe=Ye=Me=null,Jr=!1,t)throw Error(c(300));return e}function Ba(){var e=Ks!==0;return Ks=0,e}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Me.memoizedState=qe=e:qe=qe.next=e,qe}function Ft(){if(Ye===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=qe===null?Me.memoizedState:qe.next;if(t!==null)qe=t,Ye=e;else{if(e===null)throw Error(c(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},qe===null?Me.memoizedState=qe=e:qe=qe.next=e}return qe}function Xs(e,t){return typeof t=="function"?t(e):t}function Ma(e){var t=Ft(),s=t.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=e;var r=Ye,l=r.baseQueue,i=s.pending;if(i!==null){if(l!==null){var m=l.next;l.next=i.next,i.next=m}r.baseQueue=l=i,s.pending=null}if(l!==null){i=l.next,r=r.baseState;var j=m=null,_=null,M=i;do{var Z=M.lane;if((Dn&Z)===Z)_!==null&&(_=_.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),r=M.hasEagerState?M.eagerState:e(r,M.action);else{var te={lane:Z,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};_===null?(j=_=te,m=r):_=_.next=te,Me.lanes|=Z,In|=Z}M=M.next}while(M!==null&&M!==i);_===null?m=r:_.next=j,Lt(r,t.memoizedState)||(pt=!0),t.memoizedState=r,t.baseState=m,t.baseQueue=_,s.lastRenderedState=r}if(e=s.interleaved,e!==null){l=e;do i=l.lane,Me.lanes|=i,In|=i,l=l.next;while(l!==e)}else l===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function za(e){var t=Ft(),s=t.queue;if(s===null)throw Error(c(311));s.lastRenderedReducer=e;var r=s.dispatch,l=s.pending,i=t.memoizedState;if(l!==null){s.pending=null;var m=l=l.next;do i=e(i,m.action),m=m.next;while(m!==l);Lt(i,t.memoizedState)||(pt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,r]}function uc(){}function mc(e,t){var s=Me,r=Ft(),l=t(),i=!Lt(r.memoizedState,l);if(i&&(r.memoizedState=l,pt=!0),r=r.queue,Ua(hc.bind(null,s,r,e),[e]),r.getSnapshot!==t||i||qe!==null&&qe.memoizedState.tag&1){if(s.flags|=2048,Zs(9,pc.bind(null,s,r,l,t),void 0,null),Je===null)throw Error(c(349));(Dn&30)!==0||fc(s,t,l)}return l}function fc(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function pc(e,t,s,r){t.value=s,t.getSnapshot=r,xc(t)&&gc(e)}function hc(e,t,s){return s(function(){xc(t)&&gc(e)})}function xc(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Lt(e,s)}catch{return!0}}function gc(e){var t=nn(e,1);t!==null&&Mt(t,e,1,-1)}function yc(e){var t=Wt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:e},t.queue=e,e=e.dispatch=Jm.bind(null,Me,e),[t.memoizedState,e]}function Zs(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e)),e}function vc(){return Ft().memoizedState}function Kr(e,t,s,r){var l=Wt();Me.flags|=e,l.memoizedState=Zs(1|t,s,void 0,r===void 0?null:r)}function Xr(e,t,s,r){var l=Ft();r=r===void 0?null:r;var i=void 0;if(Ye!==null){var m=Ye.memoizedState;if(i=m.destroy,r!==null&&Ia(r,m.deps)){l.memoizedState=Zs(t,s,i,r);return}}Me.flags|=e,l.memoizedState=Zs(1|t,s,i,r)}function bc(e,t){return Kr(8390656,8,e,t)}function Ua(e,t){return Xr(2048,8,e,t)}function jc(e,t){return Xr(4,2,e,t)}function wc(e,t){return Xr(4,4,e,t)}function Nc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sc(e,t,s){return s=s!=null?s.concat([e]):null,Xr(4,4,Nc.bind(null,t,e),s)}function $a(){}function Cc(e,t){var s=Ft();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Ia(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function kc(e,t){var s=Ft();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Ia(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function _c(e,t,s){return(Dn&21)===0?(e.baseState&&(e.baseState=!1,pt=!0),e.memoizedState=s):(Lt(s,t)||(s=si(),Me.lanes|=s,In|=s,e.baseState=!0),t)}function Qm(e,t){var s=Te;Te=s!==0&&4>s?s:4,e(!0);var r=Da.transition;Da.transition={};try{e(!1),t()}finally{Te=s,Da.transition=r}}function Ac(){return Ft().memoizedState}function qm(e,t,s){var r=Nn(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},Ec(e))Fc(t,s);else if(s=ac(e,t,s,r),s!==null){var l=ct();Mt(s,e,r,l),Pc(s,t,r)}}function Jm(e,t,s){var r=Nn(e),l={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ec(e))Fc(t,l);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var m=t.lastRenderedState,j=i(m,s);if(l.hasEagerState=!0,l.eagerState=j,Lt(j,m)){var _=t.interleaved;_===null?(l.next=l,Ea(t)):(l.next=_.next,_.next=l),t.interleaved=l;return}}catch{}finally{}s=ac(e,t,l,r),s!==null&&(l=ct(),Mt(s,e,r,l),Pc(s,t,r))}}function Ec(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function Fc(e,t){Js=Jr=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Pc(e,t,s){if((s&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,Vl(e,s)}}var Zr={readContext:Et,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},Km={readContext:Et,useCallback:function(e,t){return Wt().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:bc,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Kr(4194308,4,Nc.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Kr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Kr(4,2,e,t)},useMemo:function(e,t){var s=Wt();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=Wt();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qm.bind(null,Me,e),[r.memoizedState,e]},useRef:function(e){var t=Wt();return e={current:e},t.memoizedState=e},useState:yc,useDebugValue:$a,useDeferredValue:function(e){return Wt().memoizedState=e},useTransition:function(){var e=yc(!1),t=e[0];return e=Qm.bind(null,e[1]),Wt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=Me,l=Wt();if(Oe){if(s===void 0)throw Error(c(407));s=s()}else{if(s=t(),Je===null)throw Error(c(349));(Dn&30)!==0||fc(r,t,s)}l.memoizedState=s;var i={value:s,getSnapshot:t};return l.queue=i,bc(hc.bind(null,r,i,e),[e]),r.flags|=2048,Zs(9,pc.bind(null,r,i,s,t),void 0,null),s},useId:function(){var e=Wt(),t=Je.identifierPrefix;if(Oe){var s=tn,r=en;s=(r&~(1<<32-Rt(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=Ks++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Ym++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xm={readContext:Et,useCallback:Cc,useContext:Et,useEffect:Ua,useImperativeHandle:Sc,useInsertionEffect:jc,useLayoutEffect:wc,useMemo:kc,useReducer:Ma,useRef:vc,useState:function(){return Ma(Xs)},useDebugValue:$a,useDeferredValue:function(e){var t=Ft();return _c(t,Ye.memoizedState,e)},useTransition:function(){var e=Ma(Xs)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:uc,useSyncExternalStore:mc,useId:Ac,unstable_isNewReconciler:!1},Zm={readContext:Et,useCallback:Cc,useContext:Et,useEffect:Ua,useImperativeHandle:Sc,useInsertionEffect:jc,useLayoutEffect:wc,useMemo:kc,useReducer:za,useRef:vc,useState:function(){return za(Xs)},useDebugValue:$a,useDeferredValue:function(e){var t=Ft();return Ye===null?t.memoizedState=e:_c(t,Ye.memoizedState,e)},useTransition:function(){var e=za(Xs)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:uc,useSyncExternalStore:mc,useId:Ac,unstable_isNewReconciler:!1};function It(e,t){if(e&&e.defaultProps){t=D({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Ha(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:D({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var el={isMounted:function(e){return(e=e._reactInternals)?An(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=ct(),l=Nn(e),i=sn(r,l);i.payload=t,s!=null&&(i.callback=s),t=vn(e,i,l),t!==null&&(Mt(t,e,l,r),Gr(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=ct(),l=Nn(e),i=sn(r,l);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=vn(e,i,l),t!==null&&(Mt(t,e,l,r),Gr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ct(),r=Nn(e),l=sn(s,r);l.tag=2,t!=null&&(l.callback=t),t=vn(e,l,r),t!==null&&(Mt(t,e,r,s),Gr(t,e,r))}};function Tc(e,t,s,r,l,i,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,m):t.prototype&&t.prototype.isPureReactComponent?!Ms(s,r)||!Ms(l,i):!0}function Rc(e,t,s){var r=!1,l=xn,i=t.contextType;return typeof i=="object"&&i!==null?i=Et(i):(l=ft(t)?Fn:tt.current,r=t.contextTypes,i=(r=r!=null)?ns(e,l):xn),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=el,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=i),t}function Lc(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&el.enqueueReplaceState(t,t.state,null)}function Va(e,t,s,r){var l=e.stateNode;l.props=s,l.state=e.memoizedState,l.refs={},Fa(e);var i=t.contextType;typeof i=="object"&&i!==null?l.context=Et(i):(i=ft(t)?Fn:tt.current,l.context=ns(e,i)),l.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ha(e,t,i,s),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&el.enqueueReplaceState(l,l.state,null),Yr(e,s,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function ds(e,t){try{var s="",r=t;do s+=k(r),r=r.return;while(r);var l=s}catch(i){l=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:l,digest:null}}function Wa(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ga(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var ef=typeof WeakMap=="function"?WeakMap:Map;function Dc(e,t,s){s=sn(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){ol||(ol=!0,oo=r),Ga(e,t)},s}function Ic(e,t,s){s=sn(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;s.payload=function(){return r(l)},s.callback=function(){Ga(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Ga(e,t),typeof r!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),s}function Oc(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new ef;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(s)||(l.add(s),e=hf.bind(null,e,t,s),t.then(e,e))}function Bc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mc(e,t,s,r,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=sn(-1,1),t.tag=2,vn(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var tf=q.ReactCurrentOwner,pt=!1;function it(e,t,s,r){t.child=e===null?lc(t,null,s,r):as(t,e.child,s,r)}function zc(e,t,s,r,l){s=s.render;var i=t.ref;return is(t,l),r=Oa(e,t,s,r,i,l),s=Ba(),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,rn(e,t,l)):(Oe&&s&&ba(t),t.flags|=1,it(e,t,r,l),t.child)}function Uc(e,t,s,r,l){if(e===null){var i=s.type;return typeof i=="function"&&!ho(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,$c(e,t,i,r,l)):(e=fl(s.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,(e.lanes&l)===0){var m=i.memoizedProps;if(s=s.compare,s=s!==null?s:Ms,s(m,r)&&e.ref===t.ref)return rn(e,t,l)}return t.flags|=1,e=Cn(i,r),e.ref=t.ref,e.return=t,t.child=e}function $c(e,t,s,r,l){if(e!==null){var i=e.memoizedProps;if(Ms(i,r)&&e.ref===t.ref)if(pt=!1,t.pendingProps=r=i,(e.lanes&l)!==0)(e.flags&131072)!==0&&(pt=!0);else return t.lanes=e.lanes,rn(e,t,l)}return Ya(e,t,s,r,l)}function Hc(e,t,s){var r=t.pendingProps,l=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(ms,St),St|=s;else{if((s&1073741824)===0)return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Le(ms,St),St|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:s,Le(ms,St),St|=r}else i!==null?(r=i.baseLanes|s,t.memoizedState=null):r=s,Le(ms,St),St|=r;return it(e,t,l,s),t.child}function Vc(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Ya(e,t,s,r,l){var i=ft(s)?Fn:tt.current;return i=ns(t,i),is(t,l),s=Oa(e,t,s,r,i,l),r=Ba(),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,rn(e,t,l)):(Oe&&r&&ba(t),t.flags|=1,it(e,t,s,l),t.child)}function Wc(e,t,s,r,l){if(ft(s)){var i=!0;Br(t)}else i=!1;if(is(t,l),t.stateNode===null)nl(e,t),Rc(t,s,r),Va(t,s,r,l),r=!0;else if(e===null){var m=t.stateNode,j=t.memoizedProps;m.props=j;var _=m.context,M=s.contextType;typeof M=="object"&&M!==null?M=Et(M):(M=ft(s)?Fn:tt.current,M=ns(t,M));var Z=s.getDerivedStateFromProps,te=typeof Z=="function"||typeof m.getSnapshotBeforeUpdate=="function";te||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(j!==r||_!==M)&&Lc(t,m,r,M),yn=!1;var K=t.memoizedState;m.state=K,Yr(t,r,m,l),_=t.memoizedState,j!==r||K!==_||mt.current||yn?(typeof Z=="function"&&(Ha(t,s,Z,r),_=t.memoizedState),(j=yn||Tc(t,s,j,r,K,_,M))?(te||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=_),m.props=r,m.state=_,m.context=M,r=j):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{m=t.stateNode,oc(e,t),j=t.memoizedProps,M=t.type===t.elementType?j:It(t.type,j),m.props=M,te=t.pendingProps,K=m.context,_=s.contextType,typeof _=="object"&&_!==null?_=Et(_):(_=ft(s)?Fn:tt.current,_=ns(t,_));var me=s.getDerivedStateFromProps;(Z=typeof me=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(j!==te||K!==_)&&Lc(t,m,r,_),yn=!1,K=t.memoizedState,m.state=K,Yr(t,r,m,l);var he=t.memoizedState;j!==te||K!==he||mt.current||yn?(typeof me=="function"&&(Ha(t,s,me,r),he=t.memoizedState),(M=yn||Tc(t,s,M,r,K,he,_)||!1)?(Z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(r,he,_),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(r,he,_)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||j===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=he),m.props=r,m.state=he,m.context=_,r=M):(typeof m.componentDidUpdate!="function"||j===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),r=!1)}return Qa(e,t,s,r,i,l)}function Qa(e,t,s,r,l,i){Vc(e,t);var m=(t.flags&128)!==0;if(!r&&!m)return l&&Ji(t,s,!1),rn(e,t,i);r=t.stateNode,tf.current=t;var j=m&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&m?(t.child=as(t,e.child,null,i),t.child=as(t,null,j,i)):it(e,t,j,i),t.memoizedState=r.state,l&&Ji(t,s,!0),t.child}function Gc(e){var t=e.stateNode;t.pendingContext?Qi(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qi(e,t.context,!1),Pa(e,t.containerInfo)}function Yc(e,t,s,r,l){return ls(),Sa(l),t.flags|=256,it(e,t,s,r),t.child}var qa={dehydrated:null,treeContext:null,retryLane:0};function Ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qc(e,t,s){var r=t.pendingProps,l=Be.current,i=!1,m=(t.flags&128)!==0,j;if((j=m)||(j=e!==null&&e.memoizedState===null?!1:(l&2)!==0),j?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Le(Be,l&1),e===null)return Na(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=r.children,e=r.fallback,i?(r=t.mode,i=t.child,m={mode:"hidden",children:m},(r&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=m):i=pl(m,r,0,null),e=zn(e,r,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ja(s),t.memoizedState=qa,e):Ka(t,m));if(l=e.memoizedState,l!==null&&(j=l.dehydrated,j!==null))return nf(e,t,m,r,j,l,s);if(i){i=r.fallback,m=t.mode,l=e.child,j=l.sibling;var _={mode:"hidden",children:r.children};return(m&1)===0&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=_,t.deletions=null):(r=Cn(l,_),r.subtreeFlags=l.subtreeFlags&14680064),j!==null?i=Cn(j,i):(i=zn(i,m,s,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,m=e.child.memoizedState,m=m===null?Ja(s):{baseLanes:m.baseLanes|s,cachePool:null,transitions:m.transitions},i.memoizedState=m,i.childLanes=e.childLanes&~s,t.memoizedState=qa,r}return i=e.child,e=i.sibling,r=Cn(i,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function Ka(e,t){return t=pl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tl(e,t,s,r){return r!==null&&Sa(r),as(t,e.child,null,s),e=Ka(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nf(e,t,s,r,l,i,m){if(s)return t.flags&256?(t.flags&=-257,r=Wa(Error(c(422))),tl(e,t,m,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,l=t.mode,r=pl({mode:"visible",children:r.children},l,0,null),i=zn(i,l,m,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,(t.mode&1)!==0&&as(t,e.child,null,m),t.child.memoizedState=Ja(m),t.memoizedState=qa,i);if((t.mode&1)===0)return tl(e,t,m,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var j=r.dgst;return r=j,i=Error(c(419)),r=Wa(i,r,void 0),tl(e,t,m,r)}if(j=(m&e.childLanes)!==0,pt||j){if(r=Je,r!==null){switch(m&-m){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(r.suspendedLanes|m))!==0?0:l,l!==0&&l!==i.retryLane&&(i.retryLane=l,nn(e,l),Mt(r,e,l,-1))}return po(),r=Wa(Error(c(421))),tl(e,t,m,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=xf.bind(null,e),l._reactRetry=t,null):(e=i.treeContext,Nt=pn(l.nextSibling),wt=t,Oe=!0,Dt=null,e!==null&&(_t[At++]=en,_t[At++]=tn,_t[At++]=Pn,en=e.id,tn=e.overflow,Pn=t),t=Ka(t,r.children),t.flags|=4096,t)}function qc(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Aa(e.return,t,s)}function Xa(e,t,s,r,l){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:l}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=s,i.tailMode=l)}function Jc(e,t,s){var r=t.pendingProps,l=r.revealOrder,i=r.tail;if(it(e,t,r.children,s),r=Be.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qc(e,s,t);else if(e.tag===19)qc(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Le(Be,r),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(s=t.child,l=null;s!==null;)e=s.alternate,e!==null&&Qr(e)===null&&(l=s),s=s.sibling;s=l,s===null?(l=t.child,t.child=null):(l=s.sibling,s.sibling=null),Xa(t,!1,l,s,i);break;case"backwards":for(s=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Qr(e)===null){t.child=l;break}e=l.sibling,l.sibling=s,s=l,l=e}Xa(t,!0,s,null,i);break;case"together":Xa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nl(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rn(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),In|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,s=Cn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Cn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function sf(e,t,s){switch(t.tag){case 3:Gc(t),ls();break;case 5:dc(t);break;case 1:ft(t.type)&&Br(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;Le(Vr,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Le(Be,Be.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?Qc(e,t,s):(Le(Be,Be.current&1),e=rn(e,t,s),e!==null?e.sibling:null);Le(Be,Be.current&1);break;case 19:if(r=(s&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Jc(e,t,s);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Le(Be,Be.current),r)break;return null;case 22:case 23:return t.lanes=0,Hc(e,t,s)}return rn(e,t,s)}var Kc,Za,Xc,Zc;Kc=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Za=function(){},Xc=function(e,t,s,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,Ln(Vt.current);var i=null;switch(s){case"input":l=et(e,l),r=et(e,r),i=[];break;case"select":l=D({},l,{value:void 0}),r=D({},r,{value:void 0}),i=[];break;case"textarea":l=vs(e,l),r=vs(e,r),i=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Dr)}js(s,r);var m;s=null;for(M in l)if(!r.hasOwnProperty(M)&&l.hasOwnProperty(M)&&l[M]!=null)if(M==="style"){var j=l[M];for(m in j)j.hasOwnProperty(m)&&(s||(s={}),s[m]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(u.hasOwnProperty(M)?i||(i=[]):(i=i||[]).push(M,null));for(M in r){var _=r[M];if(j=l!=null?l[M]:void 0,r.hasOwnProperty(M)&&_!==j&&(_!=null||j!=null))if(M==="style")if(j){for(m in j)!j.hasOwnProperty(m)||_&&_.hasOwnProperty(m)||(s||(s={}),s[m]="");for(m in _)_.hasOwnProperty(m)&&j[m]!==_[m]&&(s||(s={}),s[m]=_[m])}else s||(i||(i=[]),i.push(M,s)),s=_;else M==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,j=j?j.__html:void 0,_!=null&&j!==_&&(i=i||[]).push(M,_)):M==="children"?typeof _!="string"&&typeof _!="number"||(i=i||[]).push(M,""+_):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(u.hasOwnProperty(M)?(_!=null&&M==="onScroll"&&De("scroll",e),i||j===_||(i=[])):(i=i||[]).push(M,_))}s&&(i=i||[]).push("style",s);var M=i;(t.updateQueue=M)&&(t.flags|=4)}},Zc=function(e,t,s,r){s!==r&&(t.flags|=4)};function er(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function st(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var l=e.child;l!==null;)s|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)s|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function rf(e,t,s){var r=t.pendingProps;switch(ja(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(t),null;case 1:return ft(t.type)&&Or(),st(t),null;case 3:return r=t.stateNode,cs(),Ie(mt),Ie(tt),La(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&($r(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Dt!==null&&(uo(Dt),Dt=null))),Za(e,t),st(t),null;case 5:Ta(t);var l=Ln(qs.current);if(s=t.type,e!==null&&t.stateNode!=null)Xc(e,t,s,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(c(166));return st(t),null}if(e=Ln(Vt.current),$r(t)){r=t.stateNode,s=t.type;var i=t.memoizedProps;switch(r[Ht]=t,r[Vs]=i,e=(t.mode&1)!==0,s){case"dialog":De("cancel",r),De("close",r);break;case"iframe":case"object":case"embed":De("load",r);break;case"video":case"audio":for(l=0;l<Us.length;l++)De(Us[l],r);break;case"source":De("error",r);break;case"img":case"image":case"link":De("error",r),De("load",r);break;case"details":De("toggle",r);break;case"input":Qt(r,i),De("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},De("invalid",r);break;case"textarea":Jt(r,i),De("invalid",r)}js(s,i),l=null;for(var m in i)if(i.hasOwnProperty(m)){var j=i[m];m==="children"?typeof j=="string"?r.textContent!==j&&(i.suppressHydrationWarning!==!0&&Lr(r.textContent,j,e),l=["children",j]):typeof j=="number"&&r.textContent!==""+j&&(i.suppressHydrationWarning!==!0&&Lr(r.textContent,j,e),l=["children",""+j]):u.hasOwnProperty(m)&&j!=null&&m==="onScroll"&&De("scroll",r)}switch(s){case"input":$e(r),bt(r,i,!0);break;case"textarea":$e(r),ye(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Dr)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{m=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ae(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=m.createElement(s,{is:r.is}):(e=m.createElement(s),s==="select"&&(m=e,r.multiple?m.multiple=!0:r.size&&(m.size=r.size))):e=m.createElementNS(e,s),e[Ht]=t,e[Vs]=r,Kc(e,t,!1,!1),t.stateNode=e;e:{switch(m=Ut(s,r),s){case"dialog":De("cancel",e),De("close",e),l=r;break;case"iframe":case"object":case"embed":De("load",e),l=r;break;case"video":case"audio":for(l=0;l<Us.length;l++)De(Us[l],e);l=r;break;case"source":De("error",e),l=r;break;case"img":case"image":case"link":De("error",e),De("load",e),l=r;break;case"details":De("toggle",e),l=r;break;case"input":Qt(e,r),l=et(e,r),De("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=D({},r,{value:void 0}),De("invalid",e);break;case"textarea":Jt(e,r),l=vs(e,r),De("invalid",e);break;default:l=r}js(s,l),j=l;for(i in j)if(j.hasOwnProperty(i)){var _=j[i];i==="style"?Ol(e,_):i==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&ke(e,_)):i==="children"?typeof _=="string"?(s!=="textarea"||_!=="")&&We(e,_):typeof _=="number"&&We(e,""+_):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(u.hasOwnProperty(i)?_!=null&&i==="onScroll"&&De("scroll",e):_!=null&&V(e,i,_,m))}switch(s){case"input":$e(e),bt(e,r,!1);break;case"textarea":$e(e),ye(e);break;case"option":r.value!=null&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?an(e,!!r.multiple,i,!1):r.defaultValue!=null&&an(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Dr)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return st(t),null;case 6:if(e&&t.stateNode!=null)Zc(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(c(166));if(s=Ln(qs.current),Ln(Vt.current),$r(t)){if(r=t.stateNode,s=t.memoizedProps,r[Ht]=t,(i=r.nodeValue!==s)&&(e=wt,e!==null))switch(e.tag){case 3:Lr(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Lr(r.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[Ht]=t,t.stateNode=r}return st(t),null;case 13:if(Ie(Be),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&Nt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)nc(),ls(),t.flags|=98560,i=!1;else if(i=$r(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(c(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(c(317));i[Ht]=t}else ls(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;st(t),i=!1}else Dt!==null&&(uo(Dt),Dt=null),i=!0;if(!i)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Be.current&1)!==0?Qe===0&&(Qe=3):po())),t.updateQueue!==null&&(t.flags|=4),st(t),null);case 4:return cs(),Za(e,t),e===null&&$s(t.stateNode.containerInfo),st(t),null;case 10:return _a(t.type._context),st(t),null;case 17:return ft(t.type)&&Or(),st(t),null;case 19:if(Ie(Be),i=t.memoizedState,i===null)return st(t),null;if(r=(t.flags&128)!==0,m=i.rendering,m===null)if(r)er(i,!1);else{if(Qe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=Qr(e),m!==null){for(t.flags|=128,er(i,!1),r=m.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)i=s,e=r,i.flags&=14680066,m=i.alternate,m===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=m.childLanes,i.lanes=m.lanes,i.child=m.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=m.memoizedProps,i.memoizedState=m.memoizedState,i.updateQueue=m.updateQueue,i.type=m.type,e=m.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Le(Be,Be.current&1|2),t.child}e=e.sibling}i.tail!==null&&He()>fs&&(t.flags|=128,r=!0,er(i,!1),t.lanes=4194304)}else{if(!r)if(e=Qr(m),e!==null){if(t.flags|=128,r=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),er(i,!0),i.tail===null&&i.tailMode==="hidden"&&!m.alternate&&!Oe)return st(t),null}else 2*He()-i.renderingStartTime>fs&&s!==1073741824&&(t.flags|=128,r=!0,er(i,!1),t.lanes=4194304);i.isBackwards?(m.sibling=t.child,t.child=m):(s=i.last,s!==null?s.sibling=m:t.child=m,i.last=m)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=He(),t.sibling=null,s=Be.current,Le(Be,r?s&1|2:s&1),t):(st(t),null);case 22:case 23:return fo(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(St&1073741824)!==0&&(st(t),t.subtreeFlags&6&&(t.flags|=8192)):st(t),null;case 24:return null;case 25:return null}throw Error(c(156,t.tag))}function lf(e,t){switch(ja(t),t.tag){case 1:return ft(t.type)&&Or(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cs(),Ie(mt),Ie(tt),La(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ta(t),null;case 13:if(Ie(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));ls()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Be),null;case 4:return cs(),null;case 10:return _a(t.type._context),null;case 22:case 23:return fo(),null;case 24:return null;default:return null}}var sl=!1,rt=!1,af=typeof WeakSet=="function"?WeakSet:Set,fe=null;function us(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){ze(e,t,r)}else s.current=null}function eo(e,t,s){try{s()}catch(r){ze(e,t,r)}}var ed=!1;function of(e,t){if(ma=Nr,e=Ti(),ra(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var l=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var m=0,j=-1,_=-1,M=0,Z=0,te=e,K=null;t:for(;;){for(var me;te!==s||l!==0&&te.nodeType!==3||(j=m+l),te!==i||r!==0&&te.nodeType!==3||(_=m+r),te.nodeType===3&&(m+=te.nodeValue.length),(me=te.firstChild)!==null;)K=te,te=me;for(;;){if(te===e)break t;if(K===s&&++M===l&&(j=m),K===i&&++Z===r&&(_=m),(me=te.nextSibling)!==null)break;te=K,K=te.parentNode}te=me}s=j===-1||_===-1?null:{start:j,end:_}}else s=null}s=s||{start:0,end:0}}else s=null;for(fa={focusedElem:e,selectionRange:s},Nr=!1,fe=t;fe!==null;)if(t=fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fe=e;else for(;fe!==null;){t=fe;try{var he=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var ge=he.memoizedProps,Ve=he.memoizedState,I=t.stateNode,E=I.getSnapshotBeforeUpdate(t.elementType===t.type?ge:It(t.type,ge),Ve);I.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var B=t.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(ae){ze(t,t.return,ae)}if(e=t.sibling,e!==null){e.return=t.return,fe=e;break}fe=t.return}return he=ed,ed=!1,he}function tr(e,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var i=l.destroy;l.destroy=void 0,i!==void 0&&eo(t,s,i)}l=l.next}while(l!==r)}}function rl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function to(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function td(e){var t=e.alternate;t!==null&&(e.alternate=null,td(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ht],delete t[Vs],delete t[ga],delete t[Hm],delete t[Vm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nd(e){return e.tag===5||e.tag===3||e.tag===4}function sd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function no(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Dr));else if(r!==4&&(e=e.child,e!==null))for(no(e,t,s),e=e.sibling;e!==null;)no(e,t,s),e=e.sibling}function so(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(so(e,t,s),e=e.sibling;e!==null;)so(e,t,s),e=e.sibling}var Xe=null,Ot=!1;function bn(e,t,s){for(s=s.child;s!==null;)rd(e,t,s),s=s.sibling}function rd(e,t,s){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(gr,s)}catch{}switch(s.tag){case 5:rt||us(s,t);case 6:var r=Xe,l=Ot;Xe=null,bn(e,t,s),Xe=r,Ot=l,Xe!==null&&(Ot?(e=Xe,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Xe.removeChild(s.stateNode));break;case 18:Xe!==null&&(Ot?(e=Xe,s=s.stateNode,e.nodeType===8?xa(e.parentNode,s):e.nodeType===1&&xa(e,s),Rs(e)):xa(Xe,s.stateNode));break;case 4:r=Xe,l=Ot,Xe=s.stateNode.containerInfo,Ot=!0,bn(e,t,s),Xe=r,Ot=l;break;case 0:case 11:case 14:case 15:if(!rt&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var i=l,m=i.destroy;i=i.tag,m!==void 0&&((i&2)!==0||(i&4)!==0)&&eo(s,t,m),l=l.next}while(l!==r)}bn(e,t,s);break;case 1:if(!rt&&(us(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(j){ze(s,t,j)}bn(e,t,s);break;case 21:bn(e,t,s);break;case 22:s.mode&1?(rt=(r=rt)||s.memoizedState!==null,bn(e,t,s),rt=r):bn(e,t,s);break;default:bn(e,t,s)}}function ld(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new af),t.forEach(function(r){var l=gf.bind(null,e,r);s.has(r)||(s.add(r),r.then(l,l))})}}function Bt(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];try{var i=e,m=t,j=m;e:for(;j!==null;){switch(j.tag){case 5:Xe=j.stateNode,Ot=!1;break e;case 3:Xe=j.stateNode.containerInfo,Ot=!0;break e;case 4:Xe=j.stateNode.containerInfo,Ot=!0;break e}j=j.return}if(Xe===null)throw Error(c(160));rd(i,m,l),Xe=null,Ot=!1;var _=l.alternate;_!==null&&(_.return=null),l.return=null}catch(M){ze(l,t,M)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ad(t,e),t=t.sibling}function ad(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bt(t,e),Gt(e),r&4){try{tr(3,e,e.return),rl(3,e)}catch(ge){ze(e,e.return,ge)}try{tr(5,e,e.return)}catch(ge){ze(e,e.return,ge)}}break;case 1:Bt(t,e),Gt(e),r&512&&s!==null&&us(s,s.return);break;case 5:if(Bt(t,e),Gt(e),r&512&&s!==null&&us(s,s.return),e.flags&32){var l=e.stateNode;try{We(l,"")}catch(ge){ze(e,e.return,ge)}}if(r&4&&(l=e.stateNode,l!=null)){var i=e.memoizedProps,m=s!==null?s.memoizedProps:i,j=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{j==="input"&&i.type==="radio"&&i.name!=null&&dt(l,i),Ut(j,m);var M=Ut(j,i);for(m=0;m<_.length;m+=2){var Z=_[m],te=_[m+1];Z==="style"?Ol(l,te):Z==="dangerouslySetInnerHTML"?ke(l,te):Z==="children"?We(l,te):V(l,Z,te,M)}switch(j){case"input":Ct(l,i);break;case"textarea":ce(l,i);break;case"select":var K=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!i.multiple;var me=i.value;me!=null?an(l,!!i.multiple,me,!1):K!==!!i.multiple&&(i.defaultValue!=null?an(l,!!i.multiple,i.defaultValue,!0):an(l,!!i.multiple,i.multiple?[]:"",!1))}l[Vs]=i}catch(ge){ze(e,e.return,ge)}}break;case 6:if(Bt(t,e),Gt(e),r&4){if(e.stateNode===null)throw Error(c(162));l=e.stateNode,i=e.memoizedProps;try{l.nodeValue=i}catch(ge){ze(e,e.return,ge)}}break;case 3:if(Bt(t,e),Gt(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{Rs(t.containerInfo)}catch(ge){ze(e,e.return,ge)}break;case 4:Bt(t,e),Gt(e);break;case 13:Bt(t,e),Gt(e),l=e.child,l.flags&8192&&(i=l.memoizedState!==null,l.stateNode.isHidden=i,!i||l.alternate!==null&&l.alternate.memoizedState!==null||(ao=He())),r&4&&ld(e);break;case 22:if(Z=s!==null&&s.memoizedState!==null,e.mode&1?(rt=(M=rt)||Z,Bt(t,e),rt=M):Bt(t,e),Gt(e),r&8192){if(M=e.memoizedState!==null,(e.stateNode.isHidden=M)&&!Z&&(e.mode&1)!==0)for(fe=e,Z=e.child;Z!==null;){for(te=fe=Z;fe!==null;){switch(K=fe,me=K.child,K.tag){case 0:case 11:case 14:case 15:tr(4,K,K.return);break;case 1:us(K,K.return);var he=K.stateNode;if(typeof he.componentWillUnmount=="function"){r=K,s=K.return;try{t=r,he.props=t.memoizedProps,he.state=t.memoizedState,he.componentWillUnmount()}catch(ge){ze(r,s,ge)}}break;case 5:us(K,K.return);break;case 22:if(K.memoizedState!==null){cd(te);continue}}me!==null?(me.return=K,fe=me):cd(te)}Z=Z.sibling}e:for(Z=null,te=e;;){if(te.tag===5){if(Z===null){Z=te;try{l=te.stateNode,M?(i=l.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(j=te.stateNode,_=te.memoizedProps.style,m=_!=null&&_.hasOwnProperty("display")?_.display:null,j.style.display=_n("display",m))}catch(ge){ze(e,e.return,ge)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=M?"":te.memoizedProps}catch(ge){ze(e,e.return,ge)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===e)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===e)break e;for(;te.sibling===null;){if(te.return===null||te.return===e)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Bt(t,e),Gt(e),r&4&&ld(e);break;case 21:break;default:Bt(t,e),Gt(e)}}function Gt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(nd(s)){var r=s;break e}s=s.return}throw Error(c(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(We(l,""),r.flags&=-33);var i=sd(e);so(e,i,l);break;case 3:case 4:var m=r.stateNode.containerInfo,j=sd(e);no(e,j,m);break;default:throw Error(c(161))}}catch(_){ze(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cf(e,t,s){fe=e,od(e)}function od(e,t,s){for(var r=(e.mode&1)!==0;fe!==null;){var l=fe,i=l.child;if(l.tag===22&&r){var m=l.memoizedState!==null||sl;if(!m){var j=l.alternate,_=j!==null&&j.memoizedState!==null||rt;j=sl;var M=rt;if(sl=m,(rt=_)&&!M)for(fe=l;fe!==null;)m=fe,_=m.child,m.tag===22&&m.memoizedState!==null?dd(l):_!==null?(_.return=m,fe=_):dd(l);for(;i!==null;)fe=i,od(i),i=i.sibling;fe=l,sl=j,rt=M}id(e)}else(l.subtreeFlags&8772)!==0&&i!==null?(i.return=l,fe=i):id(e)}}function id(e){for(;fe!==null;){var t=fe;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:rt||rl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rt)if(s===null)r.componentDidMount();else{var l=t.elementType===t.type?s.memoizedProps:It(t.type,s.memoizedProps);r.componentDidUpdate(l,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&cc(t,i,r);break;case 3:var m=t.updateQueue;if(m!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}cc(t,m,s)}break;case 5:var j=t.stateNode;if(s===null&&t.flags&4){s=j;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&s.focus();break;case"img":_.src&&(s.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var M=t.alternate;if(M!==null){var Z=M.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&Rs(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}rt||t.flags&512&&to(t)}catch(K){ze(t,t.return,K)}}if(t===e){fe=null;break}if(s=t.sibling,s!==null){s.return=t.return,fe=s;break}fe=t.return}}function cd(e){for(;fe!==null;){var t=fe;if(t===e){fe=null;break}var s=t.sibling;if(s!==null){s.return=t.return,fe=s;break}fe=t.return}}function dd(e){for(;fe!==null;){var t=fe;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{rl(4,t)}catch(_){ze(t,s,_)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(_){ze(t,l,_)}}var i=t.return;try{to(t)}catch(_){ze(t,i,_)}break;case 5:var m=t.return;try{to(t)}catch(_){ze(t,m,_)}}}catch(_){ze(t,t.return,_)}if(t===e){fe=null;break}var j=t.sibling;if(j!==null){j.return=t.return,fe=j;break}fe=t.return}}var df=Math.ceil,ll=q.ReactCurrentDispatcher,ro=q.ReactCurrentOwner,Pt=q.ReactCurrentBatchConfig,Ee=0,Je=null,Ge=null,Ze=0,St=0,ms=hn(0),Qe=0,nr=null,In=0,al=0,lo=0,sr=null,ht=null,ao=0,fs=1/0,ln=null,ol=!1,oo=null,jn=null,il=!1,wn=null,cl=0,rr=0,io=null,dl=-1,ul=0;function ct(){return(Ee&6)!==0?He():dl!==-1?dl:dl=He()}function Nn(e){return(e.mode&1)===0?1:(Ee&2)!==0&&Ze!==0?Ze&-Ze:Gm.transition!==null?(ul===0&&(ul=si()),ul):(e=Te,e!==0||(e=window.event,e=e===void 0?16:mi(e.type)),e)}function Mt(e,t,s,r){if(50<rr)throw rr=0,io=null,Error(c(185));As(e,s,r),((Ee&2)===0||e!==Je)&&(e===Je&&((Ee&2)===0&&(al|=s),Qe===4&&Sn(e,Ze)),xt(e,r),s===1&&Ee===0&&(t.mode&1)===0&&(fs=He()+500,Mr&&gn()))}function xt(e,t){var s=e.callbackNode;Gu(e,t);var r=br(e,e===Je?Ze:0);if(r===0)s!==null&&ei(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(s!=null&&ei(s),t===1)e.tag===0?Wm(md.bind(null,e)):Ki(md.bind(null,e)),Um(function(){(Ee&6)===0&&gn()}),s=null;else{switch(ri(r)){case 1:s=Ul;break;case 4:s=ti;break;case 16:s=xr;break;case 536870912:s=ni;break;default:s=xr}s=bd(s,ud.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function ud(e,t){if(dl=-1,ul=0,(Ee&6)!==0)throw Error(c(327));var s=e.callbackNode;if(ps()&&e.callbackNode!==s)return null;var r=br(e,e===Je?Ze:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=ml(e,r);else{t=r;var l=Ee;Ee|=2;var i=pd();(Je!==e||Ze!==t)&&(ln=null,fs=He()+500,Bn(e,t));do try{ff();break}catch(j){fd(e,j)}while(!0);ka(),ll.current=i,Ee=l,Ge!==null?t=0:(Je=null,Ze=0,t=Qe)}if(t!==0){if(t===2&&(l=$l(e),l!==0&&(r=l,t=co(e,l))),t===1)throw s=nr,Bn(e,0),Sn(e,r),xt(e,He()),s;if(t===6)Sn(e,r);else{if(l=e.current.alternate,(r&30)===0&&!uf(l)&&(t=ml(e,r),t===2&&(i=$l(e),i!==0&&(r=i,t=co(e,i))),t===1))throw s=nr,Bn(e,0),Sn(e,r),xt(e,He()),s;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(c(345));case 2:Mn(e,ht,ln);break;case 3:if(Sn(e,r),(r&130023424)===r&&(t=ao+500-He(),10<t)){if(br(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){ct(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=ha(Mn.bind(null,e,ht,ln),t);break}Mn(e,ht,ln);break;case 4:if(Sn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var m=31-Rt(r);i=1<<m,m=t[m],m>l&&(l=m),r&=~i}if(r=l,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*df(r/1960))-r,10<r){e.timeoutHandle=ha(Mn.bind(null,e,ht,ln),r);break}Mn(e,ht,ln);break;case 5:Mn(e,ht,ln);break;default:throw Error(c(329))}}}return xt(e,He()),e.callbackNode===s?ud.bind(null,e):null}function co(e,t){var s=sr;return e.current.memoizedState.isDehydrated&&(Bn(e,t).flags|=256),e=ml(e,t),e!==2&&(t=ht,ht=s,t!==null&&uo(t)),e}function uo(e){ht===null?ht=e:ht.push.apply(ht,e)}function uf(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var l=s[r],i=l.getSnapshot;l=l.value;try{if(!Lt(i(),l))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sn(e,t){for(t&=~lo,t&=~al,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Rt(t),r=1<<s;e[s]=-1,t&=~r}}function md(e){if((Ee&6)!==0)throw Error(c(327));ps();var t=br(e,0);if((t&1)===0)return xt(e,He()),null;var s=ml(e,t);if(e.tag!==0&&s===2){var r=$l(e);r!==0&&(t=r,s=co(e,r))}if(s===1)throw s=nr,Bn(e,0),Sn(e,t),xt(e,He()),s;if(s===6)throw Error(c(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mn(e,ht,ln),xt(e,He()),null}function mo(e,t){var s=Ee;Ee|=1;try{return e(t)}finally{Ee=s,Ee===0&&(fs=He()+500,Mr&&gn())}}function On(e){wn!==null&&wn.tag===0&&(Ee&6)===0&&ps();var t=Ee;Ee|=1;var s=Pt.transition,r=Te;try{if(Pt.transition=null,Te=1,e)return e()}finally{Te=r,Pt.transition=s,Ee=t,(Ee&6)===0&&gn()}}function fo(){St=ms.current,Ie(ms)}function Bn(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,zm(s)),Ge!==null)for(s=Ge.return;s!==null;){var r=s;switch(ja(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Or();break;case 3:cs(),Ie(mt),Ie(tt),La();break;case 5:Ta(r);break;case 4:cs();break;case 13:Ie(Be);break;case 19:Ie(Be);break;case 10:_a(r.type._context);break;case 22:case 23:fo()}s=s.return}if(Je=e,Ge=e=Cn(e.current,null),Ze=St=t,Qe=0,nr=null,lo=al=In=0,ht=sr=null,Rn!==null){for(t=0;t<Rn.length;t++)if(s=Rn[t],r=s.interleaved,r!==null){s.interleaved=null;var l=r.next,i=s.pending;if(i!==null){var m=i.next;i.next=l,r.next=m}s.pending=r}Rn=null}return e}function fd(e,t){do{var s=Ge;try{if(ka(),qr.current=Zr,Jr){for(var r=Me.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Jr=!1}if(Dn=0,qe=Ye=Me=null,Js=!1,Ks=0,ro.current=null,s===null||s.return===null){Qe=1,nr=t,Ge=null;break}e:{var i=e,m=s.return,j=s,_=t;if(t=Ze,j.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var M=_,Z=j,te=Z.tag;if((Z.mode&1)===0&&(te===0||te===11||te===15)){var K=Z.alternate;K?(Z.updateQueue=K.updateQueue,Z.memoizedState=K.memoizedState,Z.lanes=K.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var me=Bc(m);if(me!==null){me.flags&=-257,Mc(me,m,j,i,t),me.mode&1&&Oc(i,M,t),t=me,_=M;var he=t.updateQueue;if(he===null){var ge=new Set;ge.add(_),t.updateQueue=ge}else he.add(_);break e}else{if((t&1)===0){Oc(i,M,t),po();break e}_=Error(c(426))}}else if(Oe&&j.mode&1){var Ve=Bc(m);if(Ve!==null){(Ve.flags&65536)===0&&(Ve.flags|=256),Mc(Ve,m,j,i,t),Sa(ds(_,j));break e}}i=_=ds(_,j),Qe!==4&&(Qe=2),sr===null?sr=[i]:sr.push(i),i=m;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var I=Dc(i,_,t);ic(i,I);break e;case 1:j=_;var E=i.type,B=i.stateNode;if((i.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(jn===null||!jn.has(B)))){i.flags|=65536,t&=-t,i.lanes|=t;var ae=Ic(i,j,t);ic(i,ae);break e}}i=i.return}while(i!==null)}xd(s)}catch(ve){t=ve,Ge===s&&s!==null&&(Ge=s=s.return);continue}break}while(!0)}function pd(){var e=ll.current;return ll.current=Zr,e===null?Zr:e}function po(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),Je===null||(In&268435455)===0&&(al&268435455)===0||Sn(Je,Ze)}function ml(e,t){var s=Ee;Ee|=2;var r=pd();(Je!==e||Ze!==t)&&(ln=null,Bn(e,t));do try{mf();break}catch(l){fd(e,l)}while(!0);if(ka(),Ee=s,ll.current=r,Ge!==null)throw Error(c(261));return Je=null,Ze=0,Qe}function mf(){for(;Ge!==null;)hd(Ge)}function ff(){for(;Ge!==null&&!Ou();)hd(Ge)}function hd(e){var t=vd(e.alternate,e,St);e.memoizedProps=e.pendingProps,t===null?xd(e):Ge=t,ro.current=null}function xd(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=rf(s,t,St),s!==null){Ge=s;return}}else{if(s=lf(s,t),s!==null){s.flags&=32767,Ge=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qe=6,Ge=null;return}}if(t=t.sibling,t!==null){Ge=t;return}Ge=t=e}while(t!==null);Qe===0&&(Qe=5)}function Mn(e,t,s){var r=Te,l=Pt.transition;try{Pt.transition=null,Te=1,pf(e,t,s,r)}finally{Pt.transition=l,Te=r}return null}function pf(e,t,s,r){do ps();while(wn!==null);if((Ee&6)!==0)throw Error(c(327));s=e.finishedWork;var l=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(c(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(Yu(e,i),e===Je&&(Ge=Je=null,Ze=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||il||(il=!0,bd(xr,function(){return ps(),null})),i=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||i){i=Pt.transition,Pt.transition=null;var m=Te;Te=1;var j=Ee;Ee|=4,ro.current=null,of(e,s),ad(s,e),Rm(fa),Nr=!!ma,fa=ma=null,e.current=s,cf(s),Bu(),Ee=j,Te=m,Pt.transition=i}else e.current=s;if(il&&(il=!1,wn=e,cl=l),i=e.pendingLanes,i===0&&(jn=null),Uu(s.stateNode),xt(e,He()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)l=t[s],r(l.value,{componentStack:l.stack,digest:l.digest});if(ol)throw ol=!1,e=oo,oo=null,e;return(cl&1)!==0&&e.tag!==0&&ps(),i=e.pendingLanes,(i&1)!==0?e===io?rr++:(rr=0,io=e):rr=0,gn(),null}function ps(){if(wn!==null){var e=ri(cl),t=Pt.transition,s=Te;try{if(Pt.transition=null,Te=16>e?16:e,wn===null)var r=!1;else{if(e=wn,wn=null,cl=0,(Ee&6)!==0)throw Error(c(331));var l=Ee;for(Ee|=4,fe=e.current;fe!==null;){var i=fe,m=i.child;if((fe.flags&16)!==0){var j=i.deletions;if(j!==null){for(var _=0;_<j.length;_++){var M=j[_];for(fe=M;fe!==null;){var Z=fe;switch(Z.tag){case 0:case 11:case 15:tr(8,Z,i)}var te=Z.child;if(te!==null)te.return=Z,fe=te;else for(;fe!==null;){Z=fe;var K=Z.sibling,me=Z.return;if(td(Z),Z===M){fe=null;break}if(K!==null){K.return=me,fe=K;break}fe=me}}}var he=i.alternate;if(he!==null){var ge=he.child;if(ge!==null){he.child=null;do{var Ve=ge.sibling;ge.sibling=null,ge=Ve}while(ge!==null)}}fe=i}}if((i.subtreeFlags&2064)!==0&&m!==null)m.return=i,fe=m;else e:for(;fe!==null;){if(i=fe,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:tr(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,fe=I;break e}fe=i.return}}var E=e.current;for(fe=E;fe!==null;){m=fe;var B=m.child;if((m.subtreeFlags&2064)!==0&&B!==null)B.return=m,fe=B;else e:for(m=E;fe!==null;){if(j=fe,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:rl(9,j)}}catch(ve){ze(j,j.return,ve)}if(j===m){fe=null;break e}var ae=j.sibling;if(ae!==null){ae.return=j.return,fe=ae;break e}fe=j.return}}if(Ee=l,gn(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(gr,e)}catch{}r=!0}return r}finally{Te=s,Pt.transition=t}}return!1}function gd(e,t,s){t=ds(s,t),t=Dc(e,t,1),e=vn(e,t,1),t=ct(),e!==null&&(As(e,1,t),xt(e,t))}function ze(e,t,s){if(e.tag===3)gd(e,e,s);else for(;t!==null;){if(t.tag===3){gd(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jn===null||!jn.has(r))){e=ds(s,e),e=Ic(t,e,1),t=vn(t,e,1),e=ct(),t!==null&&(As(t,1,e),xt(t,e));break}}t=t.return}}function hf(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),t=ct(),e.pingedLanes|=e.suspendedLanes&s,Je===e&&(Ze&s)===s&&(Qe===4||Qe===3&&(Ze&130023424)===Ze&&500>He()-ao?Bn(e,0):lo|=s),xt(e,t)}function yd(e,t){t===0&&((e.mode&1)===0?t=1:(t=vr,vr<<=1,(vr&130023424)===0&&(vr=4194304)));var s=ct();e=nn(e,t),e!==null&&(As(e,t,s),xt(e,s))}function xf(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),yd(e,s)}function gf(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(s=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(c(314))}r!==null&&r.delete(t),yd(e,s)}var vd;vd=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)pt=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return pt=!1,sf(e,t,s);pt=(e.flags&131072)!==0}else pt=!1,Oe&&(t.flags&1048576)!==0&&Xi(t,Ur,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;nl(e,t),e=t.pendingProps;var l=ns(t,tt.current);is(t,s),l=Oa(null,t,r,e,l,s);var i=Ba();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(r)?(i=!0,Br(t)):i=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Fa(t),l.updater=el,t.stateNode=l,l._reactInternals=t,Va(t,r,e,s),t=Qa(null,t,r,!0,i,s)):(t.tag=0,Oe&&i&&ba(t),it(null,t,l,s),t=t.child),t;case 16:r=t.elementType;e:{switch(nl(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=vf(r),e=It(r,e),l){case 0:t=Ya(null,t,r,e,s);break e;case 1:t=Wc(null,t,r,e,s);break e;case 11:t=zc(null,t,r,e,s);break e;case 14:t=Uc(null,t,r,It(r.type,e),s);break e}throw Error(c(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:It(r,l),Ya(e,t,r,l,s);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:It(r,l),Wc(e,t,r,l,s);case 3:e:{if(Gc(t),e===null)throw Error(c(387));r=t.pendingProps,i=t.memoizedState,l=i.element,oc(e,t),Yr(t,r,null,s);var m=t.memoizedState;if(r=m.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){l=ds(Error(c(423)),t),t=Yc(e,t,r,s,l);break e}else if(r!==l){l=ds(Error(c(424)),t),t=Yc(e,t,r,s,l);break e}else for(Nt=pn(t.stateNode.containerInfo.firstChild),wt=t,Oe=!0,Dt=null,s=lc(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ls(),r===l){t=rn(e,t,s);break e}it(e,t,r,s)}t=t.child}return t;case 5:return dc(t),e===null&&Na(t),r=t.type,l=t.pendingProps,i=e!==null?e.memoizedProps:null,m=l.children,pa(r,l)?m=null:i!==null&&pa(r,i)&&(t.flags|=32),Vc(e,t),it(e,t,m,s),t.child;case 6:return e===null&&Na(t),null;case 13:return Qc(e,t,s);case 4:return Pa(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=as(t,null,r,s):it(e,t,r,s),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:It(r,l),zc(e,t,r,l,s);case 7:return it(e,t,t.pendingProps,s),t.child;case 8:return it(e,t,t.pendingProps.children,s),t.child;case 12:return it(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,i=t.memoizedProps,m=l.value,Le(Vr,r._currentValue),r._currentValue=m,i!==null)if(Lt(i.value,m)){if(i.children===l.children&&!mt.current){t=rn(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var j=i.dependencies;if(j!==null){m=i.child;for(var _=j.firstContext;_!==null;){if(_.context===r){if(i.tag===1){_=sn(-1,s&-s),_.tag=2;var M=i.updateQueue;if(M!==null){M=M.shared;var Z=M.pending;Z===null?_.next=_:(_.next=Z.next,Z.next=_),M.pending=_}}i.lanes|=s,_=i.alternate,_!==null&&(_.lanes|=s),Aa(i.return,s,t),j.lanes|=s;break}_=_.next}}else if(i.tag===10)m=i.type===t.type?null:i.child;else if(i.tag===18){if(m=i.return,m===null)throw Error(c(341));m.lanes|=s,j=m.alternate,j!==null&&(j.lanes|=s),Aa(m,s,t),m=i.sibling}else m=i.child;if(m!==null)m.return=i;else for(m=i;m!==null;){if(m===t){m=null;break}if(i=m.sibling,i!==null){i.return=m.return,m=i;break}m=m.return}i=m}it(e,t,l.children,s),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,is(t,s),l=Et(l),r=r(l),t.flags|=1,it(e,t,r,s),t.child;case 14:return r=t.type,l=It(r,t.pendingProps),l=It(r.type,l),Uc(e,t,r,l,s);case 15:return $c(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:It(r,l),nl(e,t),t.tag=1,ft(r)?(e=!0,Br(t)):e=!1,is(t,s),Rc(t,r,l),Va(t,r,l,s),Qa(null,t,r,!0,e,s);case 19:return Jc(e,t,s);case 22:return Hc(e,t,s)}throw Error(c(156,t.tag))};function bd(e,t){return Zo(e,t)}function yf(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,s,r){return new yf(e,t,s,r)}function ho(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vf(e){if(typeof e=="function")return ho(e)?1:0;if(e!=null){if(e=e.$$typeof,e===U)return 11;if(e===pe)return 14}return 2}function Cn(e,t){var s=e.alternate;return s===null?(s=Tt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function fl(e,t,s,r,l,i){var m=2;if(r=e,typeof e=="function")ho(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case P:return zn(s.children,l,i,t);case C:m=8,l|=8;break;case X:return e=Tt(12,s,t,l|2),e.elementType=X,e.lanes=i,e;case re:return e=Tt(13,s,t,l),e.elementType=re,e.lanes=i,e;case Q:return e=Tt(19,s,t,l),e.elementType=Q,e.lanes=i,e;case be:return pl(s,l,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oe:m=10;break e;case ue:m=9;break e;case U:m=11;break e;case pe:m=14;break e;case $:m=16,r=null;break e}throw Error(c(130,e==null?e:typeof e,""))}return t=Tt(m,s,t,l),t.elementType=e,t.type=r,t.lanes=i,t}function zn(e,t,s,r){return e=Tt(7,e,r,t),e.lanes=s,e}function pl(e,t,s,r){return e=Tt(22,e,r,t),e.elementType=be,e.lanes=s,e.stateNode={isHidden:!1},e}function xo(e,t,s){return e=Tt(6,e,null,t),e.lanes=s,e}function go(e,t,s){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bf(e,t,s,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function yo(e,t,s,r,l,i,m,j,_){return e=new bf(e,t,s,j,_),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Tt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fa(i),e}function jf(e,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:r==null?null:""+r,children:e,containerInfo:t,implementation:s}}function jd(e){if(!e)return xn;e=e._reactInternals;e:{if(An(e)!==e||e.tag!==1)throw Error(c(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(c(171))}if(e.tag===1){var s=e.type;if(ft(s))return qi(e,s,t)}return t}function wd(e,t,s,r,l,i,m,j,_){return e=yo(s,r,!0,e,l,i,m,j,_),e.context=jd(null),s=e.current,r=ct(),l=Nn(s),i=sn(r,l),i.callback=t??null,vn(s,i,l),e.current.lanes=l,As(e,l,r),xt(e,r),e}function hl(e,t,s,r){var l=t.current,i=ct(),m=Nn(l);return s=jd(s),t.context===null?t.context=s:t.pendingContext=s,t=sn(i,m),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=vn(l,t,m),e!==null&&(Mt(e,l,m,i),Gr(e,l,m)),m}function xl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function vo(e,t){Nd(e,t),(e=e.alternate)&&Nd(e,t)}function wf(){return null}var Sd=typeof reportError=="function"?reportError:function(e){console.error(e)};function bo(e){this._internalRoot=e}gl.prototype.render=bo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));hl(e,t,null,null)},gl.prototype.unmount=bo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;On(function(){hl(null,e,null,null)}),t[Xt]=null}};function gl(e){this._internalRoot=e}gl.prototype.unstable_scheduleHydration=function(e){if(e){var t=oi();e={blockedOn:null,target:e,priority:t};for(var s=0;s<un.length&&t!==0&&t<un[s].priority;s++);un.splice(s,0,e),s===0&&di(e)}};function jo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cd(){}function Nf(e,t,s,r,l){if(l){if(typeof r=="function"){var i=r;r=function(){var M=xl(m);i.call(M)}}var m=wd(t,r,e,0,null,!1,!1,"",Cd);return e._reactRootContainer=m,e[Xt]=m.current,$s(e.nodeType===8?e.parentNode:e),On(),m}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var j=r;r=function(){var M=xl(_);j.call(M)}}var _=yo(e,0,!1,null,null,!1,!1,"",Cd);return e._reactRootContainer=_,e[Xt]=_.current,$s(e.nodeType===8?e.parentNode:e),On(function(){hl(t,_,s,r)}),_}function vl(e,t,s,r,l){var i=s._reactRootContainer;if(i){var m=i;if(typeof l=="function"){var j=l;l=function(){var _=xl(m);j.call(_)}}hl(t,m,e,l)}else m=Nf(s,t,e,l,r);return xl(m)}li=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=_s(t.pendingLanes);s!==0&&(Vl(t,s|1),xt(t,He()),(Ee&6)===0&&(fs=He()+500,gn()))}break;case 13:On(function(){var r=nn(e,1);if(r!==null){var l=ct();Mt(r,e,1,l)}}),vo(e,1)}},Wl=function(e){if(e.tag===13){var t=nn(e,134217728);if(t!==null){var s=ct();Mt(t,e,134217728,s)}vo(e,134217728)}},ai=function(e){if(e.tag===13){var t=Nn(e),s=nn(e,t);if(s!==null){var r=ct();Mt(s,e,t,r)}vo(e,t)}},oi=function(){return Te},ii=function(e,t){var s=Te;try{return Te=e,t()}finally{Te=s}},Ns=function(e,t,s){switch(t){case"input":if(Ct(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var l=Ir(r);if(!l)throw Error(c(90));at(r),Ct(r,l)}}}break;case"textarea":ce(e,s);break;case"select":t=s.value,t!=null&&an(e,!!s.multiple,t,!1)}},Go=mo,Yo=On;var Sf={usingClientEntryPoint:!1,Events:[Ws,es,Ir,Vo,Wo,mo]},lr={findFiberByHostInstance:En,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cf={bundleType:lr.bundleType,version:lr.version,rendererPackageName:lr.rendererPackageName,rendererConfig:lr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ko(e),e===null?null:e.stateNode},findFiberByHostInstance:lr.findFiberByHostInstance||wf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{gr=bl.inject(Cf),$t=bl}catch{}}return gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sf,gt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jo(t))throw Error(c(200));return jf(e,t,null,s)},gt.createRoot=function(e,t){if(!jo(e))throw Error(c(299));var s=!1,r="",l=Sd;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=yo(e,1,!1,null,null,s,!1,r,l),e[Xt]=t.current,$s(e.nodeType===8?e.parentNode:e),new bo(t)},gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=Ko(t),e=e===null?null:e.stateNode,e},gt.flushSync=function(e){return On(e)},gt.hydrate=function(e,t,s){if(!yl(t))throw Error(c(200));return vl(null,e,t,!0,s)},gt.hydrateRoot=function(e,t,s){if(!jo(e))throw Error(c(405));var r=s!=null&&s.hydratedSources||null,l=!1,i="",m=Sd;if(s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),t=wd(t,null,e,1,s??null,l,!1,i,m),e[Xt]=t.current,$s(e),r)for(e=0;e<r.length;e++)s=r[e],l=s._getVersion,l=l(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,l]:t.mutableSourceEagerHydrationData.push(s,l);return new gl(t)},gt.render=function(e,t,s){if(!yl(t))throw Error(c(200));return vl(null,e,t,!1,s)},gt.unmountComponentAtNode=function(e){if(!yl(e))throw Error(c(40));return e._reactRootContainer?(On(function(){vl(null,null,e,!1,function(){e._reactRootContainer=null,e[Xt]=null})}),!0):!1},gt.unstable_batchedUpdates=mo,gt.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!yl(s))throw Error(c(200));if(e==null||e._reactInternals===void 0)throw Error(c(38));return vl(e,t,s,!1,r)},gt.version="18.3.1-next-f1338f8080-20240426",gt}var Rd;function Rf(){if(Rd)return So.exports;Rd=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(o){console.error(o)}}return a(),So.exports=Tf(),So.exports}var Ld;function Lf(){if(Ld)return jl;Ld=1;var a=Rf();return jl.createRoot=a.createRoot,jl.hydrateRoot=a.hydrateRoot,jl}var Df=Lf();const If=su(Df);var x=Oo();const Bo=su(x);function ru(a,o){return function(){return a.apply(o,arguments)}}const{toString:Of}=Object.prototype,{getPrototypeOf:Mo}=Object,{iterator:Fl,toStringTag:lu}=Symbol,Pl=(a=>o=>{const c=Of.call(o);return a[c]||(a[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),zt=a=>(a=a.toLowerCase(),o=>Pl(o)===a),Tl=a=>o=>typeof o===a,{isArray:xs}=Array,hs=Tl("undefined");function dr(a){return a!==null&&!hs(a)&&a.constructor!==null&&!hs(a.constructor)&&yt(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const au=zt("ArrayBuffer");function Bf(a){let o;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?o=ArrayBuffer.isView(a):o=a&&a.buffer&&au(a.buffer),o}const Mf=Tl("string"),yt=Tl("function"),ou=Tl("number"),ur=a=>a!==null&&typeof a=="object",zf=a=>a===!0||a===!1,kl=a=>{if(Pl(a)!=="object")return!1;const o=Mo(a);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(lu in a)&&!(Fl in a)},Uf=a=>{if(!ur(a)||dr(a))return!1;try{return Object.keys(a).length===0&&Object.getPrototypeOf(a)===Object.prototype}catch{return!1}},$f=zt("Date"),Hf=zt("File"),Vf=zt("Blob"),Wf=zt("FileList"),Gf=a=>ur(a)&&yt(a.pipe),Yf=a=>{let o;return a&&(typeof FormData=="function"&&a instanceof FormData||yt(a.append)&&((o=Pl(a))==="formdata"||o==="object"&&yt(a.toString)&&a.toString()==="[object FormData]"))},Qf=zt("URLSearchParams"),[qf,Jf,Kf,Xf]=["ReadableStream","Request","Response","Headers"].map(zt),Zf=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mr(a,o,{allOwnKeys:c=!1}={}){if(a===null||typeof a>"u")return;let d,u;if(typeof a!="object"&&(a=[a]),xs(a))for(d=0,u=a.length;d<u;d++)o.call(null,a[d],d,a);else{if(dr(a))return;const p=c?Object.getOwnPropertyNames(a):Object.keys(a),f=p.length;let v;for(d=0;d<f;d++)v=p[d],o.call(null,a[v],v,a)}}function iu(a,o){if(dr(a))return null;o=o.toLowerCase();const c=Object.keys(a);let d=c.length,u;for(;d-- >0;)if(u=c[d],o===u.toLowerCase())return u;return null}const Un=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cu=a=>!hs(a)&&a!==Un;function To(){const{caseless:a,skipUndefined:o}=cu(this)&&this||{},c={},d=(u,p)=>{const f=a&&iu(c,p)||p;kl(c[f])&&kl(u)?c[f]=To(c[f],u):kl(u)?c[f]=To({},u):xs(u)?c[f]=u.slice():(!o||!hs(u))&&(c[f]=u)};for(let u=0,p=arguments.length;u<p;u++)arguments[u]&&mr(arguments[u],d);return c}const ep=(a,o,c,{allOwnKeys:d}={})=>(mr(o,(u,p)=>{c&&yt(u)?a[p]=ru(u,c):a[p]=u},{allOwnKeys:d}),a),tp=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),np=(a,o,c,d)=>{a.prototype=Object.create(o.prototype,d),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:o.prototype}),c&&Object.assign(a.prototype,c)},sp=(a,o,c,d)=>{let u,p,f;const v={};if(o=o||{},a==null)return o;do{for(u=Object.getOwnPropertyNames(a),p=u.length;p-- >0;)f=u[p],(!d||d(f,a,o))&&!v[f]&&(o[f]=a[f],v[f]=!0);a=c!==!1&&Mo(a)}while(a&&(!c||c(a,o))&&a!==Object.prototype);return o},rp=(a,o,c)=>{a=String(a),(c===void 0||c>a.length)&&(c=a.length),c-=o.length;const d=a.indexOf(o,c);return d!==-1&&d===c},lp=a=>{if(!a)return null;if(xs(a))return a;let o=a.length;if(!ou(o))return null;const c=new Array(o);for(;o-- >0;)c[o]=a[o];return c},ap=(a=>o=>a&&o instanceof a)(typeof Uint8Array<"u"&&Mo(Uint8Array)),op=(a,o)=>{const d=(a&&a[Fl]).call(a);let u;for(;(u=d.next())&&!u.done;){const p=u.value;o.call(a,p[0],p[1])}},ip=(a,o)=>{let c;const d=[];for(;(c=a.exec(o))!==null;)d.push(c);return d},cp=zt("HTMLFormElement"),dp=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(c,d,u){return d.toUpperCase()+u}),Dd=(({hasOwnProperty:a})=>(o,c)=>a.call(o,c))(Object.prototype),up=zt("RegExp"),du=(a,o)=>{const c=Object.getOwnPropertyDescriptors(a),d={};mr(c,(u,p)=>{let f;(f=o(u,p,a))!==!1&&(d[p]=f||u)}),Object.defineProperties(a,d)},mp=a=>{du(a,(o,c)=>{if(yt(a)&&["arguments","caller","callee"].indexOf(c)!==-1)return!1;const d=a[c];if(yt(d)){if(o.enumerable=!1,"writable"in o){o.writable=!1;return}o.set||(o.set=()=>{throw Error("Can not rewrite read-only method '"+c+"'")})}})},fp=(a,o)=>{const c={},d=u=>{u.forEach(p=>{c[p]=!0})};return xs(a)?d(a):d(String(a).split(o)),c},pp=()=>{},hp=(a,o)=>a!=null&&Number.isFinite(a=+a)?a:o;function xp(a){return!!(a&&yt(a.append)&&a[lu]==="FormData"&&a[Fl])}const gp=a=>{const o=new Array(10),c=(d,u)=>{if(ur(d)){if(o.indexOf(d)>=0)return;if(dr(d))return d;if(!("toJSON"in d)){o[u]=d;const p=xs(d)?[]:{};return mr(d,(f,v)=>{const A=c(f,u+1);!hs(A)&&(p[v]=A)}),o[u]=void 0,p}}return d};return c(a,0)},yp=zt("AsyncFunction"),vp=a=>a&&(ur(a)||yt(a))&&yt(a.then)&&yt(a.catch),uu=((a,o)=>a?setImmediate:o?((c,d)=>(Un.addEventListener("message",({source:u,data:p})=>{u===Un&&p===c&&d.length&&d.shift()()},!1),u=>{d.push(u),Un.postMessage(c,"*")}))(`axios@${Math.random()}`,[]):c=>setTimeout(c))(typeof setImmediate=="function",yt(Un.postMessage)),bp=typeof queueMicrotask<"u"?queueMicrotask.bind(Un):typeof process<"u"&&process.nextTick||uu,jp=a=>a!=null&&yt(a[Fl]),z={isArray:xs,isArrayBuffer:au,isBuffer:dr,isFormData:Yf,isArrayBufferView:Bf,isString:Mf,isNumber:ou,isBoolean:zf,isObject:ur,isPlainObject:kl,isEmptyObject:Uf,isReadableStream:qf,isRequest:Jf,isResponse:Kf,isHeaders:Xf,isUndefined:hs,isDate:$f,isFile:Hf,isBlob:Vf,isRegExp:up,isFunction:yt,isStream:Gf,isURLSearchParams:Qf,isTypedArray:ap,isFileList:Wf,forEach:mr,merge:To,extend:ep,trim:Zf,stripBOM:tp,inherits:np,toFlatObject:sp,kindOf:Pl,kindOfTest:zt,endsWith:rp,toArray:lp,forEachEntry:op,matchAll:ip,isHTMLForm:cp,hasOwnProperty:Dd,hasOwnProp:Dd,reduceDescriptors:du,freezeMethods:mp,toObjectSet:fp,toCamelCase:dp,noop:pp,toFiniteNumber:hp,findKey:iu,global:Un,isContextDefined:cu,isSpecCompliantForm:xp,toJSONObject:gp,isAsyncFn:yp,isThenable:vp,setImmediate:uu,asap:bp,isIterable:jp};function Ce(a,o,c,d,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",o&&(this.code=o),c&&(this.config=c),d&&(this.request=d),u&&(this.response=u,this.status=u.status?u.status:null)}z.inherits(Ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}});const mu=Ce.prototype,fu={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{fu[a]={value:a}});Object.defineProperties(Ce,fu);Object.defineProperty(mu,"isAxiosError",{value:!0});Ce.from=(a,o,c,d,u,p)=>{const f=Object.create(mu);z.toFlatObject(a,f,function(b){return b!==Error.prototype},S=>S!=="isAxiosError");const v=a&&a.message?a.message:"Error",A=o==null&&a?a.code:o;return Ce.call(f,v,A,c,d,u),a&&f.cause==null&&Object.defineProperty(f,"cause",{value:a,configurable:!0}),f.name=a&&a.name||"Error",p&&Object.assign(f,p),f};const wp=null;function Ro(a){return z.isPlainObject(a)||z.isArray(a)}function pu(a){return z.endsWith(a,"[]")?a.slice(0,-2):a}function Id(a,o,c){return a?a.concat(o).map(function(u,p){return u=pu(u),!c&&p?"["+u+"]":u}).join(c?".":""):o}function Np(a){return z.isArray(a)&&!a.some(Ro)}const Sp=z.toFlatObject(z,{},null,function(o){return/^is[A-Z]/.test(o)});function Rl(a,o,c){if(!z.isObject(a))throw new TypeError("target must be an object");o=o||new FormData,c=z.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(L,h){return!z.isUndefined(h[L])});const d=c.metaTokens,u=c.visitor||b,p=c.dots,f=c.indexes,A=(c.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(o);if(!z.isFunction(u))throw new TypeError("visitor must be a function");function S(g){if(g===null)return"";if(z.isDate(g))return g.toISOString();if(z.isBoolean(g))return g.toString();if(!A&&z.isBlob(g))throw new Ce("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(g)||z.isTypedArray(g)?A&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function b(g,L,h){let se=g;if(g&&!h&&typeof g=="object"){if(z.endsWith(L,"{}"))L=d?L:L.slice(0,-2),g=JSON.stringify(g);else if(z.isArray(g)&&Np(g)||(z.isFileList(g)||z.endsWith(L,"[]"))&&(se=z.toArray(g)))return L=pu(L),se.forEach(function(V,q){!(z.isUndefined(V)||V===null)&&o.append(f===!0?Id([L],q,p):f===null?L:L+"[]",S(V))}),!1}return Ro(g)?!0:(o.append(Id(h,L,p),S(g)),!1)}const F=[],R=Object.assign(Sp,{defaultVisitor:b,convertValue:S,isVisitable:Ro});function H(g,L){if(!z.isUndefined(g)){if(F.indexOf(g)!==-1)throw Error("Circular reference detected in "+L.join("."));F.push(g),z.forEach(g,function(se,ee){(!(z.isUndefined(se)||se===null)&&u.call(o,se,z.isString(ee)?ee.trim():ee,L,R))===!0&&H(se,L?L.concat(ee):[ee])}),F.pop()}}if(!z.isObject(a))throw new TypeError("data must be an object");return H(a),o}function Od(a){const o={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(d){return o[d]})}function zo(a,o){this._pairs=[],a&&Rl(a,this,o)}const hu=zo.prototype;hu.append=function(o,c){this._pairs.push([o,c])};hu.toString=function(o){const c=o?function(d){return o.call(this,d,Od)}:Od;return this._pairs.map(function(u){return c(u[0])+"="+c(u[1])},"").join("&")};function Cp(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function xu(a,o,c){if(!o)return a;const d=c&&c.encode||Cp;z.isFunction(c)&&(c={serialize:c});const u=c&&c.serialize;let p;if(u?p=u(o,c):p=z.isURLSearchParams(o)?o.toString():new zo(o,c).toString(d),p){const f=a.indexOf("#");f!==-1&&(a=a.slice(0,f)),a+=(a.indexOf("?")===-1?"?":"&")+p}return a}class Bd{constructor(){this.handlers=[]}use(o,c,d){return this.handlers.push({fulfilled:o,rejected:c,synchronous:d?d.synchronous:!1,runWhen:d?d.runWhen:null}),this.handlers.length-1}eject(o){this.handlers[o]&&(this.handlers[o]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(o){z.forEach(this.handlers,function(d){d!==null&&o(d)})}}const gu={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kp=typeof URLSearchParams<"u"?URLSearchParams:zo,_p=typeof FormData<"u"?FormData:null,Ap=typeof Blob<"u"?Blob:null,Ep={isBrowser:!0,classes:{URLSearchParams:kp,FormData:_p,Blob:Ap},protocols:["http","https","file","blob","url","data"]},Uo=typeof window<"u"&&typeof document<"u",Lo=typeof navigator=="object"&&navigator||void 0,Fp=Uo&&(!Lo||["ReactNative","NativeScript","NS"].indexOf(Lo.product)<0),Pp=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Tp=Uo&&window.location.href||"http://localhost",Rp=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Uo,hasStandardBrowserEnv:Fp,hasStandardBrowserWebWorkerEnv:Pp,navigator:Lo,origin:Tp},Symbol.toStringTag,{value:"Module"})),lt={...Rp,...Ep};function Lp(a,o){return Rl(a,new lt.classes.URLSearchParams,{visitor:function(c,d,u,p){return lt.isNode&&z.isBuffer(c)?(this.append(d,c.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)},...o})}function Dp(a){return z.matchAll(/\w+|\[(\w*)]/g,a).map(o=>o[0]==="[]"?"":o[1]||o[0])}function Ip(a){const o={},c=Object.keys(a);let d;const u=c.length;let p;for(d=0;d<u;d++)p=c[d],o[p]=a[p];return o}function yu(a){function o(c,d,u,p){let f=c[p++];if(f==="__proto__")return!0;const v=Number.isFinite(+f),A=p>=c.length;return f=!f&&z.isArray(u)?u.length:f,A?(z.hasOwnProp(u,f)?u[f]=[u[f],d]:u[f]=d,!v):((!u[f]||!z.isObject(u[f]))&&(u[f]=[]),o(c,d,u[f],p)&&z.isArray(u[f])&&(u[f]=Ip(u[f])),!v)}if(z.isFormData(a)&&z.isFunction(a.entries)){const c={};return z.forEachEntry(a,(d,u)=>{o(Dp(d),u,c,0)}),c}return null}function Op(a,o,c){if(z.isString(a))try{return(o||JSON.parse)(a),z.trim(a)}catch(d){if(d.name!=="SyntaxError")throw d}return(c||JSON.stringify)(a)}const fr={transitional:gu,adapter:["xhr","http","fetch"],transformRequest:[function(o,c){const d=c.getContentType()||"",u=d.indexOf("application/json")>-1,p=z.isObject(o);if(p&&z.isHTMLForm(o)&&(o=new FormData(o)),z.isFormData(o))return u?JSON.stringify(yu(o)):o;if(z.isArrayBuffer(o)||z.isBuffer(o)||z.isStream(o)||z.isFile(o)||z.isBlob(o)||z.isReadableStream(o))return o;if(z.isArrayBufferView(o))return o.buffer;if(z.isURLSearchParams(o))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let v;if(p){if(d.indexOf("application/x-www-form-urlencoded")>-1)return Lp(o,this.formSerializer).toString();if((v=z.isFileList(o))||d.indexOf("multipart/form-data")>-1){const A=this.env&&this.env.FormData;return Rl(v?{"files[]":o}:o,A&&new A,this.formSerializer)}}return p||u?(c.setContentType("application/json",!1),Op(o)):o}],transformResponse:[function(o){const c=this.transitional||fr.transitional,d=c&&c.forcedJSONParsing,u=this.responseType==="json";if(z.isResponse(o)||z.isReadableStream(o))return o;if(o&&z.isString(o)&&(d&&!this.responseType||u)){const f=!(c&&c.silentJSONParsing)&&u;try{return JSON.parse(o,this.parseReviver)}catch(v){if(f)throw v.name==="SyntaxError"?Ce.from(v,Ce.ERR_BAD_RESPONSE,this,null,this.response):v}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:lt.classes.FormData,Blob:lt.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],a=>{fr.headers[a]={}});const Bp=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Mp=a=>{const o={};let c,d,u;return a&&a.split(`
`).forEach(function(f){u=f.indexOf(":"),c=f.substring(0,u).trim().toLowerCase(),d=f.substring(u+1).trim(),!(!c||o[c]&&Bp[c])&&(c==="set-cookie"?o[c]?o[c].push(d):o[c]=[d]:o[c]=o[c]?o[c]+", "+d:d)}),o},Md=Symbol("internals");function or(a){return a&&String(a).trim().toLowerCase()}function _l(a){return a===!1||a==null?a:z.isArray(a)?a.map(_l):String(a)}function zp(a){const o=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let d;for(;d=c.exec(a);)o[d[1]]=d[2];return o}const Up=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function _o(a,o,c,d,u){if(z.isFunction(d))return d.call(this,o,c);if(u&&(o=c),!!z.isString(o)){if(z.isString(d))return o.indexOf(d)!==-1;if(z.isRegExp(d))return d.test(o)}}function $p(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(o,c,d)=>c.toUpperCase()+d)}function Hp(a,o){const c=z.toCamelCase(" "+o);["get","set","has"].forEach(d=>{Object.defineProperty(a,d+c,{value:function(u,p,f){return this[d].call(this,o,u,p,f)},configurable:!0})})}let vt=class{constructor(o){o&&this.set(o)}set(o,c,d){const u=this;function p(v,A,S){const b=or(A);if(!b)throw new Error("header name must be a non-empty string");const F=z.findKey(u,b);(!F||u[F]===void 0||S===!0||S===void 0&&u[F]!==!1)&&(u[F||A]=_l(v))}const f=(v,A)=>z.forEach(v,(S,b)=>p(S,b,A));if(z.isPlainObject(o)||o instanceof this.constructor)f(o,c);else if(z.isString(o)&&(o=o.trim())&&!Up(o))f(Mp(o),c);else if(z.isObject(o)&&z.isIterable(o)){let v={},A,S;for(const b of o){if(!z.isArray(b))throw TypeError("Object iterator must return a key-value pair");v[S=b[0]]=(A=v[S])?z.isArray(A)?[...A,b[1]]:[A,b[1]]:b[1]}f(v,c)}else o!=null&&p(c,o,d);return this}get(o,c){if(o=or(o),o){const d=z.findKey(this,o);if(d){const u=this[d];if(!c)return u;if(c===!0)return zp(u);if(z.isFunction(c))return c.call(this,u,d);if(z.isRegExp(c))return c.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,c){if(o=or(o),o){const d=z.findKey(this,o);return!!(d&&this[d]!==void 0&&(!c||_o(this,this[d],d,c)))}return!1}delete(o,c){const d=this;let u=!1;function p(f){if(f=or(f),f){const v=z.findKey(d,f);v&&(!c||_o(d,d[v],v,c))&&(delete d[v],u=!0)}}return z.isArray(o)?o.forEach(p):p(o),u}clear(o){const c=Object.keys(this);let d=c.length,u=!1;for(;d--;){const p=c[d];(!o||_o(this,this[p],p,o,!0))&&(delete this[p],u=!0)}return u}normalize(o){const c=this,d={};return z.forEach(this,(u,p)=>{const f=z.findKey(d,p);if(f){c[f]=_l(u),delete c[p];return}const v=o?$p(p):String(p).trim();v!==p&&delete c[p],c[v]=_l(u),d[v]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const c=Object.create(null);return z.forEach(this,(d,u)=>{d!=null&&d!==!1&&(c[u]=o&&z.isArray(d)?d.join(", "):d)}),c}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,c])=>o+": "+c).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...c){const d=new this(o);return c.forEach(u=>d.set(u)),d}static accessor(o){const d=(this[Md]=this[Md]={accessors:{}}).accessors,u=this.prototype;function p(f){const v=or(f);d[v]||(Hp(u,f),d[v]=!0)}return z.isArray(o)?o.forEach(p):p(o),this}};vt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(vt.prototype,({value:a},o)=>{let c=o[0].toUpperCase()+o.slice(1);return{get:()=>a,set(d){this[c]=d}}});z.freezeMethods(vt);function Ao(a,o){const c=this||fr,d=o||c,u=vt.from(d.headers);let p=d.data;return z.forEach(a,function(v){p=v.call(c,p,u.normalize(),o?o.status:void 0)}),u.normalize(),p}function vu(a){return!!(a&&a.__CANCEL__)}function gs(a,o,c){Ce.call(this,a??"canceled",Ce.ERR_CANCELED,o,c),this.name="CanceledError"}z.inherits(gs,Ce,{__CANCEL__:!0});function bu(a,o,c){const d=c.config.validateStatus;!c.status||!d||d(c.status)?a(c):o(new Ce("Request failed with status code "+c.status,[Ce.ERR_BAD_REQUEST,Ce.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}function Vp(a){const o=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return o&&o[1]||""}function Wp(a,o){a=a||10;const c=new Array(a),d=new Array(a);let u=0,p=0,f;return o=o!==void 0?o:1e3,function(A){const S=Date.now(),b=d[p];f||(f=S),c[u]=A,d[u]=S;let F=p,R=0;for(;F!==u;)R+=c[F++],F=F%a;if(u=(u+1)%a,u===p&&(p=(p+1)%a),S-f<o)return;const H=b&&S-b;return H?Math.round(R*1e3/H):void 0}}function Gp(a,o){let c=0,d=1e3/o,u,p;const f=(S,b=Date.now())=>{c=b,u=null,p&&(clearTimeout(p),p=null),a(...S)};return[(...S)=>{const b=Date.now(),F=b-c;F>=d?f(S,b):(u=S,p||(p=setTimeout(()=>{p=null,f(u)},d-F)))},()=>u&&f(u)]}const El=(a,o,c=3)=>{let d=0;const u=Wp(50,250);return Gp(p=>{const f=p.loaded,v=p.lengthComputable?p.total:void 0,A=f-d,S=u(A),b=f<=v;d=f;const F={loaded:f,total:v,progress:v?f/v:void 0,bytes:A,rate:S||void 0,estimated:S&&v&&b?(v-f)/S:void 0,event:p,lengthComputable:v!=null,[o?"download":"upload"]:!0};a(F)},c)},zd=(a,o)=>{const c=a!=null;return[d=>o[0]({lengthComputable:c,total:a,loaded:d}),o[1]]},Ud=a=>(...o)=>z.asap(()=>a(...o)),Yp=lt.hasStandardBrowserEnv?((a,o)=>c=>(c=new URL(c,lt.origin),a.protocol===c.protocol&&a.host===c.host&&(o||a.port===c.port)))(new URL(lt.origin),lt.navigator&&/(msie|trident)/i.test(lt.navigator.userAgent)):()=>!0,Qp=lt.hasStandardBrowserEnv?{write(a,o,c,d,u,p,f){if(typeof document>"u")return;const v=[`${a}=${encodeURIComponent(o)}`];z.isNumber(c)&&v.push(`expires=${new Date(c).toUTCString()}`),z.isString(d)&&v.push(`path=${d}`),z.isString(u)&&v.push(`domain=${u}`),p===!0&&v.push("secure"),z.isString(f)&&v.push(`SameSite=${f}`),document.cookie=v.join("; ")},read(a){if(typeof document>"u")return null;const o=document.cookie.match(new RegExp("(?:^|; )"+a+"=([^;]*)"));return o?decodeURIComponent(o[1]):null},remove(a){this.write(a,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function qp(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function Jp(a,o){return o?a.replace(/\/?\/$/,"")+"/"+o.replace(/^\/+/,""):a}function ju(a,o,c){let d=!qp(o);return a&&(d||c==!1)?Jp(a,o):o}const $d=a=>a instanceof vt?{...a}:a;function Vn(a,o){o=o||{};const c={};function d(S,b,F,R){return z.isPlainObject(S)&&z.isPlainObject(b)?z.merge.call({caseless:R},S,b):z.isPlainObject(b)?z.merge({},b):z.isArray(b)?b.slice():b}function u(S,b,F,R){if(z.isUndefined(b)){if(!z.isUndefined(S))return d(void 0,S,F,R)}else return d(S,b,F,R)}function p(S,b){if(!z.isUndefined(b))return d(void 0,b)}function f(S,b){if(z.isUndefined(b)){if(!z.isUndefined(S))return d(void 0,S)}else return d(void 0,b)}function v(S,b,F){if(F in o)return d(S,b);if(F in a)return d(void 0,S)}const A={url:p,method:p,data:p,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:v,headers:(S,b,F)=>u($d(S),$d(b),F,!0)};return z.forEach(Object.keys({...a,...o}),function(b){const F=A[b]||u,R=F(a[b],o[b],b);z.isUndefined(R)&&F!==v||(c[b]=R)}),c}const wu=a=>{const o=Vn({},a);let{data:c,withXSRFToken:d,xsrfHeaderName:u,xsrfCookieName:p,headers:f,auth:v}=o;if(o.headers=f=vt.from(f),o.url=xu(ju(o.baseURL,o.url,o.allowAbsoluteUrls),a.params,a.paramsSerializer),v&&f.set("Authorization","Basic "+btoa((v.username||"")+":"+(v.password?unescape(encodeURIComponent(v.password)):""))),z.isFormData(c)){if(lt.hasStandardBrowserEnv||lt.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(z.isFunction(c.getHeaders)){const A=c.getHeaders(),S=["content-type","content-length"];Object.entries(A).forEach(([b,F])=>{S.includes(b.toLowerCase())&&f.set(b,F)})}}if(lt.hasStandardBrowserEnv&&(d&&z.isFunction(d)&&(d=d(o)),d||d!==!1&&Yp(o.url))){const A=u&&p&&Qp.read(p);A&&f.set(u,A)}return o},Kp=typeof XMLHttpRequest<"u",Xp=Kp&&function(a){return new Promise(function(c,d){const u=wu(a);let p=u.data;const f=vt.from(u.headers).normalize();let{responseType:v,onUploadProgress:A,onDownloadProgress:S}=u,b,F,R,H,g;function L(){H&&H(),g&&g(),u.cancelToken&&u.cancelToken.unsubscribe(b),u.signal&&u.signal.removeEventListener("abort",b)}let h=new XMLHttpRequest;h.open(u.method.toUpperCase(),u.url,!0),h.timeout=u.timeout;function se(){if(!h)return;const V=vt.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),ie={data:!v||v==="text"||v==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:V,config:a,request:h};bu(function(P){c(P),L()},function(P){d(P),L()},ie),h=null}"onloadend"in h?h.onloadend=se:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(se)},h.onabort=function(){h&&(d(new Ce("Request aborted",Ce.ECONNABORTED,a,h)),h=null)},h.onerror=function(q){const ie=q&&q.message?q.message:"Network Error",de=new Ce(ie,Ce.ERR_NETWORK,a,h);de.event=q||null,d(de),h=null},h.ontimeout=function(){let q=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const ie=u.transitional||gu;u.timeoutErrorMessage&&(q=u.timeoutErrorMessage),d(new Ce(q,ie.clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,a,h)),h=null},p===void 0&&f.setContentType(null),"setRequestHeader"in h&&z.forEach(f.toJSON(),function(q,ie){h.setRequestHeader(ie,q)}),z.isUndefined(u.withCredentials)||(h.withCredentials=!!u.withCredentials),v&&v!=="json"&&(h.responseType=u.responseType),S&&([R,g]=El(S,!0),h.addEventListener("progress",R)),A&&h.upload&&([F,H]=El(A),h.upload.addEventListener("progress",F),h.upload.addEventListener("loadend",H)),(u.cancelToken||u.signal)&&(b=V=>{h&&(d(!V||V.type?new gs(null,a,h):V),h.abort(),h=null)},u.cancelToken&&u.cancelToken.subscribe(b),u.signal&&(u.signal.aborted?b():u.signal.addEventListener("abort",b)));const ee=Vp(u.url);if(ee&&lt.protocols.indexOf(ee)===-1){d(new Ce("Unsupported protocol "+ee+":",Ce.ERR_BAD_REQUEST,a));return}h.send(p||null)})},Zp=(a,o)=>{const{length:c}=a=a?a.filter(Boolean):[];if(o||c){let d=new AbortController,u;const p=function(S){if(!u){u=!0,v();const b=S instanceof Error?S:this.reason;d.abort(b instanceof Ce?b:new gs(b instanceof Error?b.message:b))}};let f=o&&setTimeout(()=>{f=null,p(new Ce(`timeout ${o} of ms exceeded`,Ce.ETIMEDOUT))},o);const v=()=>{a&&(f&&clearTimeout(f),f=null,a.forEach(S=>{S.unsubscribe?S.unsubscribe(p):S.removeEventListener("abort",p)}),a=null)};a.forEach(S=>S.addEventListener("abort",p));const{signal:A}=d;return A.unsubscribe=()=>z.asap(v),A}},eh=function*(a,o){let c=a.byteLength;if(c<o){yield a;return}let d=0,u;for(;d<c;)u=d+o,yield a.slice(d,u),d=u},th=async function*(a,o){for await(const c of nh(a))yield*eh(c,o)},nh=async function*(a){if(a[Symbol.asyncIterator]){yield*a;return}const o=a.getReader();try{for(;;){const{done:c,value:d}=await o.read();if(c)break;yield d}}finally{await o.cancel()}},Hd=(a,o,c,d)=>{const u=th(a,o);let p=0,f,v=A=>{f||(f=!0,d&&d(A))};return new ReadableStream({async pull(A){try{const{done:S,value:b}=await u.next();if(S){v(),A.close();return}let F=b.byteLength;if(c){let R=p+=F;c(R)}A.enqueue(new Uint8Array(b))}catch(S){throw v(S),S}},cancel(A){return v(A),u.return()}},{highWaterMark:2})},Vd=64*1024,{isFunction:wl}=z,sh=(({Request:a,Response:o})=>({Request:a,Response:o}))(z.global),{ReadableStream:Wd,TextEncoder:Gd}=z.global,Yd=(a,...o)=>{try{return!!a(...o)}catch{return!1}},rh=a=>{a=z.merge.call({skipUndefined:!0},sh,a);const{fetch:o,Request:c,Response:d}=a,u=o?wl(o):typeof fetch=="function",p=wl(c),f=wl(d);if(!u)return!1;const v=u&&wl(Wd),A=u&&(typeof Gd=="function"?(g=>L=>g.encode(L))(new Gd):async g=>new Uint8Array(await new c(g).arrayBuffer())),S=p&&v&&Yd(()=>{let g=!1;const L=new c(lt.origin,{body:new Wd,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!L}),b=f&&v&&Yd(()=>z.isReadableStream(new d("").body)),F={stream:b&&(g=>g.body)};u&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!F[g]&&(F[g]=(L,h)=>{let se=L&&L[g];if(se)return se.call(L);throw new Ce(`Response type '${g}' is not supported`,Ce.ERR_NOT_SUPPORT,h)})});const R=async g=>{if(g==null)return 0;if(z.isBlob(g))return g.size;if(z.isSpecCompliantForm(g))return(await new c(lt.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(z.isArrayBufferView(g)||z.isArrayBuffer(g))return g.byteLength;if(z.isURLSearchParams(g)&&(g=g+""),z.isString(g))return(await A(g)).byteLength},H=async(g,L)=>{const h=z.toFiniteNumber(g.getContentLength());return h??R(L)};return async g=>{let{url:L,method:h,data:se,signal:ee,cancelToken:V,timeout:q,onDownloadProgress:ie,onUploadProgress:de,responseType:P,headers:C,withCredentials:X="same-origin",fetchOptions:oe}=wu(g),ue=o||fetch;P=P?(P+"").toLowerCase():"text";let U=Zp([ee,V&&V.toAbortSignal()],q),re=null;const Q=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let pe;try{if(de&&S&&h!=="get"&&h!=="head"&&(pe=await H(C,se))!==0){let w=new c(L,{method:"POST",body:se,duplex:"half"}),N;if(z.isFormData(se)&&(N=w.headers.get("content-type"))&&C.setContentType(N),w.body){const[y,T]=zd(pe,El(Ud(de)));se=Hd(w.body,Vd,y,T)}}z.isString(X)||(X=X?"include":"omit");const $=p&&"credentials"in c.prototype,be={...oe,signal:U,method:h.toUpperCase(),headers:C.normalize().toJSON(),body:se,duplex:"half",credentials:$?X:void 0};re=p&&new c(L,be);let O=await(p?ue(re,oe):ue(L,be));const ne=b&&(P==="stream"||P==="response");if(b&&(ie||ne&&Q)){const w={};["status","statusText","headers"].forEach(k=>{w[k]=O[k]});const N=z.toFiniteNumber(O.headers.get("content-length")),[y,T]=ie&&zd(N,El(Ud(ie),!0))||[];O=new d(Hd(O.body,Vd,y,()=>{T&&T(),Q&&Q()}),w)}P=P||"text";let D=await F[z.findKey(F,P)||"text"](O,g);return!ne&&Q&&Q(),await new Promise((w,N)=>{bu(w,N,{data:D,headers:vt.from(O.headers),status:O.status,statusText:O.statusText,config:g,request:re})})}catch($){throw Q&&Q(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new Ce("Network Error",Ce.ERR_NETWORK,g,re),{cause:$.cause||$}):Ce.from($,$&&$.code,g,re)}}},lh=new Map,Nu=a=>{let o=a&&a.env||{};const{fetch:c,Request:d,Response:u}=o,p=[d,u,c];let f=p.length,v=f,A,S,b=lh;for(;v--;)A=p[v],S=b.get(A),S===void 0&&b.set(A,S=v?new Map:rh(o)),b=S;return S};Nu();const $o={http:wp,xhr:Xp,fetch:{get:Nu}};z.forEach($o,(a,o)=>{if(a){try{Object.defineProperty(a,"name",{value:o})}catch{}Object.defineProperty(a,"adapterName",{value:o})}});const Qd=a=>`- ${a}`,ah=a=>z.isFunction(a)||a===null||a===!1;function oh(a,o){a=z.isArray(a)?a:[a];const{length:c}=a;let d,u;const p={};for(let f=0;f<c;f++){d=a[f];let v;if(u=d,!ah(d)&&(u=$o[(v=String(d)).toLowerCase()],u===void 0))throw new Ce(`Unknown adapter '${v}'`);if(u&&(z.isFunction(u)||(u=u.get(o))))break;p[v||"#"+f]=u}if(!u){const f=Object.entries(p).map(([A,S])=>`adapter ${A} `+(S===!1?"is not supported by the environment":"is not available in the build"));let v=c?f.length>1?`since :
`+f.map(Qd).join(`
`):" "+Qd(f[0]):"as no adapter specified";throw new Ce("There is no suitable adapter to dispatch the request "+v,"ERR_NOT_SUPPORT")}return u}const Su={getAdapter:oh,adapters:$o};function Eo(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new gs(null,a)}function qd(a){return Eo(a),a.headers=vt.from(a.headers),a.data=Ao.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),Su.getAdapter(a.adapter||fr.adapter,a)(a).then(function(d){return Eo(a),d.data=Ao.call(a,a.transformResponse,d),d.headers=vt.from(d.headers),d},function(d){return vu(d)||(Eo(a),d&&d.response&&(d.response.data=Ao.call(a,a.transformResponse,d.response),d.response.headers=vt.from(d.response.headers))),Promise.reject(d)})}const Cu="1.13.2",Ll={};["object","boolean","number","function","string","symbol"].forEach((a,o)=>{Ll[a]=function(d){return typeof d===a||"a"+(o<1?"n ":" ")+a}});const Jd={};Ll.transitional=function(o,c,d){function u(p,f){return"[Axios v"+Cu+"] Transitional option '"+p+"'"+f+(d?". "+d:"")}return(p,f,v)=>{if(o===!1)throw new Ce(u(f," has been removed"+(c?" in "+c:"")),Ce.ERR_DEPRECATED);return c&&!Jd[f]&&(Jd[f]=!0,console.warn(u(f," has been deprecated since v"+c+" and will be removed in the near future"))),o?o(p,f,v):!0}};Ll.spelling=function(o){return(c,d)=>(console.warn(`${d} is likely a misspelling of ${o}`),!0)};function ih(a,o,c){if(typeof a!="object")throw new Ce("options must be an object",Ce.ERR_BAD_OPTION_VALUE);const d=Object.keys(a);let u=d.length;for(;u-- >0;){const p=d[u],f=o[p];if(f){const v=a[p],A=v===void 0||f(v,p,a);if(A!==!0)throw new Ce("option "+p+" must be "+A,Ce.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new Ce("Unknown option "+p,Ce.ERR_BAD_OPTION)}}const Al={assertOptions:ih,validators:Ll},Yt=Al.validators;let Hn=class{constructor(o){this.defaults=o||{},this.interceptors={request:new Bd,response:new Bd}}async request(o,c){try{return await this._request(o,c)}catch(d){if(d instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const p=u.stack?u.stack.replace(/^.+\n/,""):"";try{d.stack?p&&!String(d.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(d.stack+=`
`+p):d.stack=p}catch{}}throw d}}_request(o,c){typeof o=="string"?(c=c||{},c.url=o):c=o||{},c=Vn(this.defaults,c);const{transitional:d,paramsSerializer:u,headers:p}=c;d!==void 0&&Al.assertOptions(d,{silentJSONParsing:Yt.transitional(Yt.boolean),forcedJSONParsing:Yt.transitional(Yt.boolean),clarifyTimeoutError:Yt.transitional(Yt.boolean)},!1),u!=null&&(z.isFunction(u)?c.paramsSerializer={serialize:u}:Al.assertOptions(u,{encode:Yt.function,serialize:Yt.function},!0)),c.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?c.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:c.allowAbsoluteUrls=!0),Al.assertOptions(c,{baseUrl:Yt.spelling("baseURL"),withXsrfToken:Yt.spelling("withXSRFToken")},!0),c.method=(c.method||this.defaults.method||"get").toLowerCase();let f=p&&z.merge(p.common,p[c.method]);p&&z.forEach(["delete","get","head","post","put","patch","common"],g=>{delete p[g]}),c.headers=vt.concat(f,p);const v=[];let A=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(c)===!1||(A=A&&L.synchronous,v.unshift(L.fulfilled,L.rejected))});const S=[];this.interceptors.response.forEach(function(L){S.push(L.fulfilled,L.rejected)});let b,F=0,R;if(!A){const g=[qd.bind(this),void 0];for(g.unshift(...v),g.push(...S),R=g.length,b=Promise.resolve(c);F<R;)b=b.then(g[F++],g[F++]);return b}R=v.length;let H=c;for(;F<R;){const g=v[F++],L=v[F++];try{H=g(H)}catch(h){L.call(this,h);break}}try{b=qd.call(this,H)}catch(g){return Promise.reject(g)}for(F=0,R=S.length;F<R;)b=b.then(S[F++],S[F++]);return b}getUri(o){o=Vn(this.defaults,o);const c=ju(o.baseURL,o.url,o.allowAbsoluteUrls);return xu(c,o.params,o.paramsSerializer)}};z.forEach(["delete","get","head","options"],function(o){Hn.prototype[o]=function(c,d){return this.request(Vn(d||{},{method:o,url:c,data:(d||{}).data}))}});z.forEach(["post","put","patch"],function(o){function c(d){return function(p,f,v){return this.request(Vn(v||{},{method:o,headers:d?{"Content-Type":"multipart/form-data"}:{},url:p,data:f}))}}Hn.prototype[o]=c(),Hn.prototype[o+"Form"]=c(!0)});let ch=class ku{constructor(o){if(typeof o!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(p){c=p});const d=this;this.promise.then(u=>{if(!d._listeners)return;let p=d._listeners.length;for(;p-- >0;)d._listeners[p](u);d._listeners=null}),this.promise.then=u=>{let p;const f=new Promise(v=>{d.subscribe(v),p=v}).then(u);return f.cancel=function(){d.unsubscribe(p)},f},o(function(p,f,v){d.reason||(d.reason=new gs(p,f,v),c(d.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]}unsubscribe(o){if(!this._listeners)return;const c=this._listeners.indexOf(o);c!==-1&&this._listeners.splice(c,1)}toAbortSignal(){const o=new AbortController,c=d=>{o.abort(d)};return this.subscribe(c),o.signal.unsubscribe=()=>this.unsubscribe(c),o.signal}static source(){let o;return{token:new ku(function(u){o=u}),cancel:o}}};function dh(a){return function(c){return a.apply(null,c)}}function uh(a){return z.isObject(a)&&a.isAxiosError===!0}const Do={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Do).forEach(([a,o])=>{Do[o]=a});function _u(a){const o=new Hn(a),c=ru(Hn.prototype.request,o);return z.extend(c,Hn.prototype,o,{allOwnKeys:!0}),z.extend(c,o,null,{allOwnKeys:!0}),c.create=function(u){return _u(Vn(a,u))},c}const Ue=_u(fr);Ue.Axios=Hn;Ue.CanceledError=gs;Ue.CancelToken=ch;Ue.isCancel=vu;Ue.VERSION=Cu;Ue.toFormData=Rl;Ue.AxiosError=Ce;Ue.Cancel=Ue.CanceledError;Ue.all=function(o){return Promise.all(o)};Ue.spread=dh;Ue.isAxiosError=uh;Ue.mergeConfig=Vn;Ue.AxiosHeaders=vt;Ue.formToJSON=a=>yu(z.isHTMLForm(a)?new FormData(a):a);Ue.getAdapter=Su.getAdapter;Ue.HttpStatusCode=Do;Ue.default=Ue;const{Axios:wx,AxiosError:Nx,CanceledError:Sx,isCancel:Cx,CancelToken:kx,VERSION:_x,all:Ax,Cancel:Ex,isAxiosError:Fx,spread:Px,toFormData:Tx,AxiosHeaders:Rx,HttpStatusCode:Lx,formToJSON:Dx,getAdapter:Ix,mergeConfig:Ox}=Ue,Au="/api",mh=({onLoginSuccess:a})=>{const[o,c]=x.useState(""),[d,u]=x.useState(""),[p,f]=x.useState(""),[v,A]=x.useState(!1),S=async b=>{var F,R;b.preventDefault(),f(""),A(!0);try{localStorage.removeItem("branch"),localStorage.removeItem("location"),localStorage.removeItem("academicYear"),localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("currentBranch"),localStorage.removeItem("currentLocation");const H=await Ue.post(`${Au}/users/login`,{username:o,password:d});console.log("Login successful:",H.data),console.log("Login successful:",H.data);try{H.data.token?(localStorage.setItem("token",H.data.token),console.log("Token saved to localStorage")):console.warn("No token found in login response"),H.data.user&&(localStorage.setItem("user",JSON.stringify(H.data.user)),console.log("User saved to localStorage"))}catch(g){console.warn("Could not persist to localStorage",g)}a(H.data.user),A(!1)}catch(H){console.error(H);const g=((R=(F=H==null?void 0:H.response)==null?void 0:F.data)==null?void 0:R.error)||(H==null?void 0:H.message)||"Invalid username or password";f(g),A(!1)}};return n.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 p-4",children:n.jsx("div",{className:"w-full max-w-sm mx-auto bg-white rounded-lg shadow-md",children:n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"text-center space-y-4 mb-8",children:[n.jsx("img",{src:"https://www.mshifzacademy.com/assets/images/ms-logo.jpg",alt:"MS Education Academy Logo",className:"mx-auto h-12 object-contain"}),n.jsx("p",{className:"text-gray-500",children:"Admin Login"})]}),n.jsxs("form",{className:"space-y-6",onSubmit:S,children:[n.jsxs("div",{className:"border border-gray-300 rounded-md",children:[n.jsxs("div",{className:"px-3 py-2 border-b border-gray-300",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Username"}),n.jsx("input",{type:"text",required:!0,value:o,onChange:b=>c(b.target.value),className:"block w-full p-0 border-0 bg-transparent focus:ring-0 sm:text-sm"})]}),n.jsxs("div",{className:"px-3 py-2",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Password"}),n.jsx("input",{type:"password",required:!0,value:d,onChange:b=>u(b.target.value),className:"block w-full p-0 border-0 bg-transparent focus:ring-0 sm:text-sm"})]})]}),p&&n.jsx("p",{className:"text-center text-sm text-red-600 pt-2",children:p}),n.jsx("button",{type:"submit",disabled:v,className:"w-full py-3 px-4 text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-60",children:v?"Logging in...":"Login"})]})]})})})},fh=({className:a})=>n.jsx("svg",{className:a,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{d:"M4 6h16M4 12h16m-7 6h7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),$n=({className:a})=>n.jsx("svg",{className:a,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n.jsx("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Dl=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z"})}),ph=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5-5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})}),hh=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),xh=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"})}),gh=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M20.54 5.23l-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM6.24 5h11.52l.83 1H5.42l.82-1zM5 19V8h14v11H5zm11-5.5-3.5 2-3.5-2V6h7v7.5z"})}),yh=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"})}),vh=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),bh=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"})}),jh=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 1a9 9 0 0 0-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7a9 9 0 0 0-9-9z"})}),wh=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M13.66 7.5h-3.23l-.67 2h3.22c.9 0 1.63.74 1.63 1.64 0 .91-.73 1.64-1.63 1.64h-1.88l-2.02 5.06H6.18L8.21 13h1.89c.47 0 .86-.39.86-.86s-.39-.86-.86-.86H8.21l.67-2H12c.47 0 .86-.39.86-.86s-.39-.86-.86-.86H9.55L10.22 5h4.11l-1.34 2.5H13.66zM20 4H4c-1.11 0-2 .89-2 2v12c0 1.1.89 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.11-.9-2-2-2z"})}),Nh=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})}),Sh=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v2H5v-2z"})}),Ch=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),kh=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),_h=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),Ah=({className:a})=>n.jsx("svg",{className:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}),le=Ue.create({baseURL:Au});le.interceptors.request.use(a=>{const o=localStorage.getItem("user"),c=localStorage.getItem("academicYear"),d=localStorage.getItem("currentBranch"),u=localStorage.getItem("token");if(u&&(a.headers.Authorization=`Bearer ${u}`),o){const f=JSON.parse(o);d&&!d.toLowerCase().startsWith("all")?a.headers["X-Branch"]=d:!d&&f.branch&&!f.branch.toLowerCase().startsWith("all")&&(a.headers["X-Branch"]=f.branch),f.location&&(a.headers["X-Location"]=f.location)}const p=c||"2025-2026";return a.headers["X-Academic-Year"]=p,a},a=>Promise.reject(a));const Eh=({toggleSidebar:a,navigateTo:o,onLogout:c,goBack:d,goForward:u,canGoBack:p,canGoForward:f})=>{var N;const v=JSON.parse(localStorage.getItem("user")||"{}"),[A,S]=x.useState(!1),[b,F]=x.useState(!1),[R,H]=x.useState(!1),[g,L]=x.useState(!1),[h,se]=x.useState(localStorage.getItem("currentLocation")||"All"),[ee,V]=x.useState([]),[q,ie]=x.useState([]),[de,P]=x.useState([]);x.useEffect(()=>{v.role==="Admin"&&le.get("/branches").then(y=>{y.data.branches&&V(y.data.branches)}).catch(y=>console.error("Header branch fetch error:",y))},[]);let C=((N=v==null?void 0:v.allowed_branches)==null?void 0:N.map(y=>y.branch_name))||[];if(v.role==="Admin"&&ee.length>0)h==="All"?(C=ee.map(y=>y.branch_name),C=["All",...C]):(C=ee.filter(T=>{const k=(T.location_code||"").toUpperCase(),G=de.find(W=>W.code.toUpperCase()===k);return(G?G.name:"Hyderabad")===h}).map(T=>T.branch_name),C.length>1?C=["Select Branch",...C]:C.length===0&&(C=[]));else{C.length===0&&(v!=null&&v.branch&&(C=[v.branch]),(v==null?void 0:v.role)==="Admin"&&(C=["All",...C]));const y=C.length>1,T=C.includes("All")||(v==null?void 0:v.role)==="Admin";y&&!C.includes("All Branches")&&T&&(C=["All Branches",...C.filter(k=>k!=="All")])}const X=v&&(v.role==="Admin"||C.length>1),[oe,ue]=x.useState(localStorage.getItem("academicYear")||"2025-2026"),[U,re]=x.useState(()=>localStorage.getItem("currentBranch")||v.branch||"All"),Q=y=>{localStorage.setItem("academicYear",y),ue(y),S(!1),window.location.reload()},pe=y=>{localStorage.setItem("currentLocation",y),se(y),L(!1);let T="All";if(y!=="All"&&ee.length>0){const k=ee.filter(G=>{const J=(G.location_code||"").toUpperCase(),W=de.find(Ne=>Ne.code.toUpperCase()===J);return(W?W.name:"Hyderabad")===y});k.length>0&&(T=k[0].branch_name)}else T="All";localStorage.setItem("currentBranch",T),re(T),window.location.reload()},$=y=>{const T=y==="All Branches"?"All":y;localStorage.setItem("currentBranch",T),re(T),H(!1),window.location.reload()},[be,O]=x.useState([]);x.useEffect(()=>{le.get("/org/academic-years").then(y=>{const T=y.data.academic_years||[];O(T.map(k=>k.name))}).catch(y=>console.error("Failed to load academic years in Header",y))},[]);const ne=be.length>0?be:["2024-2025","2025-2026","2026-2027"],[D,w]=x.useState(["All"]);return x.useEffect(()=>{v.role==="Admin"&&le.get("/org/locations").then(y=>{const T=y.data.locations||[];P(T);const k=T.map(G=>G.name);w(["All",...k])}).catch(y=>console.error("Failed to load locations in Header",y))},[v.role]),n.jsx("header",{className:"bg-green-700 text-white shadow-md z-20",children:n.jsx("nav",{className:"container-fluid mx-auto px-4",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("button",{onClick:a,className:"text-white hover:bg-green-600 p-2 rounded-md focus:outline-none md:hidden mr-2",children:n.jsx(fh,{className:"w-6 h-6"})}),n.jsx("a",{href:"#",onClick:()=>o("dashboard"),className:"flex items-center space-x-3",children:n.jsx("img",{src:"https://www.mshifzacademy.com/assets/images/ms-logo.jpg",alt:"MS Education Academy Logo",className:"h-12"})}),n.jsx("div",{className:"hidden md:flex items-center ml-4"})]}),n.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[v.role==="Admin"&&n.jsxs("div",{className:"relative mr-2",children:[n.jsxs("button",{onClick:()=>L(!g),onBlur:()=>setTimeout(()=>L(!1),200),className:"flex items-center space-x-1 hover:bg-green-600 p-2 rounded-md focus:outline-none",children:[n.jsx("span",{className:"font-semibold",children:h==="All"?"All Locations":h}),n.jsx($n,{className:"w-4 h-4"})]}),g&&n.jsx("ul",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-30 text-gray-700",children:D.map(y=>n.jsx("li",{children:n.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),pe(y)},className:`block px-4 py-2 text-sm hover:bg-gray-100 ${h===y?"font-bold text-green-700 bg-green-100":""}`,children:y==="All"?"All Locations":y})},y))})]}),X?n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>H(!R),onBlur:()=>setTimeout(()=>H(!1),200),className:"flex items-center space-x-1 hover:bg-green-600 p-2 rounded-md focus:outline-none",children:[n.jsx("span",{className:"font-semibold",children:U==="All"?"All Branches":U}),n.jsx($n,{className:"w-4 h-4"})]}),R&&n.jsx("ul",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-30 text-gray-700 max-h-60 overflow-auto",children:C.map(y=>n.jsx("li",{children:n.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),$(y==="All Branches"?"All":y)},className:`block px-4 py-2 text-sm hover:bg-gray-100 ${U===(y==="All Branches"?"All":y)?"font-bold text-green-700":""}`,children:y})},y))})]}):n.jsx("div",{className:"flex items-center space-x-1 p-2 rounded-md",children:n.jsx("span",{className:"font-semibold",children:U==="All"?"All Branches":U})}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>S(!A),onBlur:()=>setTimeout(()=>S(!1),150),className:"flex items-center space-x-1 hover:bg-green-600 p-2 rounded-md focus:outline-none",children:[n.jsx("span",{children:oe}),n.jsx($n,{className:"w-4 h-4"})]}),A&&n.jsx("ul",{className:"absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg py-1 z-30 text-gray-700",children:ne.map(y=>n.jsx("li",{children:n.jsx("a",{href:"#",onClick:T=>{T.preventDefault(),Q(y)},className:"block px-4 py-2 text-sm hover:bg-gray-100",children:y})},y))})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>F(!b),onBlur:()=>setTimeout(()=>F(!1),150),className:"flex items-center space-x-2 focus:outline-none hover:bg-green-600 p-1 rounded-md",children:[n.jsx("img",{src:"https://picsum.photos/40/40",alt:"avatar",className:"w-8 h-8 rounded-full object-cover"}),n.jsx("span",{className:"hidden md:inline",children:JSON.parse(localStorage.getItem("user")||"{}").username||"User"}),n.jsx($n,{className:"w-4 h-4"})]}),b&&n.jsxs("ul",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-30 text-gray-700",children:[n.jsx("li",{children:n.jsxs("a",{href:"#",onClick:y=>{y.preventDefault(),o("profile"),F(!1)},className:"flex items-center px-4 py-2 text-sm hover:bg-gray-100",children:[n.jsx(Dl,{className:"w-4 h-4 mr-2"})," Profile"]})}),n.jsx("li",{children:n.jsxs("button",{onClick:c,className:"w-full text-left flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 focus:outline-none",children:[n.jsx(ph,{className:"w-4 h-4 mr-2"})," Logout"]})})]})]})]})]})})})},Fh=[{title:"Dashboard",icon:n.jsx(xh,{className:"w-5 h-5"}),page:"dashboard"},{title:"Academic",icon:n.jsx(gh,{className:"w-5 h-5"}),page:"academic"},{title:"Financial",icon:n.jsx(yh,{className:"w-5 h-5"}),page:"fee"},{title:"Administration",icon:n.jsx(vh,{className:"w-5 h-5"}),page:"administration"},{title:"Setup Your School",icon:n.jsx(bh,{className:"w-5 h-5"}),page:"setup"}],Ph=({isOpen:a,toggleSidebar:o,navigateTo:c,currentPage:d})=>n.jsxs("aside",{className:`flex-shrink-0 bg-white border-r border-gray-200 flex flex-col transition-all duration-300 ${a?"w-64":"w-0 overflow-hidden md:w-20"} md:relative absolute h-full z-10 md:z-auto`,children:[n.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b",children:[n.jsx("span",{className:`font-semibold text-violet-700 ${!a&&"md:hidden"}`,children:"Menu"}),n.jsx("button",{onClick:o,className:"p-2 rounded-md hover:bg-gray-100 focus:outline-none",children:n.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-gray-600",children:n.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.875 12.0003C1.875 11.7019 1.99353 11.4157 2.2045 11.2048C2.41548 10.9938 2.70163 10.8753 3 10.8753H18.285L14.205 6.79526C14.0063 6.582 13.8981 6.29993 13.9032 6.00847C13.9084 5.71702 14.0264 5.43894 14.2326 5.23283C14.4387 5.02671 14.7168 4.90864 15.0082 4.9035C15.2997 4.89835 15.5817 5.00654 15.795 5.20526L21.795 11.2053C22.0057 11.4162 22.124 11.7021 22.124 12.0003C22.124 12.2984 22.0057 12.5843 21.795 12.7953L15.795 18.7953C15.692 18.9058 15.5678 18.9944 15.4298 19.0559C15.2918 19.1174 15.1428 19.1505 14.9918 19.1531C14.8407 19.1558 14.6907 19.128 14.5506 19.0714C14.4105 19.0149 14.2833 18.9306 14.1764 18.8238C14.0696 18.717 13.9854 18.5897 13.9288 18.4497C13.8722 18.3096 13.8444 18.1595 13.8471 18.0085C13.8498 17.8574 13.8828 17.7084 13.9443 17.5705C14.0058 17.4325 14.0945 17.3083 14.205 17.2053L18.285 13.1253H3C2.70163 13.1253 2.41548 13.0067 2.2045 12.7958C1.99353 12.5848 1.875 12.2986 1.875 12.0003Z",fill:"#464646"})})})]}),n.jsx("div",{className:"p-4",children:n.jsxs("p",{className:"text-sm text-gray-500",children:["School Code: ",n.jsx("span",{className:"font-semibold text-gray-800",children:"msacademy"})]})}),n.jsxs("nav",{className:"flex-1 px-2 space-y-1 overflow-y-auto",children:[Fh.map(u=>n.jsxs("a",{href:"#",onClick:p=>{p.preventDefault(),c(u.page)},className:`flex items-center p-2 text-sm font-medium rounded-md group ${u.page===d?"bg-green-100 text-green-800":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[u.icon,n.jsx("span",{className:`ml-3 whitespace-nowrap ${!a&&"md:hidden"}`,children:u.title})]},u.title)),n.jsxs("div",{className:`pt-4 mt-4 border-t border-gray-200 ${!a&&"md:hidden"}`,children:[n.jsxs("a",{href:"#",className:"flex items-center p-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-100 hover:text-gray-900",children:[n.jsx(jh,{className:"w-5 h-5"}),n.jsx("span",{className:"ml-3",children:"Staff Support"})]}),n.jsxs("a",{href:"#",onClick:u=>{u.preventDefault(),c("profile")},className:"flex items-center p-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-100 hover:text-gray-900",children:[n.jsx(Dl,{className:"w-5 h-5"}),n.jsx("span",{className:"ml-3",children:"My Details"})]})]})]})]}),Eu=x.createContext(void 0),Th=()=>[{sr:1,title:"May Fee",payable:3250,paid:!1},{sr:2,title:"June Fee",payable:3500,paid:!1},{sr:3,title:"July Fee",payable:3500,paid:!1},{sr:4,title:"August Fee",payable:3500,paid:!1},{sr:5,title:"September Fee",payable:3500,paid:!1},{sr:6,title:"October Fee",payable:3500,paid:!1},{sr:7,title:"November Fee",payable:3500,paid:!1},{sr:8,title:"December Fee",payable:3500,paid:!1},{sr:9,title:"January Fee",payable:3500,paid:!1},{sr:10,title:"February Fee",payable:3500,paid:!1},{sr:11,title:"March Fee",payable:3500,paid:!1}],Rh=({children:a})=>{const[o,c]=x.useState([]),[d,u]=x.useState(!0),[p,f]=x.useState(null);x.useEffect(()=>{u(!0),le.get("/students").then(S=>{c(S.data.students||[]),f(null)}).catch(()=>f("Failed to load student data")).finally(()=>u(!1))},[]);const v=async S=>{c(b=>{const F=b.length?Math.max(...b.map(R=>R.sr))+1:1;return[{...S,sr:F,feeInstallments:S.feeInstallments||Th()},...b]})},A=async(S,b)=>{c(F=>F.map(R=>R.admNo===S?{...R,...b}:R))};return n.jsx(Eu.Provider,{value:{students:o,loading:d,error:p,addStudent:v,updateStudent:A},children:a})},Lh=()=>{const a=x.useContext(Eu);if(!a)throw new Error("useSchool must be used inside SchoolProvider");return a},Kd=({title:a,value:o,icon:c,color:d})=>n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm flex items-center space-x-4 border-l-4",style:{borderColor:d},children:[n.jsx("div",{className:"p-3 rounded-full",style:{backgroundColor:`${d}1A`,color:d},children:c}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500",children:a}),n.jsx("p",{className:"text-xl font-semibold text-gray-800",children:o})]})]}),Dh=()=>{const{students:a}=Lh(),o=(localStorage.getItem("currentBranch")||"All").trim(),c=o.toLowerCase(),d=!c||c.startsWith("all"),p=JSON.parse(localStorage.getItem("user")||"{}").allowed_branches||[];let f=o;if(Array.isArray(p)){const F=p.find(R=>String(R.branch_id)===o);F&&(f=F.branch_name)}const v=d?a:a.filter(F=>{const R=(F.branch||"").toLowerCase().trim();return R===c||R===f.toLowerCase().trim()}),A=v.length,S=v.reduce((F,R)=>{const H=(R.feeInstallments||[]).filter(g=>!g.paid).reduce((g,L)=>g+(L.payable||0),0);return F+H},0),b=F=>`${F.toLocaleString("en-IN")}`;return n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[n.jsx(Kd,{title:"Total Students",value:A,icon:n.jsx(Dl,{className:"w-6 h-6"}),color:"#4f46e5"}),n.jsx(Kd,{title:"Total Fee Dues",value:b(S),icon:n.jsx(wh,{className:"w-6 h-6"}),color:"#db2777"})]})},Ih=({navigateTo:a})=>{var S;const o=[{name:"Fee",icon:"https://cdn-icons-png.flaticon.com/512/1001/1001096.png",page:"fee"},{name:"Admission",icon:"https://cdn-icons-png.flaticon.com/512/3063/3063820.png",page:"dashboard"},{name:"Account",icon:"https://cdn-icons-png.flaticon.com/512/272/272997.png",page:"dashboard"},{name:"Student",icon:"https://cdn-icons-png.flaticon.com/512/921/921347.png",page:"dashboard"},{name:"Staff",icon:"https://cdn-icons-png.flaticon.com/512/2940/2940626.png",page:"dashboard"}],c=localStorage.getItem("user"),d=c?JSON.parse(c):null;let u=[];d!=null&&d.allowed_branches&&Array.isArray(d.allowed_branches)&&(u=d.allowed_branches.map(b=>({id:String(b.branch_id),name:b.branch_name}))),u.length===0&&(d!=null&&d.branch)&&(u=[{id:d.branch,name:d.branch}]);const p=(d==null?void 0:d.role)==="Admin",f=u.some(b=>b.id==="All"||b.name==="All");p&&!f&&(u=[{id:"All",name:"All Branches"},...u]),u.length>1;const[v,A]=x.useState(()=>{const b=localStorage.getItem("currentBranch");return b||(p?"All":u.length>0?u[0].id:"All")});return(S=u.find(b=>b.id===v))!=null&&S.name,n.jsx("div",{className:"bg-white shadow-sm",children:n.jsx("div",{className:"container-fluid mx-auto px-4",children:n.jsxs("div",{className:"flex items-center justify-between flex-wrap",children:[n.jsx("div",{className:"py-4 flex items-center",children:n.jsxs("h2",{className:"text-xl text-gray-800 mr-4",children:["Welcome, ",n.jsx("span",{className:"font-semibold",children:(d==null?void 0:d.username)||"User"})]})}),n.jsx("div",{className:"flex items-center space-x-1 sm:space-x-4 overflow-x-auto py-2",children:o.map((b,F)=>n.jsxs("a",{href:"#",onClick:R=>{R.preventDefault(),a(b.page)},className:"flex-shrink-0 text-center p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 w-24",children:[n.jsx("img",{src:b.icon,alt:b.name,className:"h-8 w-8 mx-auto object-contain"}),n.jsx("span",{className:"text-xs text-gray-600 mt-1 block",children:b.name})]},F))})]})})})},Oh=()=>n.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[n.jsx(Dh,{}),n.jsx("div",{className:"relative max-w-sm mx-auto",children:n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"})})]}),Bh=({navigateTo:a})=>n.jsxs(n.Fragment,{children:[n.jsx(Ih,{navigateTo:a}),n.jsx(Oh,{})]}),Mh=()=>{const[a,o]=x.useState("AUDIT-MN"),[c,d]=x.useState(""),[u,p]=x.useState(""),[f,v]=x.useState(""),[A,S]=x.useState(""),[b,F]=x.useState(""),[R,H]=x.useState(""),[g,L]=x.useState(""),[h,se]=x.useState(""),[ee,V]=x.useState("User"),[q,ie]=x.useState("Hyderabad"),[de,P]=x.useState([]),[C,X]=x.useState([]),[oe,ue]=x.useState([]),[U,re]=x.useState({type:"",msg:""}),[Q,pe]=x.useState(!1);x.useEffect(()=>{const O=JSON.parse(localStorage.getItem("user")||"{}"),ne=localStorage.getItem("currentBranch");(async()=>{try{const[w,N]=await Promise.all([le.get("/branches"),le.get("/org/locations")]);P(w.data.branches||[]),ue(N.data.locations||[])}catch(w){console.error("Failed to fetch branches/locations",w)}})(),O.role==="Admin"?ne&&ne!=="All"?X([ne]):pe(!1):O.branch&&(X([O.branch]),pe(!0))},[]),x.useEffect(()=>{if(C.length===1&&C[0]!=="All"&&oe.length>0){const O=de.find(ne=>ne.branch_code.toLowerCase()===C[0].toLowerCase()||ne.branch_name.toLowerCase()===C[0].toLowerCase());if(O){const ne=(O.location_code||"").toUpperCase(),D=oe.find(w=>w.code.toUpperCase()===ne);D&&ie(D.name)}}},[C,de,oe]);const $=O=>{if(Q)return;if(O==="All"){C.includes("All")?X([]):X(["All"]);return}let ne=C.filter(D=>D!=="All");C.includes(O)?ne=ne.filter(D=>D!==O):ne.push(O),X(ne)},be=async O=>{var D,w;if(O.preventDefault(),re({type:"",msg:""}),!g||!h){re({type:"error",msg:"Username and Password are required."});return}const ne={username:g,password:h,branches:C.length>0?C:ee==="Admin"?["All"]:[],branch:C[0]||"North",location:q,role:ee};console.log("Sending Add User Payload:",ne);try{await le.post("/users/add",ne),re({type:"success",msg:"User created successfully!"}),L(""),se(""),X([]),V("User")}catch(N){const y=((w=(D=N.response)==null?void 0:D.data)==null?void 0:w.error)||"Failed to create user.";re({type:"error",msg:y})}};return n.jsxs("div",{className:"container mx-auto p-4 md:p-6",children:[n.jsx("div",{className:"mb-6",children:n.jsx("h4",{className:"text-xl font-semibold text-gray-700",children:"CHANGE USERNAME/PASSWORD"})}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx("form",{children:n.jsxs("div",{className:"space-y-4 border border-gray-200 p-6 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4",children:"Change Username"}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"txtuserName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),n.jsx("input",{type:"text",id:"txtuserName",name:"txtuserName",maxLength:100,value:a,onChange:O=>o(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{type:"button",className:"bg-violet-600 text-white px-4 py-2 rounded-md hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500",children:"Save"}),n.jsx("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 focus:outline-none",children:"Cancel"})]})]})}),n.jsx("form",{children:n.jsxs("div",{className:"space-y-4 border border-green-200 p-6 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4",children:"Change Password"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"txtNewPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"password",id:"txtNewPassword",name:"txtNewPassword",maxLength:99,value:c,onChange:O=>d(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"txtConfirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),n.jsx("input",{type:"password",id:"txtConfirmPassword",name:"txtConfirmPassword",maxLength:20,value:u,onChange:O=>p(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500"})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{type:"button",className:"bg-violet-600 text-white px-4 py-2 rounded-md hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500",children:"Save Password"}),n.jsx("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 focus:outline-none",children:"Cancel"})]})]})}),n.jsx("form",{className:"lg:col-span-2",children:n.jsxs("div",{className:"space-y-4 border border-gray-200 p-6 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4",children:"Teacher Detail"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"txtteacherfirstname",className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"txtteacherfirstname",name:"txtteacherfirstname",maxLength:100,value:f,onChange:O=>v(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"txtteacherLastName",className:"block text-sm font-medium text-gray-700 mb-1",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"txtteacherLastName",name:"txtteacherLastName",maxLength:100,value:A,onChange:O=>S(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"txtteacheremail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsx("input",{type:"email",id:"txtteacheremail",name:"txtteacheremail",maxLength:100,value:b,onChange:O=>F(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"txtTMobile",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile"}),n.jsx("input",{type:"tel",id:"txtTMobile",name:"txtTMobile",maxLength:100,value:R,onChange:O=>H(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500"})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("button",{type:"button",className:"bg-violet-600 text-white px-4 py-2 rounded-md hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500",children:"Save"}),n.jsx("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 focus:outline-none",children:"Cancel"})]})]})})]}),n.jsx("div",{className:"mt-8",children:n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-blue-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2 mb-4",children:"Add User (Admin Only)"}),U.msg&&n.jsx("div",{className:`p-4 mb-4 rounded-md ${U.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:U.msg}),n.jsxs("form",{onSubmit:be,children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"newUserName",className:"block text-sm font-medium text-gray-700 mb-1",children:["Username ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",id:"newUserName",value:g,onChange:O=>L(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter username"})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"newUserPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"password",id:"newUserPassword",value:h,onChange:O=>se(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter password"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Allowed Branches"}),n.jsxs("div",{className:"border border-gray-300 rounded-md p-2 h-32 overflow-y-auto bg-white",children:[n.jsxs("div",{className:"flex items-center space-x-2 p-1",children:[n.jsx("input",{type:"checkbox",checked:C.includes("All"),onChange:()=>$("All")}),n.jsx("span",{className:"text-sm",children:"All Branches"})]}),de.map(O=>n.jsxs("div",{className:"flex items-center space-x-2 p-1 border-t border-gray-100",children:[n.jsx("input",{type:"checkbox",checked:C.includes(O.branch_code),onChange:()=>$(O.branch_code),disabled:Q||C.includes("All")}),n.jsx("span",{className:"text-sm",children:O.branch_name})]},O.branch_code))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select multiple or All"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"newUserLocation",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),n.jsx("input",{type:"text",id:"newUserLocation",value:q,onChange:O=>ie(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"newUserRole",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),n.jsxs("select",{id:"newUserRole",value:ee,onChange:O=>V(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"User",children:"User"}),n.jsx("option",{value:"Admin",children:"Admin"})]})]})]}),n.jsx("div",{className:"mt-6",children:n.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create User"})})]})]})})]})]})},zh=({navigateTo:a})=>{const[o,c]=x.useState(null),d=S=>{c(o===S?null:S)},u=()=>{setTimeout(()=>c(null),150)},p=S=>{S==="Fee Type"?a("fee-type"):S==="Create Class Fee Structure"?a("class-fee-structure"):S==="Fee Installments"?a("fee-installments"):S==="Assign Special Fee Type"?a("assign-special-fee"):S==="Concession Template"?a("concession-master"):S==="Update Student Fee Structure"&&a("update-student-fee-structure"),c(null)},f="px-3 py-1.5 text-sm border border-violet-500 text-violet-700 rounded-md hover:bg-violet-50 focus:outline-none",v={feeMasters:["Fee Type","Fee Installments","Assign Special Fee Type","Create Class Fee Structure","Update Student Fee Structure"],concession:[{name:"Concession Template",action:()=>a("concession-master")},{name:"Set Student Concession",action:()=>a("student-concession")},{name:"Paid Concession Report",action:()=>console.log("Paid Concession Report")},{name:"Expected Concession Report",action:()=>console.log("Expected Concession Report")}],refund:["Refund/TC Requests","Refund Fee","Refundable Fees Refund Report","Refundable Fees Deposit Report","Refund Report","Refund Cancel Report","Adjust Fee","Adjust Fee Report","Nullify Fee","Nullify Fee Report"]},A=(S,b)=>n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>d(S),onBlur:u,className:`${f} flex items-center capitalize`,children:[S.replace(/([A-Z])/g," $1").trim()," ",n.jsx($n,{className:"w-4 h-4 ml-1"})]}),o===S&&n.jsx("ul",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg py-1 z-30 text-gray-700 border max-h-60 overflow-y-auto",children:b.map((F,R)=>{const H=typeof F=="string"?F:F.name,g=typeof F=="string"?()=>p(F):F.action;return n.jsx("li",{children:n.jsx("a",{href:"#",onClick:L=>{L.preventDefault(),g()},className:"block px-4 py-2 text-sm hover:bg-gray-100",children:H})},R)})})]});return n.jsxs("div",{children:[n.jsx("div",{className:"bg-white",style:{borderTop:"4px solid #6d28d9"},children:n.jsxs("div",{className:"container-fluid mx-auto flex justify-between items-center p-3",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[n.jsx("span",{className:"text-violet-600 mr-2",children:""})," Fee Management"]}),n.jsxs("div",{className:"flex gap-2 flex-wrap",children:[A("feeMasters",v.feeMasters),n.jsx("button",{className:f,onClick:()=>a("fee-reports"),children:"Fee Reports"}),n.jsx("button",{className:`${f} bg-violet-600 text-white hover:bg-violet-700`,onClick:()=>{console.log("Fee Payment button clicked, navigating to take-fee"),a("take-fee")},children:"Take Fee"}),A("concession",v.concession),A("refund",v.refund)]})]})}),n.jsx("div",{className:"container mx-auto p-6",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[n.jsx("div",{className:"text-gray-400 mb-4",children:n.jsx("svg",{className:"w-24 h-24 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"Fee Management Dashboard"}),n.jsx("p",{className:"text-gray-500 mb-6",children:'Click "Take Fee" button above to collect fees from students.'}),n.jsx("button",{onClick:()=>a("take-fee"),className:"bg-violet-600 text-white px-6 py-3 rounded-md hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-violet-500",children:"Collect Due Fees"})]})})]})},Uh=()=>{const[a,o]=x.useState([]),[c,d]=x.useState(!1),[u,p]=x.useState({fee_type:"",category:"",fee_type_group:"",type:"Installment",display_name:"",is_refundable:!1,description:"",branch:"All",academic_year:localStorage.getItem("academicYear")||"2025-2026"}),[f,v]=x.useState(null);x.useEffect(()=>{const g=JSON.parse(localStorage.getItem("user")||"{}");let L=localStorage.getItem("currentBranch")||"All";g.role!=="Admin"&&g.branch&&g.branch!=="All"&&g.branch!=="All Branches"&&(L=g.branch),p(h=>({...h,branch:L})),A()},[]);const A=async()=>{try{const L=(await le.get("/fee-types")).data,h=Array.isArray(L)?L:L.fee_types||[],se=JSON.parse(localStorage.getItem("user")||"{}");let ee=localStorage.getItem("currentBranch")||"All";se.role!=="Admin"&&se.branch&&se.branch!=="All"&&se.branch!=="All Branches"&&(ee=se.branch);const V=ee==="All"||ee==="All Branches"?h:h.filter(q=>!q.branch||q.branch==="All"||q.branch===ee);o(V)}catch(g){console.error("Error fetching fee types:",g)}},S=g=>{const{name:L,value:h,type:se}=g.target;if(se==="checkbox"){const ee=g.target.checked;p(V=>({...V,[L]:ee}))}else p(ee=>({...ee,[L]:h}))},b=async g=>{g.preventDefault();try{const L=JSON.parse(localStorage.getItem("user")||"{}");let h=localStorage.getItem("currentBranch")||"All";L.role!=="Admin"&&L.branch&&L.branch!=="All"&&L.branch!=="All Branches"&&(h=L.branch);const se={...u,branch:u.branch||h||"All"};f?await le.put(`/fee-types/${f}`,se):await le.post("/fee-types",se),H(),A()}catch(L){console.error("Error saving fee type:",L),alert("Error saving fee type. Please try again.")}},F=g=>{p(g),v(g.id||null),d(!0)},R=async g=>{if(window.confirm("Are you sure you want to delete this fee type?"))try{await le.delete(`/fee-types/${g}`),A()}catch(L){console.error("Error deleting fee type:",L),alert("Error deleting fee type. Please try again.")}},H=()=>{p({fee_type:"",category:"",fee_type_group:"",type:"Installment",display_name:"",is_refundable:!1,description:"",branch:localStorage.getItem("currentBranch")||"All",academic_year:localStorage.getItem("academicYear")||"2025-2026"}),v(null),d(!1)};return n.jsxs("div",{className:"container mx-auto p-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Fee Types"}),n.jsxs("button",{onClick:()=>d(!c),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md flex items-center gap-2",children:[n.jsx("span",{children:""})," Add New Fee Type"]})]})}),c&&n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:f?"Edit Fee Type":"Add New Fee Type"}),n.jsxs("form",{onSubmit:b,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Fee Type ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"fee_type",value:u.fee_type,onChange:S,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",placeholder:"e.g., Transport Fee"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fee Category"}),n.jsxs("select",{name:"category",value:u.category,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",children:[n.jsx("option",{value:"",children:"Select Fee category"}),n.jsx("option",{value:"Academic",children:"Academic"}),n.jsx("option",{value:"Tuition",children:"Tuition"}),n.jsx("option",{value:"Transport",children:"Transport"}),n.jsx("option",{value:"Hostel",children:"Hostel"}),n.jsx("option",{value:"Library",children:"Library"}),n.jsx("option",{value:"Sports",children:"Sports"}),n.jsx("option",{value:"Examination",children:"Examination"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch"}),n.jsx("input",{type:"text",name:"branch",value:u.branch,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year"}),n.jsxs("select",{name:"academic_year",value:u.academic_year,onChange:S,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed",children:[n.jsx("option",{value:"2024-2025",children:"2024-2025"}),n.jsx("option",{value:"2025-2026",children:"2025-2026"}),n.jsx("option",{value:"2026-2027",children:"2026-2027"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fee Type Group"}),n.jsxs("select",{name:"fee_type_group",value:u.fee_type_group,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",children:[n.jsx("option",{value:"",children:"Select Fee Type Group"}),n.jsx("option",{value:"Standard",children:"Standard"}),n.jsx("option",{value:"Special",children:"Special"}),n.jsx("option",{value:"Optional",children:"Optional"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),n.jsx("input",{type:"text",name:"display_name",value:u.display_name,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",placeholder:"Display name for receipts"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),n.jsxs("select",{name:"type",value:u.type,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",children:[n.jsx("option",{value:"Installment",children:"Installment"}),n.jsx("option",{value:"One-Time",children:"One-Time"})]})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",name:"is_refundable",id:"is_refundable",checked:u.is_refundable,onChange:S,className:"w-4 h-4 text-violet-600 border-gray-300 rounded focus:ring-violet-500"}),n.jsx("label",{htmlFor:"is_refundable",className:"ml-2 text-sm text-gray-700",children:"Is Fee Refundable?"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{name:"description",value:u.description,onChange:S,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",placeholder:"Optional description"})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Reset"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md",children:" Save Fee Type"})]})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee Type Group"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Display Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee Refundable"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:'No fee types found. Click "Add New Fee Type" to create one.'})}):a.map(g=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g.fee_type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${!g.branch||g.branch==="All"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:g.branch||"All"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.category||"-"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.fee_type_group||"-"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:g.type})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.display_name||"-"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g.is_refundable?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:g.is_refundable?"Yes":"No"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>F(g),className:"text-blue-600 hover:text-blue-900 px-3 py-1 bg-blue-50 rounded",children:" Edit"}),n.jsx("button",{onClick:()=>g.id&&R(g.id),className:"text-red-600 hover:text-red-900 px-3 py-1 bg-red-50 rounded",children:" Delete"})]})})]},g.id))})]})})})]})},$h=()=>{const[a,o]=x.useState([]),[c,d]=x.useState([]),[u,p]=x.useState(["Standard"]),[f,v]=x.useState(""),[A,S]=x.useState(localStorage.getItem("academicYear")||"2025-2026"),[b,F]=x.useState("Standard"),[R,H]=x.useState(""),[g,L]=x.useState("Hyderabad"),[h,se]=x.useState(!1),[ee,V]=x.useState([]),[q,ie]=x.useState([]),[de,P]=x.useState(!1),[C,X]=x.useState(!1),[oe,ue]=x.useState("All");x.useEffect(()=>{const N=JSON.parse(localStorage.getItem("user")||"{}");se(N.role==="Admin"),N.location&&L(N.location);let y=localStorage.getItem("currentBranch")||"All";N.role!=="Admin"&&N.branch&&N.branch!=="All"&&N.branch!=="All Branches"&&(y=N.branch),ue(y);const T=localStorage.getItem("currentLocation");y&&y!=="All"&&y!=="All Branches"?le.get("/branches").then(k=>{if(k.data.branches){const G=k.data.branches.find(J=>J.branch_name.toLowerCase()===y.toLowerCase());if(G){const J={HYD:"Hyderabad",MUM:"Mumbai"},W=(G.location_code||"").toUpperCase();let Y=J[W]||"Hyderabad";L(Y)}}}).catch(k=>console.error("Error fetching branch info:",k)):L(T&&T!=="All"?T:"All"),U(),Q()},[]);const U=async()=>{try{const N=await le.get("/fee-types");o(N.data.fee_types||[])}catch(N){console.error("Error fetching fee types:",N)}};x.useEffect(()=>{f&&A&&re()},[f,A,g,oe]);const re=async()=>{try{const N=oe,y=N==="All Branches"||N==="All"?"All":N,k=(await le.get("/class-fee-structure",{params:{class:f,academic_year:A,branch:y,location:g}})).data.fee_structures;if(k&&k.length>0){const G=[],J=[];k.forEach(W=>{const Y={id:W.id,fee_type_id:W.fee_type_id,fee_type_name:W.fee_type_name,total_amount:W.total_amount,is_new_admission:W.is_new_admission,installments:W.installments};W.is_new_admission?G.push(Y):J.push(Y),W.fee_group&&F(W.fee_group)}),V(G),ie(J)}else V([]),ie([])}catch(N){console.error("Error fetching existing fee structures:",N)}},Q=async()=>{try{const y=(await le.get("/classes")).data.classes.map(T=>T.class_name);d(y)}catch(N){console.error("Error fetching classes:",N)}},pe=()=>{R&&!u.includes(R)&&(p([...u,R]),F(R),H(""))},$=async(N,y,T)=>{const k=a.find(Y=>Y.id===N);if(!k)return;if((T?ee:q).some(Y=>Y.fee_type_id===N)){alert(`Fee type "${k.fee_type}" already exists in the list.`);return}let J=[];if(k.type==="Installment")try{const Y=localStorage.getItem("currentBranch")||"All",Ne=Y==="All Branches"||Y==="All"?"All":Y,at=(await le.get("/installment-schedule",{params:{fee_type_id:N,branch:Ne}})).data.installments||[];if(at.length>0){const ot=at.length,et=Math.floor(y/ot/10)*10,Qt=y-et*ot;J=at.map((dt,Ct)=>({month:dt.title,amount:Ct===0?et+Qt:et,month_order:dt.installment_no}))}else{alert("Installments not created for this fee type. Please configure installments first.");return}}catch(Y){console.error("Error fetching installments:",Y),alert("Error fetching installment schedule. Please try again.");return}const W={fee_type_id:N,fee_type_name:k.fee_type,total_amount:y,is_new_admission:T,installments:J};T?V([...ee,W]):ie([...q,W])},be=async(N,y)=>{var G,J;const k=(y?ee:q)[N];if(k.id){if(!window.confirm("Are you sure you want to delete this fee structure? This will also remove it from all students in this class."))return;try{await le.delete(`/class-fee-structure/${k.id}`),alert("Fee structure deleted successfully from database and student records!")}catch(Y){console.error("Error deleting fee structure:",Y),alert(`Error: ${((J=(G=Y.response)==null?void 0:G.data)==null?void 0:J.error)||"Failed to delete fee structure"}`);return}}y?V(ee.filter((W,Y)=>Y!==N)):ie(q.filter((W,Y)=>Y!==N))},O=(N,y)=>{const T=y?[...ee]:[...q],k=T[N];if(k.installments.length===0)return;const G=k.total_amount,J=k.installments.length,W=Math.floor(G/J/10)*10,Y=G-W*J,Ne=k.installments.map(($e,at)=>({...$e,amount:at===0?W+Y:W}));k.installments=Ne,y?V(T):ie(T)},ne=(N,y,T,k)=>{const G=k?[...ee]:[...q];G[N].installments[y].amount=T;const J=G[N].installments.reduce((W,Y)=>W+Y.amount,0);G[N].total_amount=J,k?V(G):ie(G)},D=async()=>{var G,J;if(!f||!A){alert("Please select class and academic year");return}const N=[...ee,...q],y=oe,k={class:f,academic_year:A,fee_group:b,branch:y==="All Branches"||y==="All"?"All":y,location:g,fees:N.map(W=>{let Y=0;return W.installments&&W.installments.length>0&&(Y=W.installments[0].amount),{id:W.id,fee_type_id:W.fee_type_id,total_amount:W.total_amount,monthly_amount:Y,is_new_admission:W.is_new_admission,installments:W.installments,location:g}})};try{await le.post("/class-fee-structure",k),alert("Fee structure saved successfully!"),w()}catch(W){console.error("Error saving fee structure:",W);const Y=((J=(G=W.response)==null?void 0:G.data)==null?void 0:J.error)||"Failed to save fee structure";alert(`Error: ${Y}`)}},w=()=>{V([]),ie([]),P(!1),X(!1)};return n.jsx("div",{className:"container mx-auto p-6 bg-gray-50 min-h-screen",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Create Class Fee Structure"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Branch"}),n.jsx("input",{type:"text",value:oe,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class *"}),n.jsxs("select",{value:f,onChange:N=>v(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",children:[n.jsx("option",{value:"",children:"Select Class"}),c.map(N=>n.jsx("option",{value:N,children:N},N))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year *"}),n.jsx("input",{type:"text",value:A,readOnly:!0,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 cursor-not-allowed"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fee Group"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("select",{value:b,onChange:N=>F(N.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",children:u.map(N=>n.jsx("option",{value:N,children:N},N))}),n.jsx("button",{onClick:()=>{const N=prompt("Enter new fee group name:");N&&(H(N),pe())},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"+"})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Fee Structure for New Admissions"}),n.jsx("button",{onClick:()=>P(!de),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:de?"Cancel":"+ Add Fee"})]}),de&&n.jsx(Xd,{feeTypes:a,onAdd:(N,y)=>{$(N,y,!0),P(!1)}}),n.jsx(Zd,{fees:ee,onRemove:N=>be(N,!0),onUpdateInstallment:(N,y,T)=>ne(N,y,T,!0),onRecalculate:N=>O(N,!0)})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Fee Structure for Existing Students"}),n.jsx("button",{onClick:()=>X(!C),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:C?"Cancel":"+ Add Fee"})]}),C&&n.jsx(Xd,{feeTypes:a,onAdd:(N,y)=>{$(N,y,!1),X(!1)}}),n.jsx(Zd,{fees:q,onRemove:N=>be(N,!1),onUpdateInstallment:(N,y,T)=>ne(N,y,T,!1),onRecalculate:N=>O(N,!1)})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx("button",{onClick:w,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Reset"}),n.jsx("button",{onClick:D,className:"px-6 py-2 bg-violet-600 text-white rounded-md hover:bg-violet-700",children:"Save Fee Structure"})]})]})})},Xd=({feeTypes:a,onAdd:o})=>{const[c,d]=x.useState(""),[u,p]=x.useState(""),f=()=>{c&&u&&(o(parseInt(c),parseFloat(u)),d(""),p(""))};return n.jsx("div",{className:"bg-gray-50 p-4 rounded-md mb-4 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fee Type"}),n.jsxs("select",{value:c,onChange:v=>d(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"Select Fee Type"}),a.map(v=>n.jsxs("option",{value:v.id,children:[v.fee_type," (",v.type,")"]},v.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),n.jsx("input",{type:"number",value:u,onChange:v=>p(v.target.value),placeholder:"12000",className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{onClick:f,className:"w-full px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Add Fee"})})]})})},Zd=({fees:a,onRemove:o,onUpdateInstallment:c,onRecalculate:d})=>a.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500 bg-gray-50 rounded-md border border-gray-200",children:"No fees added yet"}):n.jsx("div",{className:"space-y-4",children:a.map((u,p)=>n.jsxs("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:[n.jsxs("div",{className:"bg-blue-50 px-4 py-3 flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:u.fee_type_name}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Total: ",u.total_amount.toLocaleString()]})]}),n.jsxs("div",{className:"flex gap-2",children:[u.installments.length>0&&n.jsx("button",{onClick:()=>d(p),className:"px-3 py-1 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 text-sm",title:"Recalculate installments based on total amount",children:"Recalculate"}),n.jsx("button",{onClick:()=>o(p),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 text-sm",children:"Remove"})]})]}),u.installments.length>0&&n.jsxs("div",{className:"p-4 bg-white",children:[n.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Monthly Installments:"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:u.installments.map((f,v)=>n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-xs text-gray-600 mb-1",children:f.month}),n.jsx("input",{type:"number",value:f.amount,onChange:A=>c(p,v,parseFloat(A.target.value)||0),className:"px-2 py-1 border border-gray-300 rounded text-sm"})]},v))})]})]},p))}),Hh=()=>{const[a,o]=x.useState([]),[c,d]=x.useState([]),[u,p]=x.useState([]),[f,v]=x.useState(""),[A,S]=x.useState(""),[b,F]=x.useState("All"),[R,H]=x.useState(!1),[g,L]=x.useState(localStorage.getItem("academicYear")||"2025-2026"),[h,se]=x.useState(!1),[ee,V]=x.useState([]),[q,ie]=x.useState([]),[de,P]=x.useState([]),[C,X]=x.useState(!1),[oe,ue]=x.useState(!1),[U,re]=x.useState(null),[Q,pe]=x.useState(new Set);x.useEffect(()=>{const k=JSON.parse(localStorage.getItem("user")||"{}"),G=localStorage.getItem("currentBranch");H(k.role==="Admin"),k.role==="Admin"?G&&G!=="All"?(F(G),se(!0)):(F("All"),se(!1)):k.branch&&(F(k.branch),se(!0)),$()},[]),x.useEffect(()=>{O()},[f]),x.useEffect(()=>{f?be(f):d([])},[f]),x.useEffect(()=>{f&&A?ne():V([])},[f,A,b]);const $=async()=>{try{const k=await le.get("/classes");if(k.data&&Array.isArray(k.data.classes)){const G=k.data.classes.map(J=>String(J.class_name));o([...new Set(G)])}else o([])}catch(k){console.error("Error fetching classes:",k),re("Failed to load classes.")}},be=async k=>{try{const G=await le.get(`/api/sections?class=${k}`);G.data&&Array.isArray(G.data.sections)?d(G.data.sections):d(["A","B","C","D"])}catch(G){console.error("Error fetching sections:",G),d(["A","B","C","D"])}},O=async()=>{try{let G=(await le.get("/fee-types")).data.fee_types||[];if(f)try{const W=(await le.get("/class-fee-structure",{params:{class:f,academic_year:g}})).data.fee_structures||[],Y=new Set;W.forEach(Ne=>{Y.add(Ne.fee_type_id)}),pe(Y)}catch(J){console.error("Error fetching class fee structure for filtering:",J),pe(new Set)}else pe(new Set);p(G.filter(J=>J.fee_type!=="Tuition Fee"))}catch(k){console.error("Error fetching fee types:",k),re("Failed to load fee types.")}},ne=async()=>{if(!(!f||!A)){X(!0),re(null);try{const k=await le.get("/students",{params:{class:f,section:A,branch:b}});k.data&&Array.isArray(k.data.students)?V(k.data.students):V([]),ie([])}catch(k){console.error("Error fetching students:",k),re("Failed to load students.")}finally{X(!1)}}},D=k=>{k.target.checked?ie(ee.map(G=>G.student_id)):ie([])},w=k=>{q.includes(k)?ie(q.filter(G=>G!==k)):ie([...q,k])},N=(k,G)=>{P(G?[...de,{fee_type_id:k,amount:0}]:de.filter(J=>J.fee_type_id!==k))},y=(k,G)=>{const J=parseFloat(G)||0;P(de.map(W=>W.fee_type_id===k?{...W,amount:J}:W))},T=async()=>{var J,W;if(q.length===0){alert("Please select at least one student");return}if(de.length===0){alert("Please select at least one fee type");return}const k=de.filter(Y=>Q.has(Y.fee_type_id));if(k.length>0){const Y=k.map(Ne=>{const $e=u.find(at=>at.id===Ne.fee_type_id);return $e?$e.fee_type:"Unknown Fee"}).join(", ");alert(`The following fees are already assigned in the Class Fee Structure and cannot be assigned again: ${Y}`);return}if(de.filter(Y=>Y.amount<=0).length>0){alert("Please enter valid amounts for all selected fees");return}if(window.confirm(`Assign selected fees to ${q.length} students?`)){ue(!0);try{const Y={student_ids:q,fee_assignments:de.map($e=>({fee_type_id:$e.fee_type_id,amount:$e.amount,academic_year:g}))},Ne=await le.post("/fees/assign-special",Y);alert(`Success! ${Ne.data.assigned_count} fees assigned. ${Ne.data.skipped_count} skipped (duplicates).`),P([]),ie([])}catch(Y){console.error("Error assigning fees:",Y),alert(`Error: ${((W=(J=Y.response)==null?void 0:J.data)==null?void 0:W.error)||"Failed to assign fees"}`)}finally{ue(!1)}}};return U?n.jsxs("div",{className:"p-6 text-red-600",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Error"}),n.jsx("p",{children:U}),n.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded",children:"Retry"})]}):n.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[n.jsx("h2",{className:"text-2xl font-bold mb-6 text-[#4318FF]",children:"Assign Special Fee Type"}),n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm mb-6 flex flex-wrap gap-4 items-end",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch"}),R?n.jsxs("select",{value:b,onChange:k=>F(k.target.value),disabled:h,className:`border rounded-lg px-3 py-2 w-40 bg-white ${h?"bg-gray-100 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"All",children:"All Branches"}),n.jsx("option",{value:"North",children:"North"}),n.jsx("option",{value:"South",children:"South"}),n.jsx("option",{value:"East",children:"East"}),n.jsx("option",{value:"West",children:"West"}),n.jsx("option",{value:"NorthEast",children:"NorthEast"})]}):n.jsx("div",{className:"border rounded-lg px-3 py-2 w-40 bg-gray-100 text-gray-600",children:b})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),n.jsxs("select",{className:"border rounded-lg px-3 py-2 w-40",value:f,onChange:k=>v(k.target.value),children:[n.jsx("option",{value:"",children:"Select Class"}),a.map(k=>n.jsx("option",{value:k,children:k},k))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),n.jsxs("select",{className:"border rounded-lg px-3 py-2 w-40",value:A,onChange:k=>S(k.target.value),children:[n.jsx("option",{value:"",children:"Select Section"}),c.map(k=>n.jsx("option",{value:k,children:k},k))]})]})]}),n.jsxs("div",{className:"flex gap-6",children:[n.jsxs("div",{className:"w-1/3 bg-white p-4 rounded-xl shadow-sm h-fit",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"font-bold text-lg",children:"Special Fee Type"}),n.jsx("button",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm",children:"+ Add Special Fee Type"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between font-medium text-gray-500 text-sm pb-2 border-b",children:[n.jsx("span",{children:"Fee Type"}),n.jsx("span",{children:"Amount"})]}),u.length===0?n.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No special fee types found."}):u.map(k=>{const G=de.some(W=>W.fee_type_id===k.id),J=de.find(W=>W.fee_type_id===k.id);return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:G,onChange:W=>N(k.id,W.target.checked),className:"w-4 h-4 text-[#4318FF]"}),n.jsx("span",{children:k.display_name||k.fee_type})]}),G&&n.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",placeholder:"0",value:(J==null?void 0:J.amount)||"",onChange:W=>y(k.id,W.target.value)})]},k.id)})]}),n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsx("button",{className:`px-6 py-2 rounded-lg text-white font-medium ${q.length>0&&de.length>0?"bg-green-500 hover:bg-green-600":"bg-gray-300 cursor-not-allowed"}`,onClick:T,disabled:q.length===0||de.length===0||oe,children:oe?"Assigning...":"Assign >"})})]}),n.jsxs("div",{className:"w-2/3 bg-white p-4 rounded-xl shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"font-bold text-lg",children:"Student List"}),n.jsx("input",{type:"text",placeholder:"Search",className:"border rounded-lg px-3 py-1 text-sm"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b text-gray-500 text-sm",children:[n.jsx("th",{className:"p-2 w-10",children:n.jsx("input",{type:"checkbox",onChange:D,checked:ee.length>0&&q.length===ee.length})}),n.jsx("th",{className:"p-2",children:"Admission No."}),n.jsx("th",{className:"p-2",children:"Name"}),n.jsx("th",{className:"p-2",children:"Class"}),n.jsx("th",{className:"p-2",children:"Father Mobile"})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:"Loading students..."})}):ee.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"p-4 text-center text-gray-500",children:"No students found. Select Class and Section to load."})}):ee.map(k=>n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"p-2",children:n.jsx("input",{type:"checkbox",checked:q.includes(k.student_id),onChange:()=>w(k.student_id)})}),n.jsx("td",{className:"p-2",children:k.admission_no}),n.jsx("td",{className:"p-2 font-medium",children:k.name}),n.jsxs("td",{className:"p-2",children:[k.class," ",k.section]}),n.jsx("td",{className:"p-2",children:k.fatherMobile})]},k.student_id))})]})})]})]})]})},Vh=()=>{const[a,o]=x.useState([]),[c,d]=x.useState([]),[u,p]=x.useState({installment_no:1,title:"",start_date:"",end_date:"",last_pay_date:"",is_admission:!1,description:"",fee_type_id:null,branch:"",location:"",academic_year:""}),[f,v]=x.useState(!1),[A,S]=x.useState({fee_type_id:"",count:12,start_month_idx:1,year:new Date().getFullYear()+1,start_installment_no:3,branch:"",location:"",academic_year:""}),[b,F]=x.useState(null),[R,H]=x.useState(!1),[g,L]=x.useState("All");x.useEffect(()=>{const P=JSON.parse(localStorage.getItem("user")||"{}"),C=P.role==="Admin";H(C);let X=localStorage.getItem("currentBranch")||"All";!C&&P.branch&&P.branch!=="All"&&P.branch!=="All Branches"&&(X=P.branch);const oe=localStorage.getItem("currentLocation"),ue=P.location||"Hyderabad",U=X==="All"||X==="All Branches";let re="All";U?oe&&oe!=="All"?re=oe:re="All":re=ue,L(re),p(Q=>({...Q,branch:X,location:re==="All"?"Hyderabad":re,academic_year:"2025-2026"})),S(Q=>({...Q,branch:X,location:re==="All"?"Hyderabad":re,academic_year:"2025-2026"})),U?(L("All"),p(Q=>({...Q,location:"All"})),S(Q=>({...Q,location:"All"}))):le.get("/branches").then(Q=>{if(Q.data.branches){const pe=Q.data.branches.find($=>$.branch_name.toLowerCase()===X.toLowerCase());if(pe){const $={HYD:"Hyderabad",MUM:"Mumbai"},be=(pe.location_code||"").toUpperCase();let O=$[be]||ue;L(O),p(ne=>({...ne,location:O})),S(ne=>({...ne,location:O}))}}}).catch(Q=>console.error("Error fetching branch info for location:",Q))},[]),x.useEffect(()=>{h()},[g]),x.useEffect(()=>{se()},[]),x.useEffect(()=>{b||p(P=>({...P,installment_no:a.length+1}))},[a,b]);const h=async()=>{try{const P=JSON.parse(localStorage.getItem("user")||"{}");let C=localStorage.getItem("currentBranch")||"All";P.role!=="Admin"&&P.branch&&P.branch!=="All"&&P.branch!=="All Branches"&&(C=P.branch);const X=C==="All Branches"||C==="All"?"All":C,oe=await le.get("/installment-schedule",{params:{branch:X,location:g}});o(oe.data.installments||[])}catch(P){console.error("Error fetching installments:",P)}},se=async()=>{try{const P=await le.get("/fee-types");d(P.data.fee_types||[])}catch(P){console.error("Error fetching fee types:",P)}},ee=P=>{const{name:C,value:X,type:oe}=P.target,U=P.target.checked;p(re=>({...re,[C]:oe==="checkbox"?U:X}))},V=async P=>{if(P.preventDefault(),!u.title||!u.start_date||!u.end_date||!u.last_pay_date){alert("Please fill all required fields");return}const C=localStorage.getItem("currentBranch")||"All",X={...u,installment_no:parseInt(u.installment_no.toString()),fee_type_id:u.fee_type_id?parseInt(u.fee_type_id.toString()):null,branch:u.branch||C,location:u.location||"Hyderabad",academic_year:u.academic_year||"2025-2026"};try{b?(await le.put(`/installment-schedule/${b}`,X),alert("Installment updated successfully!")):(await le.post("/installment-schedule",X),alert("Installment created successfully!")),h(),de()}catch(oe){console.error("Error saving installment:",oe),alert("Failed to save installment")}},q=P=>{p({installment_no:P.installment_no,title:P.title,start_date:P.start_date,end_date:P.end_date,last_pay_date:P.last_pay_date,is_admission:P.is_admission,description:P.description||"",fee_type_id:P.fee_type_id||null,branch:P.branch||"All",location:P.location||"Hyderabad",academic_year:P.academic_year||"2025-2026"}),F(P.id||null),v(!1)},ie=async P=>{if(confirm("Are you sure you want to delete this installment?"))try{await le.delete(`/installment-schedule/${P}`),alert("Installment deleted successfully!"),h()}catch(C){console.error("Error deleting installment:",C),alert("Failed to delete installment")}},de=()=>{p({installment_no:a.length+1,title:"",start_date:"",end_date:"",last_pay_date:"",is_admission:!1,description:"",fee_type_id:null,branch:localStorage.getItem("currentBranch")||"All",location:"Hyderabad",academic_year:"2025-2026"}),F(null)};return n.jsx("div",{className:"container mx-auto p-6 bg-gray-50 min-h-screen",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsx("div",{className:"flex items-center gap-4",children:n.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Fee Installments"})})}),n.jsxs("div",{className:"mb-6 bg-gray-50 p-6 rounded-lg border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:b?"Edit Installment":"Add New Installment"}),n.jsxs("form",{onSubmit:V,children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fee Type"}),n.jsxs("select",{name:"fee_type_id",value:u.fee_type_id||"",onChange:ee,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"Select FeeType"}),c.filter(P=>{const C=u.branch||localStorage.getItem("currentBranch")||"All";return!P.branch||P.branch==="All"||P.branch===C}).map(P=>n.jsx("option",{value:P.id,children:P.fee_type},P.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Installment No *"}),n.jsx("input",{type:"number",name:"installment_no",value:u.installment_no,onChange:ee,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),n.jsx("input",{type:"text",name:"title",value:u.title,onChange:ee,placeholder:"e.g., April Fee",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),n.jsx("input",{type:"date",name:"start_date",value:u.start_date,onChange:ee,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),n.jsx("input",{type:"date",name:"end_date",value:u.end_date,onChange:ee,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Pay Date *"}),n.jsx("input",{type:"date",name:"last_pay_date",value:u.last_pay_date,onChange:ee,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",required:!0})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("textarea",{name:"description",value:u.description,onChange:ee,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-violet-500",placeholder:"Optional description"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"submit",className:"px-6 py-2 bg-violet-600 text-white rounded-md hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-violet-500",children:b?"Update":"Save"}),n.jsx("button",{type:"button",onClick:de,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none",children:"Reset"})]})]})]}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Fee Installments"}),n.jsxs("table",{className:"min-w-full bg-white border border-gray-200",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b",children:"No."}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b",children:"Fee Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b",children:"Title"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b",children:"Start Date"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b",children:"End Date"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b",children:"Last Pay Date"}),n.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 border-b",children:"Branch"}),n.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700 border-b",children:"Action"})]})}),n.jsx("tbody",{children:a.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"No installments added yet"})}):a.map(P=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 text-sm text-gray-800 border-b",children:P.installment_no}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 border-b",children:P.fee_type_name||"-"}),n.jsxs("td",{className:"px-4 py-3 text-sm text-gray-800 border-b",children:[P.title,P.is_admission&&n.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-green-100 text-green-800 rounded",children:"Admission"})]}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-800 border-b",children:new Date(P.start_date).toLocaleDateString("en-GB")}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-800 border-b",children:new Date(P.end_date).toLocaleDateString("en-GB")}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-800 border-b",children:new Date(P.last_pay_date).toLocaleDateString("en-GB")}),n.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 border-b",children:P.branch||"All"}),n.jsx("td",{className:"px-4 py-3 text-center border-b",children:n.jsxs("div",{className:"flex justify-center gap-2",children:[n.jsx("button",{onClick:()=>q(P),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",children:" Edit"}),n.jsx("button",{onClick:()=>ie(P.id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:" Delete"})]})})]},P.id))})]})]})]})})},Fu=({onClose:a,receiptData:o})=>{const{studentName:c,admissionNo:d,className:u,receiptNo:p,paymentDate:f,paymentMode:v,paymentNote:A,items:S,amount:b,concession:F,payable:R}=o,H=()=>{var q;const L=document.querySelector(".printable-receipt");if(!L)return;const h=Array.from(document.styleSheets).map(ie=>{try{return Array.from(ie.cssRules).map(de=>de.cssText).join("")}catch{return console.warn("Could not read CSS rules from stylesheet:",ie.href),""}}).join(`
`),se=((q=document.querySelector('link[href^="https://fonts.googleapis.com"]'))==null?void 0:q.outerHTML)||"",ee=L.innerHTML,V=window.open("","","height=800,width=800");if(!V){alert("Could not open print window. Please disable pop-up blockers.");return}V.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
            <title>Fee Receipt</title>
            ${se}
            <style>
                ${h}
                body { 
                    font-family: 'Poppins', sans-serif; 
                    -webkit-print-color-adjust: exact; /* Important for Chrome */
                    color-adjust: exact; /* Standard */
                }
                @media print {
                  body { margin: 0; }
                  .no-print { display: none !important; }
                }
            </style>
        </head>
        <body>
            ${ee}
        </body>
        </html>
    `),V.document.close(),setTimeout(()=>{V.focus(),V.print(),V.close()},500)},g=L=>L?new Date(L+"T00:00:00").toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/ /g,"-"):"";return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"printable-receipt p-8 text-gray-800 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-start mb-4",children:[n.jsx("img",{src:"https://mshifzacademy.com/assets/images/ms-logo.jpg",alt:"School Logo",className:"h-16 mr-4"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-black",children:"MS Education Academy"}),n.jsx("p",{className:"text-md text-gray-600",children:"Fee Receipt"})]})]}),n.jsx("hr",{className:"my-6"}),n.jsxs("div",{className:"flex justify-between text-sm mb-8",children:[n.jsxs("div",{children:[n.jsxs("p",{children:[n.jsx("strong",{className:"font-semibold",children:"Student Name:"})," ",c]}),n.jsxs("p",{children:[n.jsx("strong",{className:"font-semibold",children:"Admission No:"})," ",d]}),n.jsxs("p",{children:[n.jsx("strong",{className:"font-semibold",children:"Class:"})," ",u]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{children:[n.jsx("strong",{className:"font-semibold",children:"Receipt No:"})," ",p]}),n.jsxs("p",{children:[n.jsx("strong",{className:"font-semibold",children:"Payment Date:"})," ",g(f)]}),n.jsxs("p",{children:[n.jsx("strong",{className:"font-semibold",children:"Payment Mode:"})," ",v]})]})]}),n.jsxs("table",{className:"w-full text-sm text-left mb-8",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 font-semibold tracking-wider",children:"SR. NO"}),n.jsx("th",{className:"px-4 py-2 font-semibold tracking-wider",children:"FEE DETAILS"}),n.jsx("th",{className:"px-4 py-2 font-semibold tracking-wider text-right",children:"AMOUNT"})]})}),n.jsx("tbody",{children:S.map((L,h)=>n.jsxs("tr",{className:"border-b",children:[n.jsx("td",{className:"px-4 py-3",children:h+1}),n.jsx("td",{className:"px-4 py-3 font-medium",children:L.title}),n.jsxs("td",{className:"px-4 py-3 text-right font-mono",children:["",L.payable.toLocaleString("en-IN")]})]},L.title))})]}),n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx("div",{className:"text-sm",children:A&&n.jsxs("p",{children:[n.jsx("strong",{className:"font-semibold",children:"Note:"})," ",A]})}),n.jsxs("div",{className:"w-1/3 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),n.jsxs("span",{className:"font-mono text-right",children:["",b.toLocaleString("en-IN")]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Concession:"}),n.jsxs("span",{className:"font-mono text-right",children:["- ",F.toLocaleString("en-IN")]})]}),n.jsx("hr",{className:"my-2"}),n.jsxs("div",{className:"flex justify-between font-bold text-base",children:[n.jsx("span",{children:"Net Payable:"}),n.jsxs("span",{className:"font-mono text-right",children:["",R.toLocaleString("en-IN")]})]})]})]}),n.jsx("div",{className:"text-center text-xs text-gray-400 mt-12",children:"This is a computer-generated receipt."})]}),n.jsxs("div",{className:"p-6 pt-0 flex justify-end space-x-4 no-print",children:[n.jsx("button",{onClick:a,className:"px-6 py-2 text-sm font-semibold text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400",children:"Close"}),n.jsx("button",{onClick:H,className:"px-6 py-2 text-sm font-semibold text-white bg-violet-700 rounded-md hover:bg-violet-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500",children:"Print"})]})]})})},Wh=({navigateTo:a})=>{const[o,c]=x.useState(null);return n.jsx("div",{className:"bg-white",style:{borderTop:"4px solid #6d28d9"}})},ir=({title:a,value:o,bgColor:c,textColor:d,icon:u})=>n.jsxs("div",{className:`p-2 rounded-lg text-center ${c}`,children:[n.jsx("p",{className:`text-xs font-semibold ${d}`,children:a}),n.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[u,n.jsx("p",{className:`font-bold text-lg ${d}`,children:o})]})]}),Gh=({installment:a,isSelected:o,onSelect:c,isDisabled:d})=>{const{sr:u,title:p,payable:f,paid:v,paidAmount:A,dueAmount:S,concession:b}=a,F=S!==void 0?S:f-(A||0),R=!v&&(A||0)>0,H=v||F<=0;let g=`Payable = ${f}`;b&&b>0&&(g+=`, Concession = ${b}`);let L="bg-white hover:bg-gray-50";return H?(g=`Payable = ${f}`,b&&b>0&&(g+=`, Concession = ${b}`),g+=`, Paid = ${A||f-(b||0)}, Due = 0`,L="bg-green-100 text-green-800 hover:bg-green-200"):R?(g=`Payable = ${f}`,b&&b>0&&(g+=`, Concession = ${b}`),g+=`, Paid = ${A}, Due = ${F}`,L="bg-red-50 text-red-800 hover:bg-red-100"):F>0&&(g=`Payable = ${f}`,b&&b>0&&(g+=`, Concession = ${b}`),g+=`, Due = ${F}`,L="bg-red-50 text-red-800 hover:bg-red-100"),o&&(L+=" bg-violet-100"),d&&(L+=" opacity-50 cursor-not-allowed"),n.jsxs("tr",{className:L,children:[n.jsx("td",{className:"border px-2 py-2 text-center",children:H?n.jsx("span",{className:"text-green-600 font-bold",children:""}):n.jsx("input",{type:"checkbox",checked:o,onChange:()=>!d&&c(u),disabled:d,className:"h-4 w-4 text-violet-600 border-gray-300 rounded focus:ring-violet-500 disabled:opacity-50 disabled:cursor-not-allowed"})}),n.jsx("td",{className:"border px-2 py-2 text-center text-sm text-gray-600",children:u}),n.jsx("td",{className:"border px-2 py-2 text-sm text-gray-800",children:p}),n.jsx("td",{className:"border px-2 py-2 text-xs text-gray-500",children:g})]})},Yh=({navigateTo:a})=>{const[o,c]=x.useState([]),[d,u]=x.useState([]),[p,f]=x.useState(""),[v,A]=x.useState(""),[S,b]=x.useState(null),[F,R]=x.useState(""),H=x.useMemo(()=>o.find(ce=>ce.student_id===S),[o,S]),[g,L]=x.useState([]),[h,se]=x.useState({totalPaids:0,totalDue:0,currentDue:0}),[ee,V]=x.useState([]),[q,ie]=x.useState("0"),[de,P]=x.useState(0),[C,X]=x.useState({}),[oe,ue]=x.useState("0"),[U,re]=x.useState([]),[Q,pe]=x.useState([]),[$,be]=x.useState(""),O=x.useMemo(()=>$?g.filter(ce=>ce.fee_type_id===Number($)):[],[g,$]);x.useEffect(()=>{(async()=>{try{const ye=await le.get("/fee-types"),Ae=ye.data.fee_types||ye.data;pe(Array.isArray(Ae)?Ae:[])}catch(ye){console.error("Error fetching fee types:",ye)}})()},[]);const ne=async ce=>{var Pe,ke;const ye=ce.target.value;if(be(ye),!ye||!H)return;const Ae=Number(ye);if(!g.some(We=>We.fee_type_id===Ae)&&window.confirm("This fee type is not assigned to the student. Do you want to assign it now?"))try{await le.post("/fees/assign-fee-type",{student_id:H.student_id,fee_type_id:Ae});const We=localStorage.getItem("currentBranch")||"All",ut=We==="All Branches"||We==="All"?"All":We,kt=await le.get(`/fees/student-details/${H.student_id}?branch=${ut}`);L(kt.data.installments||[]),alert("Fee assigned successfully.")}catch(We){console.error("Error assigning fee:",We),alert(((ke=(Pe=We.response)==null?void 0:Pe.data)==null?void 0:ke.error)||"Failed to assign fee.")}};x.useEffect(()=>{(async()=>{try{const ye=await le.get("/concessions");re(ye.data.concessions)}catch(ye){console.error("Error fetching concessions:",ye)}})()},[]);const[D,w]=x.useState(!1),[N,y]=x.useState(null),[T,k]=x.useState(""),[G,J]=x.useState(""),[W,Y]=x.useState("Cash"),[Ne,$e]=x.useState(new Date().toISOString().split("T")[0]),[at,ot]=x.useState(!1);x.useEffect(()=>{const ce=localStorage.getItem("user");if(ce){const ye=JSON.parse(ce);ot(ye.role==="Admin")}},[]),x.useEffect(()=>{(async()=>{try{const Ae=(await le.get("/classes")).data.classes.map(Re=>String(Re.class_name));u([...new Set(Ae)])}catch(ye){console.error("Error fetching classes:",ye)}})()},[]),x.useEffect(()=>{(async()=>{try{const ye=new URLSearchParams;p&&ye.append("class",p),v&&ye.append("section",v),F&&ye.append("search",F);const Ae=localStorage.getItem("currentBranch")||"All";ye.append("branch",Ae==="All Branches"||Ae==="All"?"All":Ae);const Pe=(await le.get(`/fees/students?${ye.toString()}`)).data;c(Array.isArray(Pe)?Pe:Pe.students||[])}catch(ye){console.error("Error fetching students:",ye),c([])}})()},[p,v,F]),x.useEffect(()=>{(async()=>{if(H)try{const ye=localStorage.getItem("currentBranch")||"All",Ae=ye==="All Branches"||ye==="All"?"All":ye,Re=await le.get(`/fees/student-details/${H.student_id}?branch=${Ae}`);L(Re.data.installments||[])}catch(ye){console.error("Error fetching installments:",ye),L([])}else L([]);qt(),ie("0"),P(0),X({})})()},[H]),x.useEffect(()=>{if(!g||g.length===0){se({totalPaids:0,totalDue:0,currentDue:0});return}const ce=g.filter(Pe=>Pe.paid).reduce((Pe,ke)=>Pe+(ke.paidAmount||ke.payable),0),ye=g.filter(Pe=>!Pe.paid),Ae=ye.reduce((Pe,ke)=>Pe+ke.payable,0),Re=ye.length>0?ye[0].payable:0;se({totalPaids:ce,totalDue:Ae,currentDue:Re})},[g]);const et=ce=>{V(ye=>ye.includes(ce)?ye.filter(Re=>Re<ce):[...ye,ce].sort((Re,Pe)=>Re-Pe))},Qt=()=>{if(q==="0"){P(0),X({});return}const ce=U.find(ke=>ke.title===q);if(!ce){P(0),X({});return}let ye=0;const Ae={},Re=g.filter(ke=>ee.includes(ke.sr));console.log("DEBUG: Applying Concession:",ce),console.log("DEBUG: Selected Items:",Re);const Pe=[];for(const ke of Re){const We=ce.items.find(ut=>ut.fee_type_id===ke.fee_type_id);if(console.log(`DEBUG: Checking item ${ke.title} (FeeTypeID: ${ke.fee_type_id}) -> Match:`,We),We){if((ke.concession||0)>0){console.log(`DEBUG: Skipping ${ke.title} - Already has concession: ${ke.concession}`);continue}if(ke.due_date&&Ne>ke.due_date){console.log(`DEBUG: Skipping ${ke.title} - Payment Date (${Ne}) is after Due Date (${ke.due_date})`),Pe.push(`${ke.title} (Due: ${ke.due_date})`);continue}const ut=ke.dueAmount!==void 0&&ke.dueAmount>0?ke.dueAmount:ke.payable;let kt=0;ce.is_percentage?kt=ut*(We.percentage/100):kt=Math.min(ut,We.percentage),kt=Math.round(kt),Ae[ke.sr]=kt,ye+=kt}}console.log("DEBUG: Total Discount:",ye),X(Ae),P(ye),Pe.length>0&&alert(`Concession was NOT applied to the following installments because the Payment Date (${Ne}) is after the Due Date:

- ${Pe.join(`
- `)}`)},dt=g.filter(ce=>ee.includes(ce.sr)),Ct=dt.reduce((ce,ye)=>{const Ae=ye.dueAmount!==void 0&&ye.dueAmount>0?ye.dueAmount:ye.payable;return ce+Ae},0),bt=Ct-de,ys=bt-Number(oe);x.useEffect(()=>{ue(String(bt>0?bt:0))},[bt,ee]);const qt=()=>{V([]),ie("0"),P(0),X({}),ue("0"),k(""),J(""),Y("Cash"),$e(new Date().toISOString().split("T")[0])},an=async()=>{var ce,ye;if(!H||dt.length===0){alert("Please select a student and at least one installment to pay.");return}if(!T.trim()){alert("Please enter School Receipt No");return}try{let Ae=Number(oe);const Re=dt.map(Ut=>{const Wn=C[Ut.sr]||0;let ws=Ut.dueAmount!==void 0&&Ut.dueAmount>0?Ut.dueAmount:Ut.payable;const Ns=Math.max(0,ws-Wn),Kt=Math.min(Ns,Ae);return Ae-=Kt,{student_fee_id:Ut.student_fee_id,amount:Kt,concession_amount:Wn}}),Pe=localStorage.getItem("currentBranch")||"All",ke=Pe==="All Branches"||Pe==="All"?"All":Pe,ut=(await le.post(`/fees/payment?branch=${ke}`,{student_id:H.student_id,amount_paid:Number(oe),payment_mode:W,payment_date:Ne,note:G,receipt_no:T,fee_allocations:Re})).data.receipt_no,kt={studentName:H.name,admissionNo:H.admNo,className:H.class,receiptNo:ut,paymentDate:Ne,paymentMode:W,paymentNote:G,items:dt,amount:Ct,concession:de,payable:Number(oe)};y(kt),w(!0);const _n=new URLSearchParams;p&&_n.append("class",p),v&&_n.append("section",v),_n.append("branch",ke);const bs=(await le.get(`/fees/students?${_n}`)).data;c(Array.isArray(bs)?bs:bs.students||[]);const js=await le.get(`/fees/student-details/${H.student_id}?branch=${ke}`);L(js.data.installments||[])}catch(Ae){console.error("Error recording payment:",Ae),alert(((ye=(ce=Ae.response)==null?void 0:ce.data)==null?void 0:ye.error)||"Failed to record payment")}},vs=()=>{w(!1),y(null),qt()},Jt=()=>n.jsx("span",{className:"font-sans",children:""});return n.jsxs("div",{className:"container-fluid mx-auto bg-gray-50",children:[n.jsx(Wh,{navigateTo:a}),n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[n.jsx(Jt,{}),"Take Fee"]}),n.jsxs("div",{className:"p-4 border rounded-lg shadow-sm bg-violet-50/50 space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[n.jsx("input",{type:"text",placeholder:"Search Adm No or Name...",value:F,onChange:ce=>R(ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500 text-sm"}),n.jsxs("select",{value:p,onChange:ce=>{f(ce.target.value),A("")},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500 text-sm",children:[n.jsx("option",{value:"",children:"-- Select Class --"}),d.map(ce=>n.jsx("option",{value:ce,children:ce},ce))]}),n.jsxs("select",{value:v,onChange:ce=>A(ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500 text-sm",children:[n.jsx("option",{value:"",children:"-- Select Section --"}),n.jsx("option",{value:"A",children:"A"}),n.jsx("option",{value:"B",children:"B"}),n.jsx("option",{value:"C",children:"C"})]}),n.jsxs("select",{value:$,onChange:ne,disabled:!H,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500 text-sm",children:[n.jsx("option",{value:"",children:"-- Select Fee Type --"}),Q.map(ce=>n.jsx("option",{value:ce.id,children:ce.fee_type},ce.id))]})]}),n.jsx("div",{children:n.jsxs("select",{value:S||"",onChange:ce=>b(Number(ce.target.value)||null),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500 text-sm",children:[n.jsx("option",{value:"",children:"-- Select Student --"}),o.map(ce=>n.jsxs("option",{value:ce.student_id,children:[ce.name," (",ce.admNo,")"]},ce.student_id))]})}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{className:"text-sm px-3 py-1.5 border rounded-md hover:bg-gray-100",children:"Download QR"}),n.jsx("button",{className:"text-sm px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Student"})]})]}),H&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:[n.jsx(ir,{title:"Total Paids",value:h.totalPaids.toLocaleString(),bgColor:"bg-green-100",textColor:"text-green-800",icon:n.jsx(Jt,{})}),n.jsx(ir,{title:"Current Due",value:h.currentDue.toLocaleString(),bgColor:"bg-blue-100",textColor:"text-blue-800",icon:n.jsx(Jt,{})}),n.jsx(ir,{title:"Total Due",value:h.totalDue.toLocaleString(),bgColor:"bg-orange-100",textColor:"text-orange-800",icon:n.jsx(Jt,{})}),n.jsx(ir,{title:"Refund Amount",value:"0",bgColor:"bg-red-100",textColor:"text-red-800",icon:n.jsx(Jt,{})}),n.jsx(ir,{title:"Voucher Due",value:"0",bgColor:"bg-indigo-100",textColor:"text-indigo-800",icon:n.jsx(Jt,{})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h4",{className:"font-semibold text-gray-700",children:["Details ",n.jsx("a",{href:"#",className:"text-blue-500 text-sm font-normal hover:underline",children:"show student details  "})]}),n.jsx("div",{className:"flex items-center space-x-2"})]}),n.jsxs("div",{className:"border rounded-lg overflow-hidden shadow-sm",children:[n.jsxs("div",{className:"bg-blue-500 text-white px-4 py-2 flex justify-between items-center",children:[n.jsxs("h4",{className:"font-semibold relative",children:["Installment",g.length>0&&n.jsx("span",{className:"absolute -top-2 -right-5 bg-orange-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:g.length})]}),n.jsx("button",{className:"bg-orange-400 text-white px-3 py-1 text-sm rounded-md hover:bg-orange-500",children:"Print / Cancel"})]}),n.jsx("div",{className:"overflow-x-auto max-h-96",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 sticky top-0",children:n.jsxs("tr",{className:"bg-gray-100 sticky top-0",children:[n.jsx("th",{className:"px-2 py-2 border w-12"}),n.jsx("th",{className:"px-2 py-2 border w-12",children:"Sr."}),n.jsx("th",{className:"px-2 py-2 border text-left",children:"Title"}),n.jsx("th",{className:"px-2 py-2 border text-left",children:"Details"})]})}),n.jsx("tbody",{children:H?O.length>0?O.map((ce,ye)=>{const Ae=ce.paid;let Re=!1;return Ae?Re=!1:O.slice(0,ye).every(ke=>ke.paid||ee.includes(ke.sr))||(Re=!0),n.jsx(Gh,{installment:ce,isSelected:ee.includes(ce.sr),onSelect:et,isDisabled:Re},ce.sr)}):n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"text-center p-4 text-gray-500",children:"No installments found for this fee type."})}):n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"text-center p-4 text-gray-500",children:"Please select a student to view installments."})})})]})})]})]}),n.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.jsxs("div",{className:"border rounded-lg p-4 space-y-3 bg-gray-50/50 shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h3",{className:"font-semibold text-gray-800",children:["Fee Structure ",n.jsx("a",{href:"#",className:"text-blue-500 text-sm font-normal hover:underline",children:"Get Help"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsxs("select",{value:q,onChange:ce=>ie(ce.target.value),className:"text-sm border rounded-l-md p-1.5 focus:ring-violet-500 focus:border-violet-500",disabled:!H,children:[n.jsx("option",{value:"0",children:"Select Concession"}),U.filter(ce=>ce.show_in_payment).map((ce,ye)=>n.jsx("option",{value:ce.title,children:ce.title},ye))]}),n.jsx("button",{onClick:Qt,className:"bg-green-500 text-white px-3 py-1.5 text-sm rounded-r-md hover:bg-green-600",disabled:!H,children:"Apply"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm bg-white",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"border p-2 w-10",children:n.jsx("button",{className:"w-6 h-6 bg-green-500 text-white rounded hover:bg-green-600 flex items-center justify-center text-sm",children:"+"})}),n.jsx("th",{className:"border p-2 text-left font-medium text-gray-600",children:"Title"}),n.jsx("th",{className:"border p-2 text-right font-medium text-gray-600",children:"Payable"}),n.jsx("th",{className:"border p-2 text-right font-medium text-gray-600",children:"Paid"}),n.jsx("th",{className:"border p-2 text-right font-medium text-gray-600",children:"Due"}),n.jsx("th",{className:"border p-2 w-32 font-medium text-gray-600",children:"+ Extra Charge"})]})}),n.jsx("tbody",{children:dt.length>0?dt.map(ce=>{const ye=ce.dueAmount!==void 0&&ce.dueAmount>0?ce.dueAmount:ce.payable,Ae=ce.paidAmount||0,Re=ce.dueAmount||0;return n.jsxs("tr",{children:[n.jsx("td",{className:"border p-2"}),n.jsx("td",{className:"border p-2",children:ce.title}),n.jsx("td",{className:"border p-2 text-right",children:ye.toFixed(0)}),n.jsx("td",{className:"border p-2 text-right",children:Ae.toFixed(0)}),n.jsx("td",{className:"border p-2 text-right",children:Re.toFixed(0)}),n.jsx("td",{className:"border p-2"})]},ce.sr)}):n.jsx("tr",{children:n.jsx("td",{className:"border p-2 h-8 text-center text-gray-400",colSpan:6,children:"Select installments to pay"})})})]})}),n.jsxs("div",{className:"space-y-2 pt-4",children:[n.jsxs("div",{className:"flex justify-between items-center text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Amount"}),n.jsx("span",{className:"font-semibold text-gray-800",children:Ct.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between items-center text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Concession"}),n.jsx("span",{className:"font-semibold text-gray-800",children:de.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold border-t pt-2",children:[n.jsx("span",{className:"text-gray-800",children:"Payable(Amount - Concession)"}),n.jsx("span",{className:"font-semibold text-gray-800",children:bt.toLocaleString()})]}),n.jsxs("div",{className:"flex justify-between items-center text-sm border-t pt-2",children:[n.jsx("span",{className:"text-gray-600",children:"Paid"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"text",value:oe,onChange:ce=>ue(ce.target.value),className:"w-24 px-2 py-1 border border-gray-300 rounded-md shadow-sm text-right focus:outline-none focus:ring-violet-500 focus:border-violet-500"}),n.jsx("button",{className:"ml-2 px-3 py-1 bg-green-500 text-white rounded-md text-lg font-bold hover:bg-green-600",children:"="})]})]}),n.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold text-red-600 border-t pt-2",children:[n.jsx("span",{children:"Due (Payable - Paid)"}),n.jsx("span",{children:ys.toLocaleString()})]})]})]}),n.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-gray-50/50 shadow-sm",children:[n.jsx("div",{className:"text-center text-sm text-orange-600 bg-orange-100 p-2 rounded-md",children:'Hit "ENTER" or Equal(=) button after entering "Paid" amount'}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Mode*"}),n.jsxs("select",{value:W,onChange:ce=>Y(ce.target.value),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500",children:[n.jsx("option",{children:"Cash"})," ",n.jsx("option",{children:"Card"})," ",n.jsx("option",{children:"Online"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Date*"}),n.jsx("input",{type:"date",value:Ne,onChange:ce=>$e(ce.target.value),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"School Receipt No*"}),n.jsx("input",{type:"text",value:T,onChange:ce=>k(ce.target.value),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Note"}),n.jsx("input",{type:"text",value:G,onChange:ce=>J(ce.target.value),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500"})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{id:"keep-details",type:"checkbox",className:"h-4 w-4 text-violet-600 border-gray-300 rounded focus:ring-violet-500"}),n.jsx("label",{htmlFor:"keep-details",className:"ml-2 block text-sm text-gray-900",children:"Keep same payment detail for the next fee payment"})]}),n.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[n.jsx("button",{onClick:an,className:"px-4 py-2 text-sm font-medium text-white bg-violet-600 rounded-md hover:bg-violet-700 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500",disabled:!H,children:"Take Fee"}),n.jsx("button",{onClick:qt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400",children:"Reset"})]})]})]})]})})}),D&&N&&n.jsx(Fu,{onClose:vs,receiptData:N})]})},Qh=({name:a,icon:o,onClick:c})=>n.jsxs("button",{onClick:c,disabled:!c,className:"bg-white p-4 rounded-lg shadow-sm flex flex-col items-center justify-center text-center h-28 hover:shadow-md transition-shadow cursor-pointer w-full disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("img",{src:o,alt:a,className:"h-10 w-10 object-contain mb-2"}),n.jsx("span",{className:"text-xs font-medium text-gray-700",children:a})]}),qh=({navigateTo:a})=>{const o=[{name:"Calendar",icon:"https://cdn-icons-png.flaticon.com/512/3652/3652191.png"},{name:"Document",icon:"https://cdn-icons-png.flaticon.com/512/888/888815.png"},{name:"Download",icon:"https://cdn-icons-png.flaticon.com/512/1063/1063342.png"},{name:"Inquiry",icon:"https://cdn-icons-png.flaticon.com/512/3914/3914104.png"},{name:"Hostel",icon:"https://cdn-icons-png.flaticon.com/512/1023/1023253.png"},{name:"Leave",icon:"https://cdn-icons-png.flaticon.com/512/3125/3125838.png"},{name:"Library",icon:"https://cdn-icons-png.flaticon.com/512/2702/2702136.png"},{name:"Student Attendance",icon:"https://cdn3d.iconscout.com/3d/premium/thumb/class-attendance-3d-icon-png-download-12031395.png",page:"student-attendance"},{name:"Student",icon:"https://cdn-icons-png.flaticon.com/512/3135/3135773.png",page:"student-administration"},{name:"Summary",icon:"https://cdn-icons-png.flaticon.com/512/3135/3135695.png"},{name:"Attendance(Stf)",icon:"https://cdn-icons-png.flaticon.com/512/4345/4345265.png"},{name:"Staffs",icon:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png"},{name:"Team",icon:"https://cdn-icons-png.flaticon.com/512/3303/3303953.png"},{name:"Transport",icon:"https://cdn-icons-png.flaticon.com/512/3091/3091802.png"},{name:"Alumni",icon:"https://cdn-icons-png.flaticon.com/512/2072/2072130.png"},{name:"Post Jobs",icon:"https://cdn-icons-png.flaticon.com/512/3135/3135672.png"},{name:"Survey",icon:"https://cdn-icons-png.flaticon.com/512/3135/3135722.png"},{name:"Helpdesk",icon:"https://cdn-icons-png.flaticon.com/512/3135/3135706.png"}];return n.jsx("div",{className:"p-5 md:p-8",children:n.jsxs("div",{className:"mb-8",children:[n.jsxs("h3",{className:"flex items-center text-sm font-semibold text-gray-600 mb-3",children:[n.jsx(Nh,{className:"w-5 h-5 mr-2"}),"Take control of your school"]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:o.map(c=>n.jsx(Qh,{name:c.name,icon:c.icon,onClick:c.page?()=>a(c.page):void 0},c.name))})]})})},Jh=({navigateTo:a})=>n.jsx("div",{className:"bg-[#f0f5f9] min-h-full",children:n.jsx(qh,{navigateTo:a})}),Io=({pageTitle:a})=>n.jsx("div",{className:"flex items-center justify-center h-full p-4 bg-gray-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-4xl font-bold text-gray-700 tracking-tight",children:a}),n.jsx("p",{className:"mt-4 text-lg text-gray-500",children:"This page is under construction."}),n.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Please check back later!"})]})}),Kh=({activeTab:a,onTabChange:o,onAction:c})=>{const[d,u]=x.useState(null),p="px-3 py-1.5 text-sm border border-gray-300 bg-white text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500",f="px-3 py-1.5 text-sm border border-transparent bg-sky-600 text-white rounded-md",v=({title:S,children:b})=>{const F=d===S;return n.jsxs("div",{className:"relative inline-block text-left",children:[n.jsxs("button",{type:"button",className:`${p} flex items-center`,onClick:()=>u(F?null:S),onBlur:()=>setTimeout(()=>u(null),200),children:[S,n.jsx($n,{className:"w-4 h-4 ml-1"})]}),F&&n.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:n.jsx("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:b})})]})},A=({children:S,action:b})=>n.jsx("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:F=>{F.preventDefault(),b&&c(b)},children:S});return n.jsx("div",{className:"bg-white p-3 border-b",children:n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[n.jsx("div",{children:n.jsxs("h2",{className:"text-lg font-semibold text-gray-700",children:["STUDENT ATTENDANCE",n.jsx("span",{className:"text-gray-400 mx-2",children:"/"}),n.jsx("span",{className:"text-sm bg-gray-200 text-gray-600 font-medium px-2 py-1 rounded",children:"Non Biometric"})]})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("button",{className:a==="take"?f:p,onClick:()=>o("take"),children:"Take Attendance"}),n.jsx("button",{className:a==="register"?f:p,onClick:()=>o("register"),children:"Register View"}),n.jsxs(v,{title:"Reports",children:[n.jsx(A,{action:"Absent Report",children:"Absent Report"}),n.jsx(A,{action:"SMS",children:"Send SMS To All Present Students"}),n.jsx(A,{action:"Month Report",children:"Month Report"})]})]})]})})},eu=()=>{const[a,o]=x.useState([]),[c,d]=x.useState({}),[u,p]=x.useState(""),[f,v]=x.useState(""),[A,S]=x.useState(new Date().toISOString().split("T")[0]),[b,F]=x.useState(!1),[R,H]=x.useState([]),[g,L]=x.useState(!1),[h,se]=x.useState(0),[ee,V]=x.useState(null);x.useEffect(()=>{le.get("/classes").then(C=>H(C.data.classes||[])).catch(C=>console.error("Failed to load classes",C))},[]);const q=async()=>{if(!u){alert("Please select a class");return}F(!0);try{const C=localStorage.getItem("currentBranch")||"All",X=C==="All Branches"||C==="All"?"All":C,oe=await le.get("/attendance",{params:{class:u,section:f,date:A,branch:X}}),ue=oe.data.students||[],U=oe.data.attendance||{};o(ue),se(oe.data.class_update_count||0),V(oe.data.last_modified);const re={};ue.forEach(pe=>{const $=U[pe.student_id]||"Present";re[pe.student_id]=$}),d(re);const Q=Object.keys(U).length>0;L(Q)}catch(C){console.error("Error fetching students:",C),alert("Failed to fetch students")}finally{F(!1)}},ie=(C,X)=>{d(oe=>({...oe,[C]:X}))},de=C=>{const X=a.reduce((oe,ue)=>(oe[ue.student_id]=C,oe),{});d(X)},P=async()=>{F(!0);try{const C={date:A,attendance:Object.entries(c).map(([X,oe])=>({student_id:parseInt(X),status:oe}))};await le.post("/attendance",C),alert("Attendance saved successfully!"),q()}catch(C){console.error("Error saving attendance:",C),alert("Failed to save attendance")}finally{F(!1)}};return n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-md border",children:[n.jsx("div",{className:"bg-sky-600 text-white font-semibold p-3 rounded-t-lg",children:"TAKE ATTENDANCE"}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Attendance Date"}),n.jsx("input",{type:"date",value:A,onChange:C=>S(C.target.value),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500 text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Class"}),n.jsxs("select",{value:u,onChange:C=>p(C.target.value),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500 text-sm",children:[n.jsx("option",{value:"",children:"--Select Class--"}),R.map(C=>n.jsx("option",{value:C.class_name,children:C.class_name},C.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Section"}),n.jsxs("select",{value:f,onChange:C=>v(C.target.value),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500 text-sm",children:[n.jsx("option",{value:"",children:"--All Sections--"}),n.jsx("option",{value:"A",children:"A"}),n.jsx("option",{value:"B",children:"B"}),n.jsx("option",{value:"C",children:"C"})]})]}),n.jsx("button",{onClick:q,disabled:b,className:"bg-violet-600 text-white px-4 py-2 rounded-md hover:bg-violet-700 text-sm disabled:bg-gray-400",children:b?"Loading...":"Get Students"})]}),a.length>0&&n.jsxs("div",{className:"overflow-x-auto border rounded-lg",children:[n.jsxs("div",{className:"p-2 bg-gray-50 border-b flex gap-2",children:[n.jsx("button",{onClick:()=>de("Present"),className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded border border-green-200 hover:bg-green-200",children:"Mark All Present"}),n.jsx("button",{onClick:()=>de("Holiday"),className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded border border-gray-200 hover:bg-gray-200",children:"Mark All Holiday"}),n.jsx("button",{onClick:()=>de("Sunday"),className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded border border-red-200 hover:bg-red-200",children:"Mark All Sunday"})]}),n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Roll No."}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Adm No."}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Student Name"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Father Name"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Phone"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(C=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:C.rollNo}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:C.admNo}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-medium text-gray-900",children:C.name}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-500",children:C.father}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-500",children:C.smsNo||C.fatherMobile}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:n.jsx("div",{className:"flex items-center space-x-3",children:[{val:"Present",label:"P",color:"green"},{val:"Absent",label:"A",color:"red"},{val:"Holiday",label:"H",color:"gray"},{val:"Sunday",label:"S",color:"pink"}].map(X=>n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"radio",name:`status-${C.student_id}`,checked:c[C.student_id]===X.val,onChange:()=>ie(C.student_id,X.val),className:`h-4 w-4 text-${X.color}-600 border-gray-300 focus:ring-${X.color}-500`}),n.jsx("span",{className:`ml-1 text-${X.color}-700 font-medium`,children:X.label})]},X.val))})})]},C.student_id))})]}),n.jsx("div",{className:"p-4 bg-gray-50 border-t flex justify-end",children:n.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.jsx("button",{onClick:P,disabled:b,className:`${g?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"} text-white px-6 py-2 rounded-md text-sm font-semibold disabled:bg-gray-400`,children:b?g?"Updating...":"Saving...":g?`Update Attendance (Updates: ${h})`:"Save Attendance"}),g&&ee&&n.jsxs("div",{className:"text-xs text-gray-500",children:["Last Modified: ",new Date(ee).toLocaleString()]})]})})]})]})]})})},Xh=()=>{const[a,o]=x.useState(""),[c,d]=x.useState(""),[u,p]=x.useState(new Date().getMonth()+1),[f,v]=x.useState(new Date().getFullYear()),[A,S]=x.useState([]),[b,F]=x.useState(null),[R,H]=x.useState(!1);x.useEffect(()=>{le.get("/classes").then(V=>S(V.data.classes||[])).catch(V=>console.error("Failed to load classes",V))},[]);const g=async()=>{if(!a){alert("Please select a class");return}H(!0);try{const V=localStorage.getItem("currentBranch")||"All",q=V==="All Branches"||V==="All"?"All":V,ie=await le.get("/attendance",{params:{class:a,section:c,month:u,year:f,branch:q}});F(ie.data)}catch(V){console.error("Error fetching report:",V),alert("Failed to fetch report")}finally{H(!1)}},L=new Date(f,u,0).getDate(),h=Array.from({length:L},(V,q)=>q+1),se=V=>{switch(V){case"Present":return"bg-green-100 text-green-800";case"Absent":return"bg-red-100 text-red-800";case"Leave":return"bg-yellow-100 text-yellow-800";case"Holiday":return"bg-gray-100 text-gray-800";case"Sunday":return"bg-pink-100 text-pink-800";case"Weekoff":return"bg-blue-100 text-blue-800";default:return""}},ee=V=>V?V.charAt(0):"-";return n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-md border",children:[n.jsx("div",{className:"bg-sky-600 text-white font-semibold p-3 rounded-t-lg",children:"ATTENDANCE REGISTER"}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Class"}),n.jsxs("select",{value:a,onChange:V=>o(V.target.value),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"",children:"--Select Class--"}),A.map(V=>n.jsx("option",{value:V.class_name,children:V.class_name},V.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Section"}),n.jsxs("select",{value:c,onChange:V=>d(V.target.value),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"",children:"--All Sections--"}),n.jsx("option",{value:"A",children:"A"}),n.jsx("option",{value:"B",children:"B"}),n.jsx("option",{value:"C",children:"C"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Month"}),n.jsx("select",{value:u,onChange:V=>p(parseInt(V.target.value)),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:Array.from({length:12},(V,q)=>q+1).map(V=>n.jsx("option",{value:V,children:new Date(0,V-1).toLocaleString("default",{month:"long"})},V))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Year"}),n.jsx("input",{type:"number",value:f,onChange:V=>v(parseInt(V.target.value)),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),n.jsx("button",{onClick:g,disabled:R,className:"bg-violet-600 text-white px-4 py-2 rounded-md hover:bg-violet-700 text-sm disabled:bg-gray-400",children:R?"Loading...":"Get Register"})]}),b&&n.jsx("div",{className:"overflow-x-auto border rounded-lg mt-4",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-500 sticky left-0 bg-gray-50 z-10 w-48",children:"Student"}),h.map(V=>{const ie=new Date(f,u-1,V).toLocaleDateString("en-US",{weekday:"short"});return n.jsx("th",{className:"px-1 py-2 text-center font-medium text-gray-500 w-8 border-l border-gray-100",children:n.jsxs("div",{className:"flex flex-col items-center justify-center leading-tight",children:[n.jsx("span",{children:V}),n.jsx("span",{className:"text-[10px] font-normal text-gray-400",children:ie})]})},V)}),n.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-700 bg-blue-50 border-l border-blue-100",children:"Present"}),n.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-700 bg-blue-50",children:"Absent"}),n.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-700 bg-blue-50",children:"Total Working Days"}),n.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-700 bg-blue-50",children:"Attendance %"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.students.map(V=>{const q=b.attendance[V.student_id]||{};let ie=0,de=0;h.forEach(X=>{const oe=`${f}-${String(u).padStart(2,"0")}-${String(X).padStart(2,"0")}`,ue=q[oe];ue==="Present"&&ie++,ue==="Absent"&&de++});const P=ie+de,C=P>0?(ie/P*100).toFixed(1):"0.0";return n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsxs("td",{className:"px-2 py-1 whitespace-nowrap font-medium text-gray-900 sticky left-0 bg-white z-10 border-r shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)]",children:[n.jsx("div",{children:V.name}),n.jsx("div",{className:"text-[10px] text-gray-500",children:V.admNo})]}),h.map(X=>{const oe=`${f}-${String(u).padStart(2,"0")}-${String(X).padStart(2,"0")}`,ue=q[oe];return n.jsx("td",{className:`px-1 py-1 text-center border-l border-gray-100 ${se(ue)}`,children:ee(ue)},X)}),n.jsx("td",{className:"px-2 py-1 text-center font-bold text-green-700 bg-blue-50 border-l border-blue-100",children:ie}),n.jsx("td",{className:"px-2 py-1 text-center font-bold text-red-700 bg-blue-50",children:de}),n.jsx("td",{className:"px-2 py-1 text-center font-semibold text-gray-700 bg-blue-50",children:P}),n.jsxs("td",{className:"px-2 py-1 text-center font-bold text-blue-700 bg-blue-50",children:[C,"%"]})]},V.student_id)})})]})})]})]})})},Zh=()=>{const[a,o]=x.useState("today"),[c,d]=x.useState(new Date().toISOString().split("T")[0]),[u,p]=x.useState(""),[f,v]=x.useState(""),[A,S]=x.useState(""),[b,F]=x.useState([]),[R,H]=x.useState(null),[g,L]=x.useState([]),[h,se]=x.useState(!1),[ee,V]=x.useState([]);x.useEffect(()=>{le.get("/classes").then(C=>V(C.data.classes||[])).catch(C=>console.error("Failed to load classes",C))},[]);const q=async()=>{if(!A){alert("Please enter a search term");return}se(!0);try{const C=localStorage.getItem("currentBranch")||"All",X=C==="All Branches"||C==="All"?"All":C,ue=(await le.get("/students",{params:{search:A,branch:X}})).data.students||[];ue.length===0?(alert("No students found"),F([])):ue.length===1?(F([]),ie(ue[0])):(F(ue),H(null))}catch(C){console.error("Error searching students:",C),alert("Failed to search students")}finally{se(!1)}},ie=C=>{H(C),F([]),de(C.student_id)},de=async C=>{se(!0);try{const oe=(await le.get("/attendance",{params:{student_id:C}})).data.attendance||{},ue=[];oe[C]&&Object.entries(oe[C]).forEach(([U,re])=>{ue.push({date:U,status:re})}),ue.sort((U,re)=>new Date(re.date).getTime()-new Date(U.date).getTime()),L(ue)}catch(X){console.error("Error fetching report:",X),alert("Failed to fetch report")}finally{se(!1)}},P=async()=>{se(!0),L([]);try{const C=localStorage.getItem("currentBranch")||"All",oe={date:c,branch:C==="All Branches"||C==="All"?"All":C};u&&(oe.class=u);const ue=await le.get("/attendance",{params:oe}),U=ue.data.students||[],re=ue.data.attendance||{},Q=U.filter(pe=>{const $=re[pe.student_id];return $==="Absent"||$==="Leave"}).map(pe=>({...pe,status:re[pe.student_id]}));L(Q)}catch(C){console.error("Error fetching report:",C),alert("Failed to fetch report")}finally{se(!1)}};return n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-md border",children:[n.jsxs("div",{className:"bg-sky-600 text-white font-semibold p-3 rounded-t-lg flex justify-between items-center",children:[n.jsx("span",{children:"ABSENT REPORT"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>{o("today"),L([]),H(null)},className:`px-3 py-1 text-xs rounded ${a==="today"?"bg-white text-sky-600":"bg-sky-700 text-white"}`,children:"Today's Absentees"}),n.jsx("button",{onClick:()=>{o("student"),L([])},className:`px-3 py-1 text-xs rounded ${a==="student"?"bg-white text-sky-600":"bg-sky-700 text-white"}`,children:"Student Report"})]})]}),n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsx("div",{className:"flex flex-wrap gap-4 items-end",children:a==="today"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),n.jsx("input",{type:"date",value:c,onChange:C=>d(C.target.value),className:"mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Class (Optional)"}),n.jsxs("select",{value:u,onChange:C=>p(C.target.value),className:"mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm w-40",children:[n.jsx("option",{value:"",children:"All Classes"}),ee.map(C=>n.jsx("option",{value:C.class_name,children:C.class_name},C.id))]})]}),n.jsx("button",{onClick:P,disabled:h,className:"bg-violet-600 text-white px-4 py-2 rounded-md hover:bg-violet-700 text-sm disabled:bg-gray-400",children:h?"Searching...":"Search"})]}):n.jsxs("div",{className:"w-full space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded-md border",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Find Student by Class & Section"}),n.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Class"}),n.jsxs("select",{value:u,onChange:C=>{p(C.target.value),C.target.value},className:"mt-1 w-40 px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"",children:"--Select--"}),ee.map(C=>n.jsx("option",{value:C.class_name,children:C.class_name},C.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Section"}),n.jsxs("select",{value:f,onChange:C=>v(C.target.value),className:"mt-1 w-40 px-3 py-2 border border-gray-300 rounded-md text-sm",children:[n.jsx("option",{value:"",children:"--Select--"}),n.jsx("option",{value:"A",children:"A"}),n.jsx("option",{value:"B",children:"B"}),n.jsx("option",{value:"C",children:"C"})]})]}),n.jsx("button",{onClick:async()=>{if(!u){alert("Please select a class");return}se(!0);try{const C=localStorage.getItem("currentBranch")||"All",oe={class:u,branch:C==="All Branches"||C==="All"?"All":C};f&&(oe.section=f);const ue=await le.get("/students",{params:oe});F(ue.data.students||[]),H(null)}catch(C){console.error(C),alert("Error fetching students")}finally{se(!1)}},disabled:h,className:"bg-violet-600 text-white px-4 py-2 rounded-md hover:bg-violet-700 text-sm disabled:bg-gray-400",children:"Get Students"})]})]}),n.jsxs("div",{className:"relative flex items-center py-2",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-400 text-xs",children:"OR SEARCH BY DETAILS"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("div",{className:"flex gap-2 items-end",children:[n.jsxs("div",{className:"flex-grow",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Search Student (Name, Adm No, Phone)"}),n.jsx("input",{type:"text",value:A,onChange:C=>S(C.target.value),placeholder:"Enter Name, Admission No, or Phone",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm",onKeyDown:C=>C.key==="Enter"&&q()})]}),n.jsx("button",{onClick:q,disabled:h,className:"bg-violet-600 text-white px-4 py-2 rounded-md hover:bg-violet-700 text-sm disabled:bg-gray-400",children:"Find"})]}),b.length>0&&n.jsx("div",{className:"mt-2 border rounded-md max-h-40 overflow-y-auto bg-gray-50",children:b.map(C=>n.jsxs("div",{onClick:()=>ie(C),className:"p-2 hover:bg-violet-100 cursor-pointer border-b last:border-b-0 text-sm",children:[n.jsxs("span",{className:"font-semibold",children:[C.first_name," ",C.last_name]}),n.jsxs("span",{className:"text-gray-500 ml-2",children:["(",C.admission_no,") - Class ",C.class," ",C.section?`- Sec ${C.section}`:""]})]},C.student_id))}),R&&n.jsxs("div",{className:"mt-6 bg-white border rounded-lg shadow-sm overflow-hidden",children:[n.jsxs("div",{className:"bg-violet-50 px-4 py-3 border-b border-violet-100 flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-semibold text-violet-800",children:"Student Profile"}),n.jsx("button",{onClick:()=>H(null),className:"text-sm text-violet-600 hover:text-violet-800 hover:underline",children:"Change Student"})]}),n.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"md:col-span-1 flex flex-col items-center text-center",children:[n.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full mb-3 flex items-center justify-center overflow-hidden border-2 border-white shadow-md",children:R.photo?n.jsx("img",{src:R.photo,alt:R.name,className:"w-full h-full object-cover"}):n.jsx("span",{className:"text-3xl text-gray-400",children:""})}),n.jsx("h2",{className:"text-xl font-bold text-gray-800",children:R.name}),n.jsx("p",{className:"text-sm text-gray-500",children:R.admNo}),n.jsx("div",{className:"mt-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})]}),n.jsxs("div",{className:"md:col-span-3 grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-500 mb-2 uppercase text-xs tracking-wider",children:"Academic Details"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between border-b border-gray-100 py-1",children:[n.jsx("span",{className:"text-gray-600",children:"Class & Section:"}),n.jsxs("span",{className:"font-medium text-gray-900",children:[R.class," - ",R.section||"N/A"]})]}),n.jsxs("div",{className:"flex justify-between border-b border-gray-100 py-1",children:[n.jsx("span",{className:"text-gray-600",children:"Roll Number:"}),n.jsx("span",{className:"font-medium text-gray-900",children:R.rollNo||"-"})]}),n.jsxs("div",{className:"flex justify-between border-b border-gray-100 py-1",children:[n.jsx("span",{className:"text-gray-600",children:"Admission Date:"}),n.jsx("span",{className:"font-medium text-gray-900",children:R.admission_date||"-"})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-500 mb-2 uppercase text-xs tracking-wider",children:"Personal Details"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between border-b border-gray-100 py-1",children:[n.jsx("span",{className:"text-gray-600",children:"Father Name:"}),n.jsx("span",{className:"font-medium text-gray-900",children:R.father||"-"})]}),n.jsxs("div",{className:"flex justify-between border-b border-gray-100 py-1",children:[n.jsx("span",{className:"text-gray-600",children:"Mobile:"}),n.jsx("span",{className:"font-medium text-gray-900",children:R.smsNo||R.fatherMobile||"-"})]}),n.jsxs("div",{className:"flex justify-between border-b border-gray-100 py-1",children:[n.jsx("span",{className:"text-gray-600",children:"DOB:"}),n.jsx("span",{className:"font-medium text-gray-900",children:R.dob||"-"})]})]})]}),n.jsxs("div",{className:"sm:col-span-2 mt-2",children:[n.jsx("h4",{className:"font-semibold text-gray-500 mb-1 uppercase text-xs tracking-wider",children:"Address"}),n.jsx("p",{className:"text-gray-700 bg-gray-50 p-2 rounded border border-gray-100",children:R.address||"No address provided"})]})]})]}),g.length>0&&n.jsxs("div",{className:"bg-gray-50 border-t px-4 py-3 grid grid-cols-2 sm:grid-cols-5 gap-4 text-center",children:[n.jsxs("div",{className:"bg-white p-2 rounded border shadow-sm",children:[n.jsx("div",{className:"text-xs text-gray-500 uppercase font-semibold",children:"Total Days"}),n.jsx("div",{className:"text-xl font-bold text-gray-800",children:g.length})]}),n.jsxs("div",{className:"bg-white p-2 rounded border shadow-sm",children:[n.jsx("div",{className:"text-xs text-green-600 uppercase font-semibold",children:"Present"}),n.jsx("div",{className:"text-xl font-bold text-green-700",children:g.filter(C=>C.status==="Present").length})]}),n.jsxs("div",{className:"bg-white p-2 rounded border shadow-sm",children:[n.jsx("div",{className:"text-xs text-red-600 uppercase font-semibold",children:"Absent"}),n.jsx("div",{className:"text-xl font-bold text-red-700",children:g.filter(C=>C.status==="Absent").length})]}),n.jsxs("div",{className:"bg-white p-2 rounded border shadow-sm",children:[n.jsx("div",{className:"text-xs text-yellow-600 uppercase font-semibold",children:"Leave"}),n.jsx("div",{className:"text-xl font-bold text-yellow-700",children:g.filter(C=>C.status==="Leave").length})]}),n.jsxs("div",{className:"bg-white p-2 rounded border shadow-sm",children:[n.jsx("div",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Percentage"}),n.jsxs("div",{className:"text-xl font-bold text-blue-700",children:[g.length>0?Math.round(g.filter(C=>C.status==="Present").length/g.length*100):0,"%"]})]})]})]})]})}),g.length>0?n.jsx("div",{className:"overflow-x-auto border rounded-lg mt-4",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsx("tr",{children:a==="today"?n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Class"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Roll No"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Adm No"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Name"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Father Name"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Phone"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Status"})]}):n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Date"}),n.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-500",children:"Status"})]})})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map((C,X)=>n.jsx("tr",{children:a==="today"?n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:C.class}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:C.rollNo}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:C.admNo}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-medium",children:C.name}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-500",children:C.father}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-gray-500",children:C.smsNo||C.fatherMobile}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${C.status==="Absent"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:C.status})})]}):n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:C.date}),n.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${C.status==="Present"?"bg-green-100 text-green-800":C.status==="Absent"?"bg-red-100 text-red-800":C.status==="Leave"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:C.status})})]})},X))})]})}):!h&&(a==="today"||R)&&n.jsx("div",{className:"text-center text-gray-500 mt-4",children:"No records found"})]})]})})},tu=({navigateTo:a,defaultTab:o="take"})=>{const[c,d]=x.useState(o),u=f=>{f==="Absent Report"?d("absent-report"):f==="Month Report"&&d("register")},p=()=>{switch(c){case"take":return n.jsx(eu,{});case"register":return n.jsx(Xh,{});case"absent-report":return n.jsx(Zh,{});case"today":return n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Today's Report Coming Soon"});default:return n.jsx(eu,{})}};return n.jsxs("div",{className:"h-full overflow-y-auto bg-gray-100",children:[n.jsx(Kh,{activeTab:c,onTabChange:d,onAction:u}),p()]})},ex=({onImportSuccess:a})=>{const[o,c]=x.useState(null),[d,u]=x.useState(""),p=S=>{S.target.files&&S.target.files.length>0&&(c(S.target.files[0]),u(""))},f=async()=>{if(o){const S=new FormData;S.append("file",o),u("Uploading...");try{const b=window.location.hostname==="localhost"?"http://localhost:5001":`http://${window.location.hostname}:5001`,R=(await le.post(`${b}/api/students/upload_csv`,S,{headers:{"Content-Type":"multipart/form-data"}})).data;u(R.message||"Upload successful!"),setTimeout(()=>{a()},1500)}catch(b){if(console.error("Upload error:",b),b.response){console.error("Backend response data:",b.response.data);const F=b.response.data;F.errors&&F.errors.length>0?u(`Upload failed. Errors: ${F.errors.join(", ")}`):u(`Error: ${F.error||F.message||"Upload failed"}`)}else b.request?u("Network error: No response from server. Ensure backend is running."):u(`Error: ${b.message}`)}}else u("Please select a file to upload.")},v=async()=>{var S;try{const b=window.location.hostname==="localhost"?"http://localhost:5001":`http://${window.location.hostname}:5001`,F=await le.get(`${b}/api/students/template`,{responseType:"blob"}),R=window.URL.createObjectURL(new Blob([F.data])),H=document.createElement("a");H.href=R,H.setAttribute("download","student_import_template.xlsx"),document.body.appendChild(H),H.click(),(S=H.parentNode)==null||S.removeChild(H),window.URL.revokeObjectURL(R)}catch(b){console.error("Error downloading template:",b),alert("Failed to download template. Please check if backend is running.")}},A=["Please don't make any changes in given template.","Only 2000 records are accepted in the list at a time.","The data should be in valid format to upload successfully.","Student and father first name is mandatory field to import data.","Mobile no and Adhar no should be in text format.(Setting- Format cells)","Date should be in DD/MM/YYYY Format only using separators (/, - , .)","For Status please enter 0 for new and 1 for Promoted student.","For Gender please enter 1 for male, 2 for female, 3 for other.","Please make a separate file for each class.","Section column is mandatory.","For student type (Enter 1 for day scholar and 2 for hosteller) otherwise considered as day scholar."];return n.jsx("div",{className:"p-4 md:p-6 bg-gray-100",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-md border",children:[n.jsxs("div",{className:"p-4 border-b flex items-center space-x-2",children:[n.jsx(Sh,{className:"w-6 h-6 text-gray-600"}),n.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Import Student Data"}),n.jsx("a",{href:"#",className:"text-sm text-blue-500 hover:underline",children:"Get Help"})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("label",{className:"block text-md font-medium text-gray-800",children:"Browse for the excel sheet:"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsxs("label",{className:"cursor-pointer bg-white border border-gray-300 rounded-l-md px-4 py-2 text-gray-700 hover:bg-gray-50 whitespace-nowrap",children:["Choose File",n.jsx("input",{type:"file",className:"hidden",onChange:p,accept:".csv, .xlsx, .xls"})]}),n.jsx("input",{type:"text",value:o?o.name:"No file chosen",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-r-md bg-gray-50 focus:outline-none"}),n.jsx("button",{onClick:f,className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 whitespace-nowrap",children:"Upload Excel"})]}),d&&n.jsx("p",{className:`mt-2 text-sm ${d.includes("successfully")?"text-green-600":"text-red-600"}`,children:d})]})]}),n.jsx("div",{className:"bg-[#fff0f0] rounded-lg shadow-md border-l-4 border-red-500",children:n.jsxs("div",{className:"p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-red-700 mb-3",children:"Important Instruction"}),n.jsx("p",{className:"text-sm text-gray-800 mb-4",children:"Note: Please read the following instructions:"}),n.jsx("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-700",children:A.map((S,b)=>n.jsx("li",{children:S},b))}),n.jsx("div",{className:"mt-6",children:n.jsxs("button",{onClick:v,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center space-x-2 shadow-md",children:[n.jsx(Ch,{className:"w-5 h-5"}),n.jsx("span",{children:"Download Excel Template"})]})})]})})]})})},Fo="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-violet-500 focus:border-violet-500 text-sm disabled:bg-gray-100 disabled:text-gray-500",Pu="block text-sm font-medium text-gray-700 mb-1",cr=Bo.memo(({title:a,children:o,defaultOpen:c=!1})=>{const[d,u]=x.useState(c);return n.jsxs("div",{className:"md:col-span-4 mt-6 border rounded-lg overflow-hidden shadow-sm bg-white",children:[n.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 cursor-pointer border-b hover:bg-gray-100 transition-colors",onClick:()=>u(!d),children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700 flex items-center",children:a}),n.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:underline font-medium focus:outline-none",children:d?"Collapse":"Expand"})]}),d&&n.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-4",children:o})]})}),xe=Bo.memo(({label:a,name:o,value:c,checked:d,onChange:u,type:p="text",required:f=!1,as:v="input",children:A,disabled:S=!1,placeholder:b,className:F})=>{const R=`field_${o}`;return p==="checkbox"?n.jsxs("div",{className:`flex items-center pt-6 ${F||""}`,children:[n.jsx("input",{type:"checkbox",name:o,id:R,checked:d,onChange:u,className:"h-5 w-5 text-violet-600 border-gray-300 rounded focus:ring-violet-500 cursor-pointer",disabled:S}),n.jsx("label",{htmlFor:R,className:"ml-2 text-sm text-gray-700 cursor-pointer select-none",children:a}),A]}):n.jsxs("div",{className:F,children:[n.jsxs("label",{htmlFor:R,className:Pu,children:[a," ",f&&n.jsx("span",{className:"text-red-500",children:"*"})]}),v==="input"&&n.jsx("input",{type:p,name:o,id:R,value:c||"",onChange:u,className:Fo,disabled:S,placeholder:b}),v==="select"&&n.jsx("select",{name:o,id:R,value:c||"",onChange:u,className:Fo,disabled:S,children:A}),v==="textarea"&&n.jsx("textarea",{name:o,id:R,value:c||"",onChange:u,className:Fo,rows:2,disabled:S,placeholder:b})]})}),Nl=Bo.memo(({title:a,photo:o,onPhotoChange:c,id:d,isViewMode:u})=>n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("label",{className:Pu,children:a}),n.jsx("div",{className:"w-28 h-28 rounded-md bg-gray-100 mb-2 flex items-center justify-center overflow-hidden border-2 border-dashed border-gray-300 hover:border-violet-500 transition-colors",children:o?n.jsx("img",{src:o,alt:a,className:"w-full h-full object-cover"}):n.jsx(Dl,{className:"w-12 h-12 text-gray-400"})}),!u&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"file",id:d,className:"hidden",accept:"image/*",onChange:c}),n.jsx("label",{htmlFor:d,className:"cursor-pointer bg-gray-600 text-white px-3 py-1 rounded-md hover:bg-gray-700 text-xs shadow-sm w-full text-center",children:"Upload"})]})]})),Po=({mode:a,studentData:o,onSave:c,onCancel:d,onEdit:u})=>{const p=x.useRef(null),[f,v]=x.useState([]),[A,S]=x.useState([]),[b,F]=x.useState([]),[R,H]=x.useState([]),g=a==="view",L={admissionNo:"",first_name:"",last_name:"",gender:"",dob:"",Doa:"",BloodGroup:"",Adharcardno:"",Religion:"",phone:"",email:"",address:"",Category:"",class:"",section:"",Roll_Number:"",admission_date:"",status:"Active",MotherTongue:"",Caste:"",StudentType:"",House:"",StudentHeight:"",StudentWeight:"",SamagraId:"",ChildId:"",PEN:"",permanentCity:"",previousSchoolName:"",primaryIncomePerYear:"",secondaryIncomePerYear:"",primaryOfficeAddress:"",secondaryOfficeAddress:"",Hobbies:"",SecondLanguage:"",ThirdLanguage:"",GroupUniqueId:"",serviceNumber:"",EmploymentservingStatus:"",StudentStatus:"",ApaarId:"",Stream:"",EmploymentCategory:"",Fatherfirstname:"",FatherLastName:"",FatherPhone:"",SmsNo:"",FatherEmail:"",PrimaryQualification:"",FatherOccuption:"",FatherCompany:"",FatherDesignation:"",FatherAadhar:"",FatherOrganizationId:"",FatherOtherOrganization:"",Motherfirstname:"",MothermiddleName:"",Motherlastname:"",SecondaryPhone:"",SecondaryEmail:"",SecondaryQualification:"",SecondaryOccupation:"",SecondaryCompany:"",SecondaryDesignation:"",MotherAadhar:"",MotherOrganizationId:"",MotherOtherOrganization:"",GuardianName:"",GuardianRelation:"",GuardianQualification:"",GuardianOccupation:"",GuardianDesignation:"",GuardianDepartment:"",GuardianOfficeAddress:"",GuardianContactNo:"",SchoolName:"",AdmissionNumber:"",TCNumber:"",PreviousSchoolClass:"",AdmissionCategory:"",location:"Hyderabad",branch:"",academic_year:localStorage.getItem("academicYear")||"2025-2026",presentAddress:"",presentCity:"",presentPin:"",permanentAddress:"",permanentCity_ui:"",isSameAddress:!1},[h,se]=x.useState(L),[ee,V]=x.useState(!1);o!=null&&o.branch,h.branch;const q=(y,T,k)=>{const G=T.find(J=>J.branch_name===y);if(G){const J=(G.location_code||"").trim().toUpperCase(),W=k.find(Y=>Y.code.toUpperCase()===J);if(W)return W.name}return""},[ie,de]=x.useState(null),[P,C]=x.useState(null),[X,oe]=x.useState(null),[ue,U]=x.useState(null),[re,Q]=x.useState([]),pe=["Birth Certificate","Aadhar Card","Previous Marksheet","Transfer Certificate","Character Certificate","Caste Certificate","Address Proof","Passport Photo"];x.useEffect(()=>{var y,T,k,G;if(o){console.log("CreateStudent received studentData:",o),console.log("Keys in studentData:",Object.keys(o));const J={...L};Object.keys(L).forEach(Y=>{const Ne=o[Y]??o[Y.replace(/_/g,"")]??o[Y.toLowerCase()]??J[Y];J[Y]=Ne,["Roll_Number","AdmissionCategory","StudentStatus","BloodGroup"].includes(Y)&&console.log(`Mapping ${Y}: studentData[${Y}]=${o[Y]}, Result=${Ne}`)});const W=["Hyderabad","Mumbai","Bangalore"];if(J.location){const Y=W.find(Ne=>Ne.toLowerCase()===J.location.trim().toLowerCase());Y&&(J.location=Y)}J.admissionNo=o.admission_no??J.admissionNo,J.presentAddress=o.address??"",J.class=o.class??o.clazz??"",console.log("Mapped formData:",J),se(J),Q(o.documents||[]),de(((y=o.photos)==null?void 0:y.student)||null),C(((T=o.photos)==null?void 0:T.father)||null),oe(((k=o.photos)==null?void 0:k.mother)||null),U(((G=o.photos)==null?void 0:G.guardian)||null)}},[o]),x.useEffect(()=>{},[]),x.useEffect(()=>{le.get("/classes").then(y=>{const T=y.data.classes||[];T.sort((k,G)=>k.id-G.id),v(T.map(k=>k.class_name))}).catch(y=>{console.error("Failed to load classes",y)}),Promise.all([le.get("/branches"),le.get("/org/locations"),le.get("/org/academic-years")]).then(([y,T,k])=>{const G=T.data.locations||[];F(G);const J=k.data.academic_years||[];H(J);let W=[];if(y.data.branches&&(W=y.data.branches.map(Y=>({branch_name:Y.branch_name,location_code:Y.location_code})),S(W)),a==="create"){const Y=localStorage.getItem("currentBranch"),Ne=localStorage.getItem("user");let $e="",at="";if(Ne)try{const et=JSON.parse(Ne);$e=et.role,at=et.branch}catch(et){console.error("Error parsing user from localStorage",et)}let ot="";if($e==="Admin"?Y&&Y!=="All"&&(ot=Y):at&&(ot=at),ot){const et=q(ot,W,G);let Qt=h.academic_year;const dt=localStorage.getItem("academicYear")||"2025-2026",Ct=J.find(bt=>bt.name.replace(/\s/g,"")===dt.replace(/\s/g,""));Ct&&(Qt=Ct.name),se(bt=>({...bt,branch:ot,location:et||bt.location,academic_year:Qt})),V(!0)}}}).catch(y=>console.error("Failed to load master data",y))},[a]);const $=x.useCallback(y=>{var J;const{name:T,value:k,type:G}=y.target;if(!g){if(T==="branch"){const W=q(k,A,b);se(Y=>({...Y,[T]:k,location:W||Y.location}));return}if(G==="checkbox"){const W=y.target.checked;se(Y=>{const Ne={...Y,[T]:W};return T==="isSameAddress"&&(Ne.permanentAddress=W?Y.presentAddress:"",Ne.permanentCity=W?Y.presentCity:"",Ne.permanentPin=W?Y.presentPin:""),Ne});return}if(T==="Adharcardno"||T==="FatherAadhar"||T==="MotherAadhar"){const Y=((J=k.replace(/\D/g,"").slice(0,12).match(/.{1,4}/g))==null?void 0:J.join("-"))||"";se(Ne=>({...Ne,[T]:Y}));return}if(T==="phone"||T==="FatherPhone"||T==="SecondaryPhone"||T==="SmsNo"||T==="GuardianContactNo"){let W=k;W.startsWith("+91 ")||(W="+91 "+W.replace(/\D/g,""));let Y=W.replace("+91 ","").replace(/\D/g,"");Y=Y.slice(0,10);const Ne="+91 "+Y;se($e=>({...$e,[T]:Ne}));return}se(W=>({...W,[T]:k}))}},[g]),be=y=>{Q(T=>T.includes(y)?T.filter(k=>k!==y):[...T,y])},O=(y,T)=>{if(y.target.files&&y.target.files[0]){const k=new FileReader;k.onloadend=()=>T(k.result),k.readAsDataURL(y.target.files[0])}},ne=()=>{se(L),de(null),C(null),oe(null),U(null),Q([])},D=y=>{y.preventDefault(),ne()},w=()=>({admission_no:h.admissionNo,first_name:h.first_name,last_name:h.last_name,gender:h.gender,dob:h.dob,Doa:h.Doa,BloodGroup:h.BloodGroup,Adharcardno:h.Adharcardno,Religion:h.Religion,phone:h.phone,email:h.email,address:h.presentAddress,Category:h.Category,class:h.class,section:h.section,Roll_Number:h.Roll_Number?Number(h.Roll_Number):null,admission_date:h.admission_date,status:h.status,MotherTongue:h.MotherTongue,Caste:h.Caste,StudentType:h.StudentType,House:h.House,Fatherfirstname:h.Fatherfirstname,FatherPhone:h.FatherPhone,SmsNo:h.SmsNo,FatherEmail:h.FatherEmail,PrimaryQualification:h.PrimaryQualification,FatherOccuption:h.FatherOccuption,FatherCompany:h.FatherCompany,FatherDesignation:h.FatherDesignation,FatherAadhar:h.FatherAadhar,FatherOrganizationId:h.FatherOrganizationId,FatherOtherOrganization:h.FatherOtherOrganization,Motherfirstname:h.Motherfirstname,MothermiddleName:h.MothermiddleName,Motherlastname:h.Motherlastname,SecondaryPhone:h.SecondaryPhone,SecondaryEmail:h.SecondaryEmail,SecondaryQualification:h.SecondaryQualification,SecondaryOccupation:h.SecondaryOccupation,SecondaryCompany:h.SecondaryCompany,SecondaryDesignation:h.SecondaryDesignation,MotherAadhar:h.MotherAadhar,MotherOrganizationId:h.MotherOrganizationId,MotherOtherOrganization:h.MotherOtherOrganization,GuardianName:h.GuardianName,GuardianRelation:h.GuardianRelation,GuardianQualification:h.GuardianQualification,GuardianOccupation:h.GuardianOccupation,GuardianDesignation:h.GuardianDesignation,GuardianDepartment:h.GuardianDepartment,GuardianOfficeAddress:h.GuardianOfficeAddress,GuardianContactNo:h.GuardianContactNo,SchoolName:h.SchoolName,TCNumber:h.TCNumber,PreviousSchoolClass:h.PreviousSchoolClass,AdmissionCategory:h.AdmissionCategory,AdmissionClass:h.AdmissionClass,StudentHeight:h.StudentHeight?Number(h.StudentHeight):null,StudentWeight:h.StudentWeight?Number(h.StudentWeight):null,SamagraId:h.SamagraId,ChildId:h.ChildId,PEN:h.PEN,permanentCity:h.permanentCity,previousSchoolName:h.previousSchoolName,primaryIncomePerYear:h.primaryIncomePerYear?Number(h.primaryIncomePerYear):null,secondaryIncomePerYear:h.secondaryIncomePerYear?Number(h.secondaryIncomePerYear):null,primaryOfficeAddress:h.primaryOfficeAddress,secondaryOfficeAddress:h.secondaryOfficeAddress,Hobbies:h.Hobbies,SecondLanguage:h.SecondLanguage,ThirdLanguage:h.ThirdLanguage,GroupUniqueId:h.GroupUniqueId,serviceNumber:h.serviceNumber,EmploymentservingStatus:h.EmploymentservingStatus,StudentStatus:h.StudentStatus,ApaarId:h.ApaarId,Stream:h.Stream,location:h.location,branch:h.branch,academic_year:h.academic_year,photos:{student:ie,father:P,mother:X,guardian:ue},documents:re,feeInstallments:h.feeInstallments}),N=async y=>{if(a==="create"&&(!h.first_name||!h.last_name||!h.admissionNo||!h.admission_date||!h.branch||!h.academic_year||!h.class||!h.gender||!h.dob||!h.phone||!h.email||!h.Adharcardno||!h.section||!h.Fatherfirstname||!h.FatherPhone||!h.Motherfirstname)){alert("Fill required fields");return}const T=w();try{if(a==="create")await le.post("/students",T),alert("Student created successfully!");else if(a==="edit"){const k=(o==null?void 0:o.student_id)||(o==null?void 0:o.id);if(!k){alert("Error: Student ID is missing for update.");return}await le.put(`/students/${k}`,T),alert("Student updated successfully!")}c&&c(T,y)}catch(k){console.error("Error saving student:",k),alert("Failed to save student.")}};return n.jsx("div",{className:"p-4 md:p-6 bg-gray-50 min-h-screen",children:n.jsx("form",{ref:p,id:"create-student-form",children:n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center border-b pb-4 mb-4 bg-gray-100 p-4 -m-6 rounded-t-lg",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:a==="create"?"Create New Student":a==="edit"?"Edit Student":"Student Details"}),a==="view"&&n.jsx("button",{type:"button",onClick:u,className:"bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 transition-colors text-sm font-medium",children:"Edit Student"})]}),n.jsxs("div",{className:"md:col-span-4 border p-4 rounded-md grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 bg-white",children:[n.jsxs(xe,{label:"Class",name:"class",as:"select",required:!0,value:h.class,onChange:$,disabled:g,children:[n.jsx("option",{value:"",children:"-- Select --"}),f.map(y=>n.jsx("option",{value:y,children:y},y))]}),n.jsxs(xe,{label:"Section",name:"section",as:"select",required:!0,value:h.section,onChange:$,disabled:g,children:[n.jsx("option",{value:"",children:"-- Select --"}),n.jsx("option",{value:"A",children:"A"}),n.jsx("option",{value:"B",children:"B"})]}),n.jsx(xe,{label:"Admission No",name:"admissionNo",required:!0,value:h.admissionNo,onChange:$,disabled:g}),n.jsx(xe,{label:"Admission Date",name:"admission_date",type:"date",required:!0,value:h.admission_date,onChange:$,disabled:g}),n.jsx(xe,{label:"Roll Number",name:"Roll_Number",type:"number",value:h.Roll_Number,onChange:$,disabled:g}),n.jsx(xe,{label:"Admission Category",name:"AdmissionCategory",value:h.AdmissionCategory,onChange:$,disabled:g}),n.jsx(xe,{label:"Admission Class",name:"AdmissionClass",value:h.AdmissionClass,onChange:$,disabled:g}),n.jsxs(xe,{label:"Location",name:"location",as:"select",value:h.location,onChange:$,disabled:g,children:[n.jsx("option",{value:"",children:"-- Select --"}),b.map(y=>n.jsx("option",{value:y.name,children:y.name},y.code))]}),n.jsxs(xe,{label:"Branch",name:"branch",as:"select",required:!0,value:h.branch,onChange:$,disabled:g||ee,className:ee?"bg-gray-100 cursor-not-allowed":"",children:[n.jsx("option",{value:"",children:"-- Select --"}),A.map(y=>n.jsx("option",{value:y.branch_name,children:y.branch_name},y.branch_name))]}),n.jsx(xe,{label:"Student Status",name:"StudentStatus",value:h.StudentStatus,onChange:$,disabled:g}),n.jsx(xe,{label:"Academic Year",name:"academic_year",as:"select",value:h.academic_year,onChange:$,disabled:!0,className:"bg-gray-100 cursor-not-allowed",children:R.length>0?R.map(y=>n.jsx("option",{value:y.name,children:y.name},y.code)):n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"2024-2025",children:"2024 - 2025"}),n.jsx("option",{value:"2025-2026",children:"2025 - 2026"}),n.jsx("option",{value:"2026-2027",children:"2026 - 2027"})]})})]}),n.jsxs(cr,{title:"Personal Details",defaultOpen:!0,children:[n.jsx(xe,{label:"First Name",name:"first_name",required:!0,value:h.first_name,onChange:$,disabled:g}),n.jsx(xe,{label:"Last Name",name:"last_name",required:!0,value:h.last_name,onChange:$,disabled:g}),n.jsxs(xe,{label:"Gender",name:"gender",as:"select",required:!0,value:h.gender,onChange:$,disabled:g,children:[n.jsx("option",{value:"",children:"-- Select --"}),n.jsx("option",{value:"Male",children:"Male"}),n.jsx("option",{value:"Female",children:"Female"})]}),n.jsx(xe,{label:"Date of Birth",name:"dob",type:"date",required:!0,value:h.dob,onChange:$,disabled:g}),n.jsx(xe,{label:"Blood Group",name:"BloodGroup",value:h.BloodGroup,onChange:$,disabled:g}),n.jsx(xe,{label:"Aadhar Card No",name:"Adharcardno",required:!0,value:h.Adharcardno,onChange:$,disabled:g}),n.jsx(xe,{label:"Religion",name:"Religion",value:h.Religion,onChange:$,disabled:g}),n.jsx(xe,{label:"Mother Tongue",name:"MotherTongue",value:h.MotherTongue,onChange:$,disabled:g}),n.jsx(xe,{label:"Caste",name:"Caste",value:h.Caste,onChange:$,disabled:g}),n.jsx(xe,{label:"Category",name:"Category",value:h.Category,onChange:$,disabled:g}),n.jsx(xe,{label:"Student Type",name:"StudentType",value:h.StudentType,onChange:$,disabled:g}),n.jsx(xe,{label:"House",name:"House",value:h.House,onChange:$,disabled:g}),n.jsx(xe,{label:"Height (cm)",name:"StudentHeight",type:"number",value:h.StudentHeight,onChange:$,disabled:g}),n.jsx(xe,{label:"Weight (kg)",name:"StudentWeight",type:"number",value:h.StudentWeight,onChange:$,disabled:g}),n.jsx(xe,{label:"Samagra ID",name:"SamagraId",value:h.SamagraId,onChange:$,disabled:g}),n.jsx(xe,{label:"Child ID",name:"ChildId",value:h.ChildId,onChange:$,disabled:g}),n.jsx(xe,{label:"PEN",name:"PEN",value:h.PEN,onChange:$,disabled:g})]}),n.jsxs(cr,{title:"Contact Details",children:[n.jsx(xe,{label:"Phone",name:"phone",required:!0,value:h.phone,onChange:$,disabled:g}),n.jsx(xe,{label:"Email",name:"email",type:"email",required:!0,value:h.email,onChange:$,disabled:g}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(xe,{label:"Present Address",name:"presentAddress",as:"textarea",value:h.presentAddress,onChange:$,disabled:g})}),n.jsx(xe,{label:"Present City",name:"presentCity",value:h.presentCity,onChange:$,disabled:g}),n.jsx(xe,{label:"Present Pin",name:"presentPin",value:h.presentPin,onChange:$,disabled:g}),n.jsx("div",{className:"md:col-span-4",children:n.jsx(xe,{label:"Same as Present Address",name:"isSameAddress",type:"checkbox",checked:h.isSameAddress,onChange:$,disabled:g})}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(xe,{label:"Permanent Address",name:"permanentAddress",as:"textarea",value:h.permanentAddress,onChange:$,disabled:g||h.isSameAddress})}),n.jsx(xe,{label:"Permanent City",name:"permanentCity_ui",value:h.permanentCity_ui,onChange:$,disabled:g||h.isSameAddress})]}),n.jsxs(cr,{title:"Parent Details",children:[n.jsx("h4",{className:"md:col-span-4 font-medium text-gray-700 mt-2 mb-2 border-b pb-1",children:"Father's Details"}),n.jsx(xe,{label:"Father Name",name:"Fatherfirstname",required:!0,value:h.Fatherfirstname,onChange:$,disabled:g}),n.jsx(xe,{label:"FatherPhone",name:"FatherPhone",required:!0,value:h.FatherPhone,onChange:$,disabled:g}),n.jsx(xe,{label:"SMS No",name:"SmsNo",value:h.SmsNo,onChange:$,disabled:g}),n.jsx(xe,{label:"Email",name:"FatherEmail",type:"email",value:h.FatherEmail,onChange:$,disabled:g}),n.jsx(xe,{label:"Qualification",name:"PrimaryQualification",value:h.PrimaryQualification,onChange:$,disabled:g}),n.jsx(xe,{label:"Occupation",name:"FatherOccuption",value:h.FatherOccuption,onChange:$,disabled:g}),n.jsx(xe,{label:"Company",name:"FatherCompany",value:h.FatherCompany,onChange:$,disabled:g}),n.jsx(xe,{label:"Designation",name:"FatherDesignation",value:h.FatherDesignation,onChange:$,disabled:g}),n.jsx(xe,{label:"Aadhar No",name:"FatherAadhar",value:h.FatherAadhar,onChange:$,disabled:g}),n.jsx("h4",{className:"md:col-span-4 font-medium text-gray-700 mt-4 mb-2 border-b pb-1",children:"Mother's Details"}),n.jsx(xe,{label:"Mother Name",name:"Motherfirstname",required:!0,value:h.Motherfirstname,onChange:$,disabled:g}),n.jsx(xe,{label:"Phone",name:"SecondaryPhone",value:h.SecondaryPhone,onChange:$,disabled:g}),n.jsx(xe,{label:"Email",name:"SecondaryEmail",type:"email",value:h.SecondaryEmail,onChange:$,disabled:g}),n.jsx(xe,{label:"Qualification",name:"SecondaryQualification",value:h.SecondaryQualification,onChange:$,disabled:g}),n.jsx(xe,{label:"Occupation",name:"SecondaryOccupation",value:h.SecondaryOccupation,onChange:$,disabled:g}),n.jsx(xe,{label:"Company",name:"SecondaryCompany",value:h.SecondaryCompany,onChange:$,disabled:g}),n.jsx(xe,{label:"Designation",name:"SecondaryDesignation",value:h.SecondaryDesignation,onChange:$,disabled:g}),n.jsx(xe,{label:"Aadhar No",name:"MotherAadhar",value:h.MotherAadhar,onChange:$,disabled:g}),n.jsx("h4",{className:"md:col-span-4 font-medium text-gray-700 mt-4 mb-2 border-b pb-1",children:"Guardian's Details"}),n.jsx(xe,{label:"Name",name:"GuardianName",value:h.GuardianName,onChange:$,disabled:g}),n.jsx(xe,{label:"Relation",name:"GuardianRelation",value:h.GuardianRelation,onChange:$,disabled:g}),n.jsx(xe,{label:"Phone",name:"GuardianContactNo",value:h.GuardianContactNo,onChange:$,disabled:g}),n.jsx(xe,{label:"Qualification",name:"GuardianQualification",value:h.GuardianQualification,onChange:$,disabled:g}),n.jsx(xe,{label:"Occupation",name:"GuardianOccupation",value:h.GuardianOccupation,onChange:$,disabled:g}),n.jsx(xe,{label:"Office Address",name:"GuardianOfficeAddress",value:h.GuardianOfficeAddress,onChange:$,disabled:g})]}),n.jsxs(cr,{title:"Previous School Details",children:[n.jsx(xe,{label:"PreviousSchoolClass Name",name:"SchoolName",value:h.SchoolName,onChange:$,disabled:g}),n.jsx(xe,{label:"AdmissionNumber",name:"AdmissionNumber",value:h.AdmissionNumber,onChange:$,disabled:g}),n.jsx(xe,{label:"TCNumber",name:"TCNumber",value:h.TCNumber,onChange:$,disabled:g}),n.jsx(xe,{label:"PreviousSchoolClass",name:"PreviousSchoolClass",value:h.PreviousSchoolClass,onChange:$,disabled:g})]}),n.jsxs(cr,{title:"Photos & Documents",children:[n.jsxs("div",{className:"md:col-span-4 grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[n.jsx(Nl,{title:"Student Photo",photo:ie,onPhotoChange:y=>O(y,de),id:"student-photo",isViewMode:g}),n.jsx(Nl,{title:"Father Photo",photo:P,onPhotoChange:y=>O(y,C),id:"father-photo",isViewMode:g}),n.jsx(Nl,{title:"Mother Photo",photo:X,onPhotoChange:y=>O(y,oe),id:"mother-photo",isViewMode:g}),n.jsx(Nl,{title:"Guardian Photo",photo:ue,onPhotoChange:y=>O(y,U),id:"guardian-photo",isViewMode:g})]}),n.jsxs("div",{className:"md:col-span-4",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Documents Submitted"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:pe.map(y=>n.jsx(xe,{label:y,name:y,type:"checkbox",checked:re.includes(y),onChange:()=>be(y),disabled:g},y))})]})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t mt-6",children:[n.jsx("button",{type:"button",onClick:d,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500",children:a==="view"?"Back":"Cancel"}),a!=="view"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:D,className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500",children:"Reset"}),n.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-6 py-2 bg-violet-600 text-white rounded-md hover:bg-violet-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-violet-500",children:"Save"}),n.jsx("button",{type:"button",onClick:()=>N(!0),className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Save & Exit"})]})]})]})})})},nu=({title:a,isOpen:o,onToggle:c,children:d})=>n.jsxs("div",{className:"relative inline-block text-left",children:[n.jsxs("button",{className:"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",onClick:c,children:[a,n.jsx($n,{className:"ml-2 h-5 w-5"})]}),o&&n.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-20",children:n.jsx("div",{className:"py-1",children:d})})]}),Sl=({children:a,onClick:o})=>n.jsx("a",{href:"#",onClick:c=>{c.preventDefault(),o==null||o()},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:a}),tx=({activeView:a,setActiveView:o})=>{const[c,d]=x.useState(null),u=f=>d(c===f?null:f),p=f=>`px-3 py-2 text-sm rounded-md ${a===f?"bg-violet-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`;return n.jsx("div",{className:"bg-gray-50 p-3 border-b border-gray-300",children:n.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-2",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"STUDENTS"}),n.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[n.jsx("button",{className:p("students"),onClick:()=>o("students"),children:"Students"}),n.jsx("button",{className:p("addStudent"),onClick:()=>o("addStudent"),children:"Create Student"}),n.jsx("button",{className:p("import"),onClick:()=>o("import"),children:"Import"}),n.jsx("button",{className:p("search"),onClick:()=>o("search"),children:"Search"}),n.jsx("button",{className:p("summary"),onClick:()=>o("summary"),children:"Class Summary"}),n.jsxs(nu,{title:"Report",isOpen:c==="report",onToggle:()=>u("report"),children:[n.jsx(Sl,{children:"Custom Download"}),n.jsx(Sl,{children:"Pre-defined Download"})]}),n.jsxs(nu,{title:"Certificates",isOpen:c==="certs",onToggle:()=>u("certs"),children:[n.jsx(Sl,{children:"Student Certificate"}),n.jsx(Sl,{children:"Teacher Certificate"})]}),n.jsx("button",{className:p("upgrade"),onClick:()=>o("upgrade"),children:"Upgrade"})]})]})})},nx=({onView:a,onEdit:o,setActiveView:c})=>{const[d,u]=x.useState([]),[p,f]=x.useState(!1),[v,A]=x.useState(""),[S,b]=x.useState(""),[F,R]=x.useState(""),[H,g]=x.useState(!1),[L,h]=x.useState([]),[se,ee]=x.useState(!1),[V,q]=x.useState(""),[ie,de]=x.useState(null);x.useEffect(()=>{const U=localStorage.getItem("user");if(U){const re=JSON.parse(U);g(re.role==="Admin")}le.get("/classes").then(re=>h(re.data.classes||[])).catch(()=>console.log("Failed loading classes")),P()},[]),x.useEffect(()=>{P()},[v,S,F]);const P=()=>{f(!0);const U=localStorage.getItem("currentBranch")||"";le.get("/students",{params:{class:v||"",section:S||"",search:F||"",branch:U==="All"||U==="All Branches"?"All":U}}).then(re=>u(re.data.students||[])).catch(()=>u([])).finally(()=>f(!1))},C=U=>{de(U),q(""),ee(!0)},X=async()=>{if(!V)return alert("Please enter password");try{if((await le.post("/verify-any-password",{password:V})).data.success){const re=ie.student_id||ie.id;await le.delete(`/students/${re}`),alert("Student deleted successfully"),ee(!1),P()}else alert("Invalid Password")}catch(U){console.error(U),alert("Error deleting student")}},oe=U=>{const re=window.open("","","width=900,height=800");re&&(re.document.write(`
                     <html>
                         <head>
                            <title>Student Report - ${U.name}</title>
                            <style>
                                body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 40px; color: #333; }
                                h1 { text-align: center; color: #4c1d95; margin-bottom: 10px; }
                                h2 { border-bottom: 2px solid #4c1d95; padding-bottom: 5px; margin-top: 30px; color: #5b21b6; font-size: 18px; }
                                .header { text-align: center; margin-bottom: 40px; }
                                .photo-box { width: 120px; height: 120px; border: 1px solid #ddd; margin: 0 auto 10px; object-fit: cover; display: block; }
                                .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
                                .field { margin-bottom: 8px; }
                                .label { font-weight: bold; color: #555; width: 140px; display: inline-block; }
                                .value { color: #000; }
                                table { width: 100%; border-collapse: collapse; margin-top: 10px; }
                                th, td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 14px; }
                                th { bg-color: #f3f4f6; }
                            </style>
                         </head>
                         <body>
                             <div class="header">
                                <img src="https://www.mshifzacademy.com/assets/images/ms-logo.jpg" style="max-width: 300px; height: auto; margin-bottom: 10px;" />
                                <p>Student Profile Report</p>
                             </div>

                             <img src="${U.photo||"https://via.placeholder.com/150"}" class="photo-box" />
                             <h2 style="text-align:center; border:none;">${U.name}</h2>
                             <p style="text-align:center;">${U.admNo} | Class: ${U.class} - ${U.section}</p>

                             <h2>Academic Details</h2>
                             <div class="grid">
                                <div>
                                    <div class="field"><span class="label">Admission No:</span> <span class="value">${U.admNo||"-"}</span></div>
                                    <div class="field"><span class="label">Roll No:</span> <span class="value">${U.rollNo||"-"}</span></div>
                                    <div class="field"><span class="label">Class:</span> <span class="value">${U.class||"-"}</span></div>
                                    <div class="field"><span class="label">Section:</span> <span class="value">${U.section||"-"}</span></div>
                                </div>
                                <div>
                                    <div class="field"><span class="label">Admission Date:</span> <span class="value">${U.admission_date||"-"}</span></div>
                                    <div class="field"><span class="label">Status:</span> <span class="value">${U.status||"-"}</span></div>
                                    <div class="field"><span class="label">Category:</span> <span class="value">${U.Category||"-"}</span></div>
                                </div>
                             </div>

                             <h2>Personal Details</h2>
                             <div class="grid">
                                <div>
                                    <div class="field"><span class="label">First Name:</span> <span class="value">${U.first_name||"-"}</span></div>
                                    <div class="field"><span class="label">Last Name:</span> <span class="value">${U.last_name||"-"}</span></div>
                                    <div class="field"><span class="label">Gender:</span> <span class="value">${U.gender||"-"}</span></div>
                                    <div class="field"><span class="label">DOB:</span> <span class="value">${U.dob||"-"}</span></div>
                                    <div class="field"><span class="label">Blood Group:</span> <span class="value">${U.BloodGroup||"-"}</span></div>
                                </div>
                                <div>
                                    <div class="field"><span class="label">Aadhar No:</span> <span class="value">${U.Adharcardno||"-"}</span></div>
                                    <div class="field"><span class="label">Religion:</span> <span class="value">${U.Religion||"-"}</span></div>
                                    <div class="field"><span class="label">Caste:</span> <span class="value">${U.Caste||"-"}</span></div>
                                    <div class="field"><span class="label">Mother Tongue:</span> <span class="value">${U.MotherTongue||"-"}</span></div>
                                </div>
                             </div>

                             <h2>Contact Info</h2>
                             <div class="field"><span class="label">Mobile:</span> <span class="value">${U.phone||"-"}</span></div>
                             <div class="field"><span class="label">Email:</span> <span class="value">${U.email||"-"}</span></div>
                             <div class="field"><span class="label">Address:</span> <span class="value">${U.address||"-"}</span></div>

                             <h2>Parent / Guardian Details</h2>
                             <div class="grid">
                                <div>
                                    <h3>Father</h3>
                                    <div class="field"><span class="label">Name:</span> <span class="value">${U.Fatherfirstname||"-"}</span></div>
                                    <div class="field"><span class="label">Phone:</span> <span class="value">${U.FatherPhone||"-"}</span></div>
                                    <div class="field"><span class="label">Occupation:</span> <span class="value">${U.FatherOccuption||"-"}</span></div>
                                </div>
                                <div>
                                    <h3>Mother</h3>
                                    <div class="field"><span class="label">Name:</span> <span class="value">${U.Motherfirstname||"-"}</span></div>
                                    <div class="field"><span class="label">Phone:</span> <span class="value">${U.SecondaryPhone||"-"}</span></div>
                                    <div class="field"><span class="label">Occupation:</span> <span class="value">${U.SecondaryOccupation||"-"}</span></div>
                                </div>
                             </div>

                             <h2>Previous School Details</h2>
                             <div class="grid">
                                <div class="field"><span class="label">School Name:</span> <span class="value">${U.SchoolName||"-"}</span></div>
                                <div class="field"><span class="label">TC Number:</span> <span class="value">${U.TCNumber||"-"}</span></div>
                                <div class="field"><span class="label">Previous School Class:</span> <span class="value">${U.PreviousSchoolClass||"-"}</span></div>
                             </div>

                             <script>window.print();<\/script>
                         </body>
                     </html>
                 `),re.document.close())},ue=()=>p?n.jsx("div",{className:"p-6 text-gray-600 text-center",children:"Loading..."}):d.length?n.jsx("div",{className:"overflow-auto",children:n.jsxs("table",{className:"min-w-full text-sm divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-violet-600 text-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"Student Name"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Adm No."}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Roll No."}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Class"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Branch"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"DOB"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Parents"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Father Mobile"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"SMS No"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Tools"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:d.map(U=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-4 py-2 flex items-center gap-2",children:[n.jsx("img",{src:U.photo||"https://via.placeholder.com/32",className:"w-8 h-8 rounded-full object-cover border"}),n.jsx("span",{className:"font-medium text-blue-600",children:U.name})]}),n.jsx("td",{className:"px-4 py-2",children:U.admNo}),n.jsx("td",{className:"px-4 py-2",children:U.rollNo}),n.jsxs("td",{className:"px-4 py-2",children:[U.class," ",U.section]}),n.jsx("td",{className:"px-4 py-2",children:U.branch}),n.jsx("td",{className:"px-4 py-2",children:U.dob}),n.jsx("td",{className:"px-4 py-2",children:U.father}),n.jsx("td",{className:"px-4 py-2",children:U.fatherMobile}),n.jsx("td",{className:"px-4 py-2",children:U.smsNo}),n.jsx("td",{className:"px-4 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("button",{onClick:()=>a(U),className:"px-2 py-1 text-xs bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200 flex items-center gap-1",title:"Details",children:[n.jsx("span",{children:""})," Details"]}),n.jsxs("button",{onClick:()=>o(U),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1",title:"Edit",children:[n.jsx("span",{children:""})," Edit"]}),n.jsxs("button",{onClick:()=>oe(U),className:"px-2 py-1 text-xs bg-orange-100 text-orange-700 rounded hover:bg-orange-200 flex items-center gap-1",title:"Print",children:[n.jsx("span",{children:""})," Print"]}),n.jsxs("button",{onClick:()=>C(U),className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 flex items-center gap-1",title:"Delete",children:[n.jsx("span",{children:""})," Delete"]})]})})]},U.admNo))})]})}):n.jsx("div",{className:"p-6 text-gray-600 text-center",children:"No students found"});return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-6",children:[n.jsxs("select",{value:v,onChange:U=>A(U.target.value),className:"border px-3 py-2 rounded-md",children:[n.jsx("option",{value:"",children:"-- All Classes --"}),Array.isArray(L)&&L.map(U=>n.jsx("option",{value:U.class_name,children:U.class_name},U.id))]}),n.jsxs("select",{value:S,onChange:U=>b(U.target.value),className:"border px-3 py-2 rounded-md",children:[n.jsx("option",{value:"",children:"-- All Sections --"}),n.jsx("option",{value:"A",children:"A"}),n.jsx("option",{value:"B",children:"B"}),n.jsx("option",{value:"C",children:"C"})]}),n.jsxs("div",{className:"md:col-span-2 relative",children:[n.jsx("input",{className:"border px-3 py-2 w-full rounded-md pl-10",placeholder:"Search by Name, Adm No...",value:F,onChange:U=>R(U.target.value)}),n.jsx(hh,{className:"h-5 w-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}),n.jsx("button",{onClick:P,className:"bg-violet-600 text-white px-4 py-2 rounded-md",children:"Search"})]}),ue(),se&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[n.jsx("h3",{className:"text-lg font-bold mb-4",children:"Confirm Deletion"}),n.jsxs("p",{className:"mb-4 text-gray-600",children:["Enter your password to delete student ",n.jsx("b",{children:ie==null?void 0:ie.name}),"."]}),n.jsx("input",{type:"password",className:"w-full border p-2 rounded mb-4",placeholder:"Password",value:V,onChange:U=>q(U.target.value)}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{onClick:()=>ee(!1),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),n.jsx("button",{onClick:X,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]})})]})},sx=({navigateTo:a})=>{const[o,c]=x.useState("students"),[d,u]=x.useState(null),p=()=>{switch(o){case"students":return n.jsx(nx,{onView:f=>{u(f),c("viewStudent")},onEdit:f=>{u(f),c("editStudent")},setActiveView:c});case"addStudent":return n.jsx(Po,{mode:"create",onSave:()=>c("students"),onCancel:()=>c("students")});case"viewStudent":return n.jsx(Po,{mode:"view",studentData:d,onCancel:()=>c("students"),onEdit:()=>c("editStudent")});case"editStudent":return n.jsx(Po,{mode:"edit",studentData:d,onSave:()=>c("students"),onCancel:()=>c("students")});case"import":return n.jsx(ex,{onImportSuccess:()=>c("students")});default:return n.jsx(Io,{pageTitle:"Coming Soon"})}};return n.jsxs("div",{className:"h-full bg-gray-100 overflow-y-auto",children:[n.jsx(tx,{activeView:o,setActiveView:c}),p()]})},rx=()=>{const[a,o]=x.useState([]),[c,d]=x.useState([]),[u,p]=x.useState(""),[f,v]=x.useState(""),[A,S]=x.useState(localStorage.getItem("academicYear")||"2025-2026"),[b,F]=x.useState("All"),[R,H]=x.useState(!0),[g,L]=x.useState(!1),[h,se]=x.useState(""),[ee,V]=x.useState({}),[q,ie]=x.useState(!1),[de,P]=x.useState(""),[C,X]=x.useState(""),[oe,ue]=x.useState(!1),[U,re]=x.useState("");x.useEffect(()=>{const y=JSON.parse(localStorage.getItem("user")||"{}"),T=y.role!=="Admin";let k="All";T&&y.branch?k=y.branch:k=localStorage.getItem("currentBranch")||"All",F(k),Q(),pe()},[]);const Q=async()=>{try{const y=window.location.hostname==="localhost"?"http://localhost:5001":`http://${window.location.hostname}:5001`,T=await le.get(`${y}/api/fee-types`);o(T.data.fee_types),$(T.data.fee_types)}catch(y){console.error("Error fetching fee types:",y)}},pe=async()=>{try{const y=window.location.hostname==="localhost"?"http://localhost:5001":`http://${window.location.hostname}:5001`,T=await le.get(`${y}/api/concessions`),k=localStorage.getItem("currentBranch")||"All",G=JSON.parse(localStorage.getItem("user")||"{}"),J=T.data.concessions;let W=J;G.role==="Admin"?W=k==="All"||k==="All Branches"?J:J.filter(Y=>Y.branch===k||Y.branch==="All"):W=J,d(W)}catch(y){console.error("Error fetching concessions:",y)}},$=y=>{const T={};y.forEach(k=>{T[k.id]=0}),V(T)},be=()=>{if(!h)return;const y=parseFloat(h);if(isNaN(y))return;const T={...ee};a.forEach(k=>{T[k.id]=y}),V(T)},O=(y,T)=>{const k=parseFloat(T)||0;V(G=>({...G,[y]:k}))},ne=y=>{p(y.title),v(y.description||""),S(y.academic_year),F(y.branch||"All"),H(y.is_percentage),L(y.show_in_payment||!1);const T={};a.forEach(k=>T[k.id]=0),y.items.forEach(k=>{T[k.fee_type_id]=k.percentage}),V(T),ie(!0),P(y.title),X(y.academic_year),window.scrollTo({top:0,behavior:"smooth"}),re("Editing mode enabled. Make changes and click Update.")},D=async(y,T)=>{if(window.confirm(`Are you sure you want to delete "${y}" for ${T}?`))try{const k=window.location.hostname==="localhost"?"http://localhost:5001":`http://${window.location.hostname}:5001`;await le.delete(`${k}/api/concessions/${y}/${T}`),re("Concession deleted successfully"),pe()}catch(k){console.error("Error deleting concession:",k),alert("Student record exist for this concession,Cannot delete")}},w=async()=>{var y,T;if(!u||!A){alert("Please fill Title and Academic Year");return}ue(!0),re("");try{const k=window.location.hostname==="localhost"?"http://localhost:5001":`http://${window.location.hostname}:5001`,G=Object.keys(ee).map(W=>({fee_type_id:parseInt(W),percentage:ee[parseInt(W)]})),J={title:u,description:f,academic_year:A,branch:b,is_percentage:R,show_in_payment:g,items:G};q?(await le.put(`${k}/api/concessions/${de}/${C}`,J),re("Concession updated successfully!")):(await le.post(`${k}/api/concessions`,J),re("Concession created successfully!")),N(),pe()}catch(k){console.error("Error saving concession:",k),re(`Error: ${((T=(y=k.response)==null?void 0:y.data)==null?void 0:T.error)||k.message}`)}finally{ue(!1)}},N=()=>{p(""),v(""),se(""),S(localStorage.getItem("academicYear")||"2025-2026");const y=JSON.parse(localStorage.getItem("user")||"{}");y.role!=="Admin"&&y.branch?F(y.branch):F(localStorage.getItem("currentBranch")||"All"),L(!1),ie(!1),P(""),X(""),$(a)};return n.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:n.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-md border p-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-6 border-b pb-4",children:[n.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:q?"Edit Concession Type":"Add Concession Type"})]}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title*"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-violet-500 focus:border-violet-500",value:u,onChange:y=>p(y.target.value),placeholder:"e.g. Sibling Discount"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-violet-500 focus:border-violet-500",value:f,onChange:y=>v(y.target.value)})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 cursor-not-allowed",value:A,onChange:y=>S(y.target.value),disabled:!0,children:[n.jsx("option",{value:"2025-2026",children:"2025-2026"}),n.jsx("option",{value:"2026-2027",children:"2026-2027"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 cursor-not-allowed",value:b,readOnly:!0})]})]}),n.jsxs("div",{className:"flex items-center justify-between bg-pink-50 p-4 rounded-md border border-pink-100",children:[n.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-violet-600 rounded",checked:R,onChange:y=>H(y.target.checked)}),n.jsx("span",{className:"text-gray-700 font-medium",children:"Is Concession in percentage?"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"number",className:"border border-gray-300 rounded-md px-3 py-2 w-40",placeholder:"Enter Percentage",value:h,onChange:y=>se(y.target.value),disabled:!R}),n.jsx("button",{onClick:be,className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 font-medium",children:"Copy"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx("input",{type:"checkbox",id:"showInPayment",className:"form-checkbox h-5 w-5 text-violet-600 rounded",checked:g,onChange:y=>L(y.target.checked)}),n.jsx("label",{htmlFor:"showInPayment",className:"text-gray-700 font-medium cursor-pointer",children:"Show in Fee Payment Dropdown?"})]})]}),n.jsx("div",{className:"border rounded-md overflow-hidden mb-6",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-10",children:n.jsx("input",{type:"checkbox",className:"rounded"})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee Type"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Concession Percentage"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(y=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"checkbox",className:"rounded"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:y.fee_type}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"number",className:"border border-gray-300 rounded-md px-3 py-1 w-full focus:ring-violet-500 focus:border-violet-500",value:ee[y.id]||0,onChange:T=>O(y.id,T.target.value)})})]},y.id))})]})}),U&&n.jsx("div",{className:`p-4 mb-4 rounded-md ${U.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:U}),n.jsxs("div",{className:"flex justify-end space-x-3 border-t pt-4",children:[n.jsx("button",{onClick:N,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:q?"Cancel Edit":"Reset"}),n.jsx("button",{onClick:w,disabled:oe,className:"px-6 py-2 bg-violet-600 text-white rounded-md hover:bg-violet-700 disabled:opacity-50",children:oe?"Saving...":q?"Update Concession":"Save Concession"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md border p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Existing Concessions"}),c.length===0?n.jsx("p",{className:"text-gray-500 text-center py-4",children:"No concessions found."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Show in Payment"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((y,T)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:y.title}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:y.academic_year}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${!y.branch||y.branch==="All"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:y.branch||"All"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:y.show_in_payment?n.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Yes"}):n.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"No"})}),n.jsx("td",{className:"px-6 py-4 text-gray-500",children:y.description}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[n.jsx("button",{onClick:()=>ne(y),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),n.jsx("button",{onClick:()=>D(y.title,y.academic_year),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},T))})]})})]})]})})},lx=()=>{const[a,o]=x.useState([]),[c,d]=x.useState([]),[u,p]=x.useState([]),[f,v]=x.useState([]),[A,S]=x.useState(""),[b,F]=x.useState(""),[R,H]=x.useState(null),[g,L]=x.useState(""),[h,se]=x.useState(""),[ee,V]=x.useState(!1),[q,ie]=x.useState([]),[de,P]=x.useState([]),[C,X]=x.useState({}),[oe,ue]=x.useState(!1),[U,re]=x.useState("");x.useEffect(()=>{Q(),pe();const D=localStorage.getItem("user");if(D){const w=JSON.parse(D);V(w.role==="Admin")}},[]);const Q=async()=>{try{const w=(await le.get("/classes")).data.classes.map(N=>String(N.class_name));o([...new Set(w)])}catch(D){console.error("Error fetching classes:",D)}},pe=async()=>{try{const D=await le.get("/concessions"),w=localStorage.getItem("academicYear")||"2025-2026",N=D.data.concessions.filter(y=>y.academic_year===w);v(N)}catch(D){console.error("Error fetching concessions:",D)}};x.useEffect(()=>{if(!A){d([]);return}(async()=>{try{const w=new URLSearchParams;w.append("class",A);const N=localStorage.getItem("currentBranch")||"All",y=N==="All Branches"||N==="All"?"All":N;w.append("branch",y),console.log("Fetching sections with params:",w.toString());const T=await le.get(`/students?${w}`);console.log("Students API Response for Sections:",T.data);const k=T.data,G=Array.isArray(k)?k:k.students||[];console.log("Student count:",G.length);const J=G.map(Y=>Y.section);console.log("Raw Sections extracted:",J);const W=[...new Set(J.filter(Boolean))].sort();console.log("Final Unique Sections:",W),d(W)}catch(w){console.error("Error fetching sections:",w)}})()},[A]),x.useEffect(()=>{(async()=>{try{const w=new URLSearchParams;A&&w.append("class",A),b&&w.append("section",b),h&&w.append("search",h);const N=localStorage.getItem("currentBranch")||"All",y=N==="All Branches"||N==="All"?"All":N;w.append("branch",y);const k=(await le.get(`/students?${w}`)).data;p(Array.isArray(k)?k:k.students||[])}catch(w){console.error("Error fetching students:",w)}})()},[A,b,h]),x.useEffect(()=>{if(!R){ie([]);return}(async()=>{try{const w=await le.get(`/fees/student-details/${R}`);ie(w.data.installments||[]),P([]),X({})}catch(w){console.error("Error fetching installments:",w)}})()},[R]),x.useEffect(()=>{if(!g||q.length===0){X({});return}const D=f.find(N=>N.title===g);if(!D)return;const w={};q.forEach(N=>{if(!N.student_fee_id)return;const y=D.items.find(T=>T.fee_type_id===N.fee_type_id);if(y){const T=N.payable;let k=0;D.is_percentage?k=T*(y.percentage/100):k=Math.min(T,y.percentage),w[N.student_fee_id]=Math.round(k)}}),X(w)},[g,q]);const $=D=>{P(w=>w.includes(D)?w.filter(N=>N!==D):[...w,D])},be=D=>{if(D.target.checked){const w=q.filter(N=>{const y=N.student_fee_id&&C[N.student_fee_id]!==void 0,T=(N.paidAmount||0)>0,k=(N.concession||0)>0;return y&&!T&&!k}).map(N=>N.student_fee_id);P(w)}else P([])},O=async()=>{var D,w;if(!R||!g||de.length===0){alert("Please select a student, a concession, and at least one installment.");return}if(window.confirm(`Assign concession to ${de.length} installments? This will update the fee records.`)){ue(!0);try{const N=f.find(T=>T.title===g);await le.post("/fees/assign-concession",{student_id:R,concession_title:g,academic_year:(N==null?void 0:N.academic_year)||localStorage.getItem("academicYear")||"2025-2026",installments:de}),re("Concession assigned successfully!");const y=await le.get(`/fees/student-details/${R}`);ie(y.data.installments||[]),P([])}catch(N){console.error("Error assigning concession:",N),re(`Error: ${((w=(D=N.response)==null?void 0:D.data)==null?void 0:w.error)||N.message}`)}finally{ue(!1)}}},ne=f.find(D=>D.title===g);return n.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:n.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[n.jsx("span",{className:"text-violet-600 mr-2",children:""})," Student Concession"]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border grid grid-cols-1 md:grid-cols-5 gap-4",children:[n.jsx("input",{type:"text",placeholder:"Search Admission No...",className:"border p-2 rounded",value:h,onChange:D=>se(D.target.value)}),n.jsxs("select",{className:"border p-2 rounded",value:A,onChange:D=>{S(D.target.value),F("")},children:[n.jsx("option",{value:"",children:"Select Class"}),a.map(D=>n.jsx("option",{value:D,children:D},D))]}),n.jsxs("select",{className:"border p-2 rounded",value:b,onChange:D=>F(D.target.value),children:[n.jsx("option",{value:"",children:"Select Section"}),c.map(D=>n.jsx("option",{value:D,children:D},D))]}),n.jsxs("select",{className:"border p-2 rounded",value:R||"",onChange:D=>H(Number(D.target.value)||null),children:[n.jsx("option",{value:"",children:"Select Student"}),u.map(D=>n.jsxs("option",{value:D.student_id,children:[D.name," (",D.admNo,")"]},D.student_id))]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Concession Template"}),n.jsxs("select",{className:"w-full border p-2 rounded focus:ring-violet-500 focus:border-violet-500",value:g,onChange:D=>L(D.target.value),children:[n.jsx("option",{value:"",children:"-- Select Concession --"}),f.map((D,w)=>n.jsx("option",{value:D.title,children:D.title},w))]})]}),ne&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Concession Rules"}),n.jsx("div",{className:"border rounded overflow-hidden",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Fee Type"}),n.jsxs("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:["Value (",ne.is_percentage?"%":"",")"]})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ne.items.map((D,w)=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-3 py-2 text-gray-900",children:D.fee_type_name}),n.jsx("td",{className:"px-3 py-2 text-right text-gray-900",children:D.percentage})]},w))})]})})]})]}),n.jsxs("div",{className:"lg:col-span-2 bg-white p-4 rounded-lg shadow border",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"font-semibold text-gray-800",children:"Student Installments"}),U&&n.jsx("span",{className:`text-sm ${U.includes("Error")?"text-red-600":"text-green-600"}`,children:U})]}),q.length===0?n.jsx("p",{className:"text-gray-500 text-center py-8",children:"Select a student to view installments."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 w-10",children:n.jsx("input",{type:"checkbox",onChange:be})}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Installment"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Total Fee"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Paid"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Current Concession"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-violet-600",children:"New Concession"}),n.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-500",children:"Status"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(D=>{const w=D.student_fee_id?C[D.student_fee_id]:void 0,N=w!==void 0,y=(D.paidAmount||0)>0,T=(D.concession||0)>0,k=y||T;let G="";return y?G="Cannot apply concession to paid/partial fees":T&&(G="Fee already has a concession"),n.jsxs("tr",{className:N?"bg-violet-50":"",children:[n.jsx("td",{className:"px-3 py-2 text-center",title:G,children:n.jsx("input",{type:"checkbox",checked:D.student_fee_id?de.includes(D.student_fee_id):!1,onChange:()=>D.student_fee_id&&!k&&$(D.student_fee_id),disabled:!N||k})}),n.jsxs("td",{className:"px-3 py-2 text-gray-900",children:[D.title,k&&n.jsxs("span",{className:"ml-2 text-xs text-red-500",children:["(",y?"Paid":"Has Concession",")"]})]}),n.jsx("td",{className:"px-3 py-2 text-right text-gray-900",children:D.payable}),n.jsx("td",{className:"px-3 py-2 text-right text-gray-900",children:D.paidAmount||0}),n.jsx("td",{className:"px-3 py-2 text-right text-gray-900",children:D.concession||0}),n.jsx("td",{className:"px-3 py-2 text-right font-bold text-violet-600",children:N&&!k?w:"-"}),n.jsx("td",{className:"px-3 py-2 text-center",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${D.paid?"bg-green-100 text-green-800":(D.paidAmount||0)>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:D.paid?"Paid":(D.paidAmount||0)>0?"Partial":"Pending"})})]},D.sr)})})]})}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsx("button",{onClick:O,disabled:oe||de.length===0,className:"bg-violet-600 text-white px-6 py-2 rounded shadow hover:bg-violet-700 disabled:opacity-50",children:oe?"Assigning...":"Assign Concession"})})]})]})]})})},ax=()=>{const[a,o]=x.useState(""),[c,d]=x.useState(""),[u,p]=x.useState(""),[f,v]=x.useState(null),[A,S]=x.useState([]),[b,F]=x.useState([]),[R,H]=x.useState([]),[g,L]=x.useState([]),[h,se]=x.useState(!1),[ee,V]=x.useState(null),[q,ie]=x.useState(!1);x.useEffect(()=>{const Q=JSON.parse(localStorage.getItem("user")||"{}");ie(Q.role==="Admin"),de(),P()},[]),x.useEffect(()=>{(c||a)&&C()},[c,u,a]),x.useEffect(()=>{f?X():F([])},[f]);const de=async()=>{try{const pe=(await le.get("/classes")).data.classes.map($=>$.class_name);H(pe)}catch(Q){console.error("Error fetching classes:",Q)}},P=async()=>{try{const Q=await le.get("/fee-types");L(Q.data.fee_types||[])}catch(Q){console.error("Error fetching fee types:",Q)}},C=async()=>{try{const Q=new URLSearchParams;c&&Q.append("class",c),u&&Q.append("section",u),a&&Q.append("search",a);const pe=JSON.parse(localStorage.getItem("user")||"{}");let $=localStorage.getItem("currentBranch")||"All";pe.role!=="Admin"&&pe.branch&&($=pe.branch);const be=$==="All Branches"||$==="All"?"All":$;Q.append("branch",be);const O=await le.get(`/fees/students?${Q.toString()}`);S(Array.isArray(O.data)?O.data:O.data.students||[])}catch(Q){console.error("Error fetching students:",Q)}},X=async()=>{if(f)try{const Q=await le.get(`/fees/student-details/${f}`);F(Q.data.installments||[])}catch(Q){console.error("Error fetching installments:",Q)}},oe=async(Q,pe,$)=>{var be,O;try{await le.put(`/fees/student-fee/${Q}`,{total_fee:pe,concession:$}),X(),V(null),alert("Fee updated successfully")}catch(ne){alert(((O=(be=ne.response)==null?void 0:be.data)==null?void 0:O.error)||"Failed to update fee")}},ue=async Q=>{var pe,$;if(window.confirm("Are you sure you want to delete this fee?"))try{await le.delete(`/fees/student-fee/${Q}`),X(),alert("Fee deleted successfully")}catch(be){alert((($=(pe=be.response)==null?void 0:pe.data)==null?void 0:$.error)||"Failed to delete fee")}},U=async(Q,pe,$)=>{var be,O;if(f)try{await le.post("/fees/student-fee/add",{student_id:f,fee_type_id:Q,amount:pe,month:$}),X(),se(!1),alert("Fee added successfully")}catch(ne){alert(((O=(be=ne.response)==null?void 0:be.data)==null?void 0:O.error)||"Failed to add fee")}},re=A.find(Q=>Q.student_id===f);return n.jsxs("div",{className:"container-fluid mx-auto p-4 bg-gray-50 min-h-screen",children:[n.jsxs("div",{className:"bg-indigo-50 border-l-4 border-indigo-500 p-4 mb-6 flex justify-between items-center rounded-r shadow-sm",children:[n.jsx("div",{className:"flex items-center",children:n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx("span",{children:""})," Update student fee structure"]})}),n.jsxs("div",{className:"flex gap-2 items-center",children:[(()=>{const Q=JSON.parse(localStorage.getItem("user")||"{}"),$=Q.role!=="Admin"&&Q.branch?Q.branch:localStorage.getItem("currentBranch")||"All";return n.jsx("input",{type:"text",value:$,readOnly:!0,className:"border rounded px-2 py-1 text-sm outline-none bg-gray-100 cursor-not-allowed w-32 focus:ring-2 ring-indigo-300",title:"Current Branch"})})(),n.jsx("input",{type:"text",placeholder:"Search Name/AdmNo",value:a,onChange:Q=>o(Q.target.value),className:"border rounded px-3 py-1 text-sm outline-none w-40 focus:ring-2 ring-indigo-300"}),n.jsxs("select",{value:c,onChange:Q=>d(Q.target.value),className:"border rounded px-2 py-1 text-sm outline-none w-24 focus:ring-2 ring-indigo-300",children:[n.jsx("option",{value:"",children:"Class"}),R.map(Q=>n.jsx("option",{value:Q,children:Q},Q))]}),n.jsxs("select",{value:f||"",onChange:Q=>v(Number(Q.target.value)||null),className:"border rounded px-2 py-1 text-sm outline-none w-64 focus:ring-2 ring-indigo-300",children:[n.jsx("option",{value:"",children:"Select Student"}),A.map(Q=>n.jsxs("option",{value:Q.student_id,children:[Q.name," (",Q.admNo,")"]},Q.student_id))]})]})]}),f?n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:["Fee Installments for ",n.jsx("span",{className:"text-indigo-600 font-bold",children:re==null?void 0:re.name})]}),b.length===0?n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No installments found for this student."}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:b.map(Q=>n.jsx(ox,{installment:Q,onEdit:()=>V(Q),onDelete:()=>ue(Q.student_fee_id)},Q.sr))})]}):n.jsx("div",{className:"text-center py-20 text-gray-400",children:"Please select a student to view and update fee structure."}),ee&&n.jsx(ix,{fee:ee,onClose:()=>V(null),onSave:oe}),h&&n.jsx(cx,{feeTypes:g,onClose:()=>se(!1),onSave:U})]})},ox=({installment:a,onEdit:o,onDelete:c})=>{const d=a.status==="Paid",u=a.status==="Partial",p=d?"bg-green-600 text-white":"bg-orange-500 text-white",f=d?"bg-green-50":"bg-orange-50";return n.jsxs("div",{className:"bg-white rounded shadow-sm border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:`px-4 py-2 flex justify-between items-center ${f}`,children:[n.jsx("span",{className:"font-semibold text-gray-700 text-sm",children:a.title}),n.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${p}`,children:a.status})]}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Tuition Fee"}),n.jsx("span",{className:"text-sm font-bold text-gray-800",children:a.payable})]}),n.jsxs("div",{className:"text-xs text-gray-500 text-right mb-2",children:[a.payable," - ",a.concession," = ",a.payable-a.concession]}),n.jsxs("div",{className:"border-t pt-2 flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-400",children:"Total"}),n.jsxs("span",{className:"font-bold text-gray-800",children:[" ",a.payable-a.concession]})]}),!d&&n.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[n.jsx("button",{onClick:o,className:"p-1.5 bg-blue-100 text-blue-600 rounded hover:bg-blue-200",title:"Edit",children:n.jsx(kh,{className:"w-4 h-4"})}),a.paidAmount===0&&n.jsx("button",{onClick:c,className:"p-1.5 bg-red-100 text-red-600 rounded hover:bg-red-200",title:"Delete",children:n.jsx(_h,{className:"w-4 h-4"})})]})]})]})},ix=({fee:a,onClose:o,onSave:c})=>{const[d,u]=x.useState(a.payable),[p,f]=x.useState(a.concession);return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-lg w-96",children:[n.jsxs("h3",{className:"text-lg font-bold mb-4",children:["Edit Fee: ",a.title]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Total Amount"}),n.jsx("input",{type:"number",value:d,onChange:v=>u(parseFloat(v.target.value)||0),className:"w-full border rounded px-3 py-2",disabled:a.paidAmount>0}),a.paidAmount>0&&n.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Cannot change total amount for partially paid fees."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Concession"}),n.jsx("input",{type:"number",value:p,onChange:v=>f(parseFloat(v.target.value)||0),className:"w-full border rounded px-3 py-2"})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),n.jsx("button",{onClick:()=>c(a.student_fee_id,d,p),className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Save"})]})]})})},cx=({feeTypes:a,onClose:o,onSave:c})=>{const[d,u]=x.useState(""),[p,f]=x.useState(""),[v,A]=x.useState("One-Time"),S=["January","February","March","April","May","June","July","August","September","October","November","December","One-Time"];return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:n.jsxs("div",{className:"bg-white p-6 rounded-lg w-96",children:[n.jsx("h3",{className:"text-lg font-bold mb-4",children:"Add Student Fee"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Fee Type"}),n.jsxs("select",{value:d,onChange:b=>u(Number(b.target.value)),className:"w-full border rounded px-3 py-2",children:[n.jsx("option",{value:"",children:"Select Fee Type"}),a.map(b=>n.jsx("option",{value:b.id,children:b.fee_type},b.id))]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Month / Label"}),n.jsx("select",{value:v,onChange:b=>A(b.target.value),className:"w-full border rounded px-3 py-2",children:S.map(b=>n.jsx("option",{value:b,children:b},b))})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount"}),n.jsx("input",{type:"number",value:p,onChange:b=>f(parseFloat(b.target.value)),className:"w-full border rounded px-3 py-2"})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),n.jsx("button",{onClick:()=>d&&p&&c(d,p,v),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",disabled:!d||!p,children:"Add"})]})]})})},Cl=({label:a,value:o,color:c="blue"})=>{const d={blue:"bg-blue-50 text-blue-800 border-blue-200",green:"bg-green-50 text-green-800 border-green-200",red:"bg-red-50 text-red-800 border-red-200"},u=d[c]||d.blue;return n.jsxs("div",{className:`p-4 rounded-lg border ${u} shadow-sm`,children:[n.jsx("p",{className:"text-xs opacity-80 uppercase tracking-wide font-semibold",children:a}),n.jsx("p",{className:"text-xl font-bold mt-1",children:typeof o=="number"?`${o.toLocaleString("en-IN")}`:o})]})},Il=({receipts:a,onViewReceipt:o})=>!a||a.length===0?n.jsx("div",{className:"p-8 text-center text-gray-500 border rounded bg-gray-50 mt-4",children:"No receipts found."}):n.jsx("div",{className:"bg-white border rounded-lg overflow-hidden shadow-sm mt-4",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt No"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date/Time"}),n.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(c=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c.receipt_no}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.student_name}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.class}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-800 text-right",children:["",c.amount.toLocaleString("en-IN")]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[c.date||""," ",c.time||""]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:n.jsxs("button",{onClick:()=>o(c.receipt_no),className:"text-white bg-violet-600 hover:bg-violet-700 px-3 py-1 rounded flex items-center justify-center mx-auto",children:[n.jsx(Ah,{className:"w-4 h-4 mr-1"})," View"]})})]},c.receipt_no))})]})}),dx=({onViewReceipt:a})=>{const[o,c]=x.useState(null),[d,u]=x.useState(!0),[p,f]=x.useState(""),v=async()=>{var A,S;try{u(!0);const b=await le.get("/reports/fees/today");c(b.data)}catch(b){f(((S=(A=b.response)==null?void 0:A.data)==null?void 0:S.error)||"Failed to fetch report")}finally{u(!1)}};return x.useEffect(()=>{v()},[]),d?n.jsx("div",{className:"p-4",children:"Loading today's collection..."}):p?n.jsxs("div",{className:"p-4 text-red-500",children:["Error: ",p]}):o?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[n.jsx("p",{className:"text-sm text-green-600 font-semibold",children:"Total Collection"}),n.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["",o.total_collection.toLocaleString("en-IN")]})]}),Object.entries(o.mode_breakup||{}).map(([A,S])=>n.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("p",{className:"text-sm text-gray-500 font-semibold",children:A}),n.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["",Number(S).toLocaleString("en-IN")]})]},A))]}),n.jsx(Il,{receipts:o.receipts,onViewReceipt:a})]}):null},ux=({onViewReceipt:a})=>{const[o,c]=x.useState(new Date().toISOString().split("T")[0]),[d,u]=x.useState(new Date().toISOString().split("T")[0]),[p,f]=x.useState("All"),[v,A]=x.useState("All"),[S,b]=x.useState("All"),[F,R]=x.useState([]),[H,g]=x.useState([]),[L,h]=x.useState(null),[se,ee]=x.useState(!1),[V,q]=x.useState("");x.useEffect(()=>{(async()=>{try{const C=await le.get("/fee-types"),X=Array.isArray(C.data)?C.data:C.data.fee_types||[],oe=localStorage.getItem("currentBranch")||"All";let ue=X;oe!=="All"&&oe!=="All Branches"&&(ue=X.filter(pe=>!pe.branch||pe.branch==="All"||pe.branch===oe)),R(ue);const Q=((await le.get("/classes")).data.classes||[]).map(pe=>pe.class_name);g(["All",...Q])}catch(C){console.error("Failed to load initial data",C)}})()},[]);const ie=async()=>{var ue,U;const P=new Date(o),C=new Date(d),X=Math.abs(C.getTime()-P.getTime());if(Math.ceil(X/(1e3*60*60*24))>365){alert("Date range cannot exceed 1 year.");return}try{ee(!0),q("");const re=new URLSearchParams({start_date:o,end_date:d,class:p,section:v,fee_type:S}),Q=await le.get(`/reports/fees/daily?${re.toString()}`);h(Q.data)}catch(re){q(((U=(ue=re.response)==null?void 0:ue.data)==null?void 0:U.error)||"Failed to fetch report"),h(null)}finally{ee(!1)}};x.useEffect(()=>{ie()},[]);const de=["All","A","B","C","D"];return n.jsxs("div",{className:"space-y-4 font-sans",children:[n.jsxs("div",{className:"bg-violet-50 p-4 rounded-lg flex flex-col gap-4 border border-violet-100",children:[n.jsxs("div",{className:"flex flex-wrap justify-between items-center",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("span",{className:"bg-white px-3 py-1 rounded-full border text-sm font-semibold text-violet-700",children:[L?L.receipts_count:0," Reports"]})}),n.jsxs("div",{className:"flex gap-3 text-sm text-gray-700",children:[n.jsxs("label",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"checkbox"})," Concession"]}),n.jsxs("label",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"checkbox"})," Current Session"]}),n.jsxs("label",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"checkbox"})," Cancelled Fee"]}),n.jsxs("label",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"checkbox"})," Exclude Emp Ward"]}),n.jsxs("label",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"checkbox"})," Exclude Voucher Fee"]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsxs("select",{value:S,onChange:P=>b(P.target.value),className:"border border-gray-300 rounded px-3 py-1.5 text-sm bg-white min-w-[150px]",children:[n.jsx("option",{value:"All",children:"All Fee Types"}),F.map(P=>n.jsx("option",{value:P.fee_type,children:P.fee_type},P.id))]}),n.jsx("input",{type:"date",value:o,onChange:P=>c(P.target.value),className:"border border-gray-300 rounded px-2 py-1.5 text-sm"}),n.jsx("input",{type:"date",value:d,onChange:P=>u(P.target.value),className:"border border-gray-300 rounded px-2 py-1.5 text-sm"}),n.jsx("select",{className:"border border-gray-300 rounded px-3 py-1.5 text-sm bg-white min-w-[100px]",children:n.jsx("option",{children:"All"})}),n.jsxs("select",{value:p,onChange:P=>f(P.target.value),className:"border border-gray-300 rounded px-3 py-1.5 text-sm bg-white w-32",children:[n.jsx("option",{value:"All",children:"Select Class"}),H.map(P=>P!=="All"&&n.jsx("option",{value:P,children:P},P))]}),n.jsxs("div",{className:"flex border border-blue-500 rounded overflow-hidden",children:[n.jsxs("div",{className:"bg-blue-500 text-white px-3 py-1.5 text-sm font-medium flex items-center gap-1",children:[n.jsx("span",{className:"text-xs",children:""})," Section"]}),n.jsxs("select",{value:v,onChange:P=>A(P.target.value),className:"px-2 py-1.5 text-sm bg-white border-l border-blue-500 outline-none",children:[n.jsx("option",{value:"All",children:"Select Section"}),de.map(P=>P!=="All"&&n.jsx("option",{value:P,children:P},P))]})]}),n.jsx("button",{onClick:ie,className:"bg-indigo-700 text-white px-6 py-1.5 rounded text-sm font-medium hover:bg-indigo-800 flex items-center gap-2",children:" Search"})]})]}),se&&n.jsx("div",{className:"text-center py-4",children:"Loading report..."}),V&&n.jsx("div",{className:"text-center text-red-500 py-4",children:V}),L&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white border rounded shadow-sm overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[n.jsx("thead",{className:"bg-gray-50 text-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Status"}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Student Name"}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Adm No."}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Class"}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Rcpt No"}),n.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Tot.Amt"}),n.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Concession"}),n.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Pay Amt"}),n.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Paid"}),n.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Due"}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Mode"}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Note"}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Date and Time"}),n.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Taken By"}),n.jsx("th",{className:"px-3 py-2 text-center font-semibold text-xs",children:"Action"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:L.receipts.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:15,className:"bg-red-50 text-red-500 text-center py-3 font-medium",children:"No Records Found"})}):L.receipts.map((P,C)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2 text-green-600 font-medium",children:"Success"}),n.jsx("td",{className:"px-3 py-2 font-medium",children:P.student_name}),n.jsx("td",{className:"px-3 py-2 text-blue-600",children:P.admission_no}),n.jsxs("td",{className:"px-3 py-2",children:[P.class," ",P.section]}),n.jsx("td",{className:"px-3 py-2",children:P.receipt_no}),n.jsxs("td",{className:"px-3 py-2 text-right",children:["",P.gross_amount.toLocaleString()]}),n.jsxs("td",{className:"px-3 py-2 text-right",children:["",P.concession.toLocaleString()]}),n.jsxs("td",{className:"px-3 py-2 text-right",children:["",P.net_payable.toLocaleString()]}),n.jsxs("td",{className:"px-3 py-2 text-right font-bold text-gray-800",children:["",P.amount_paid.toLocaleString()]}),n.jsxs("td",{className:"px-3 py-2 text-right text-red-500",children:["",P.due_amount.toLocaleString()]}),n.jsx("td",{className:"px-3 py-2",children:P.mode}),n.jsx("td",{className:"px-3 py-2 text-xs truncate max-w-[150px]",title:P.note,children:P.note||"-"}),n.jsxs("td",{className:"px-3 py-2 text-xs text-gray-500",children:[P.date," ",n.jsx("br",{})," ",P.time]}),n.jsx("td",{className:"px-3 py-2",children:P.collected_by}),n.jsx("td",{className:"px-3 py-2 text-center",children:n.jsx("button",{onClick:()=>a(P.receipt_no),className:"text-blue-600 hover:underline text-xs",children:"View"})})]},C))})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mt-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("table",{className:"w-full border text-sm",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-semibold",children:"Payment Mode"}),n.jsx("th",{className:"px-4 py-2 text-right font-semibold",children:"Amount"})]})}),n.jsxs("tbody",{className:"divide-y",children:[Object.entries(L.mode_summary||{}).map(([P,C])=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:P}),n.jsxs("td",{className:"px-4 py-2 text-right font-medium",children:["",Number(C).toLocaleString()]})]},P)),n.jsxs("tr",{className:"bg-blue-50 font-bold",children:[n.jsx("td",{className:"px-4 py-2",children:"Total"}),n.jsxs("td",{className:"px-4 py-2 text-right",children:["",L.total_collection.toLocaleString()]})]})]})]})}),n.jsx("div",{className:"flex-1",children:n.jsxs("table",{className:"w-full border text-sm",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left font-semibold",children:"Taken By"}),n.jsx("th",{className:"px-4 py-2 text-right font-semibold",children:"Amount"})]})}),n.jsxs("tbody",{className:"divide-y",children:[Object.entries(L.collected_by_summary||{}).map(([P,C])=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2",children:P}),n.jsxs("td",{className:"px-4 py-2 text-right font-medium",children:["",Number(C).toLocaleString()]})]},P)),n.jsxs("tr",{className:"bg-blue-50 font-bold",children:[n.jsx("td",{className:"px-4 py-2",children:"Total"}),n.jsxs("td",{className:"px-4 py-2 text-right",children:["",L.total_collection.toLocaleString()]})]})]})]})})]})]})]})},mx=({onViewReceipt:a})=>{const[o,c]=x.useState(String(new Date().getMonth()+1)),[d,u]=x.useState(String(new Date().getFullYear())),[p,f]=x.useState(null),[v,A]=x.useState(!1),[S,b]=x.useState(""),F=async()=>{var R,H;try{A(!0),b("");const g=await le.get(`/reports/fees/monthly?month=${o}&year=${d}`);f(g.data)}catch(g){b(((H=(R=g.response)==null?void 0:R.data)==null?void 0:H.error)||"Failed to fetch report")}finally{A(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-end gap-4 bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),n.jsx("select",{value:o,onChange:R=>c(R.target.value),className:"border border-gray-300 rounded px-3 py-2 w-32",children:Array.from({length:12},(R,H)=>H+1).map(R=>n.jsx("option",{value:R,children:new Date(0,R-1).toLocaleString("default",{month:"long"})},R))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),n.jsx("select",{value:d,onChange:R=>u(R.target.value),className:"border border-gray-300 rounded px-3 py-2 w-24",children:[2024,2025,2026,2027].map(R=>n.jsx("option",{value:R,children:R},R))})]}),n.jsx("button",{onClick:F,className:"bg-violet-600 text-white px-4 py-2 rounded hover:bg-violet-700",children:"View Report"})]}),v&&n.jsx("div",{children:"Loading..."}),S&&n.jsx("div",{className:"text-red-500",children:S}),p&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[n.jsx("p",{className:"text-sm text-indigo-600 font-bold",children:"Total Monthly Collection"}),n.jsxs("p",{className:"text-2xl font-bold text-indigo-800",children:["",p.total_collection.toLocaleString("en-IN")]})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[n.jsx("p",{className:"text-sm font-semibold mb-2",children:"Class-wise Breakup"}),n.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(p.class_wise||{}).map(([R,H])=>n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-gray-600",children:["Class ",R]}),n.jsxs("span",{className:"font-mono",children:["",Number(H).toLocaleString("en-IN")]})]},R))})]})]}),n.jsxs("h3",{className:"font-semibold text-lg mt-4",children:["Transactions (",p.receipts_count,")"]}),n.jsx(Il,{receipts:p.receipts,onViewReceipt:a})]})]})},fx=({onViewReceipt:a})=>{const[o,c]=x.useState("1"),[d,u]=x.useState(null),[p,f]=x.useState(!1),v=async()=>{try{f(!0);const S=await le.get(`/reports/fees/class-wise?class=${o}`);u(S.data)}catch(S){console.error(S)}finally{f(!1)}},A=["Nursery","LKG","UKG","1","2","3","4","5","6","7","8","9","10"];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-end gap-4 bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Class"}),n.jsx("select",{value:o,onChange:S=>c(S.target.value),className:"border p-2 rounded w-40",children:A.map(S=>n.jsx("option",{value:S,children:S},S))})]}),n.jsx("button",{onClick:v,className:"bg-violet-600 text-white px-4 py-2 rounded",children:"Get Report"})]}),p&&n.jsx("div",{children:"Loading..."}),d&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"p-4 bg-gray-50 rounded border",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Demand (Fee Structure)"}),n.jsxs("p",{className:"text-xl font-bold",children:["",d.total_fee.toLocaleString("en-IN")]})]}),n.jsxs("div",{className:"p-4 bg-green-50 rounded border border-green-200",children:[n.jsx("p",{className:"text-sm text-green-600",children:"Total Collected"}),n.jsxs("p",{className:"text-xl font-bold text-green-700",children:["",d.collected.toLocaleString("en-IN")]})]}),n.jsxs("div",{className:"p-4 bg-red-50 rounded border border-red-200",children:[n.jsx("p",{className:"text-sm text-red-600",children:"Total Due"}),n.jsxs("p",{className:"text-xl font-bold text-red-700",children:["",d.due.toLocaleString("en-IN")]})]})]}),n.jsx(Il,{receipts:d.receipts,onViewReceipt:a})]})]})},px=({onViewReceipt:a})=>{const[o,c]=x.useState(""),[d,u]=x.useState(null),[p,f]=x.useState(!1),[v,A]=x.useState(""),S=async()=>{var b,F;if(o)try{f(!0),A("");const R=await le.get(`/reports/fees/installment-wise?installment=${o}`);u(R.data)}catch(R){A(((F=(b=R.response)==null?void 0:b.data)==null?void 0:F.error)||"Error fetching report")}finally{f(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-end gap-4 bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex-1 max-w-sm",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Installment Name / Fee Type"}),n.jsx("input",{type:"text",placeholder:"e.g. Admission Fee, June Fee",value:o,onChange:b=>c(b.target.value),className:"border border-gray-300 rounded px-3 py-2 w-full"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter exact name as in fee structure"})]}),n.jsx("button",{onClick:S,className:"bg-violet-600 text-white px-4 py-2 rounded hover:bg-violet-700",children:"Search"})]}),p&&n.jsx("div",{children:"Loading..."}),v&&n.jsx("div",{className:"text-red-500",children:v}),d&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Cl,{label:"Total Demand",value:d.total_demand}),n.jsx(Cl,{label:"Collected",value:d.collected,color:"green"}),n.jsx(Cl,{label:"Due Amount",value:d.due,color:"red"}),n.jsx(Cl,{label:"Paid Students",value:`${d.paid_students} / ${d.total_students}`})]}),n.jsx("h3",{className:"font-semibold text-lg mt-4",children:"Receipts"}),n.jsx(Il,{receipts:d.receipts,onViewReceipt:a})]})]})},hx=()=>{const[a,o]=x.useState([]),[c,d]=x.useState(!1),u=async()=>{try{d(!0);const p=await le.get("/reports/fees/due");o(p.data)}catch(p){console.error(p)}finally{d(!1)}};return x.useEffect(()=>{u()},[]),c?n.jsx("div",{children:"Loading due list..."}):n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-red-700",children:"Students with Due Fees"}),n.jsxs("span",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium",children:[a.length," Students"]})]}),n.jsxs("div",{className:"bg-white border rounded-lg overflow-hidden shadow-sm",children:[n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Father Mobile"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Fee"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Amount"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(p=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.name})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[p.class," ",p.section]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.father_mobile}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:["",p.total_fee.toLocaleString("en-IN")]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-red-600 text-right",children:["",p.due_amount.toLocaleString("en-IN")]})]},p.student_id))})]}),a.length===0&&n.jsx("div",{className:"p-8 text-center text-gray-500",children:"No dues found."})]})]})},xx=()=>{const[a,o]=x.useState("today"),[c,d]=x.useState(null),[u,p]=x.useState(!1),[f,v]=x.useState(""),A=async b=>{var F,R;try{p(!0),v("");const H=await le.get(`/reports/fees/receipt/${b}`);d(H.data)}catch(H){alert(((R=(F=H.response)==null?void 0:F.data)==null?void 0:R.error)||"Failed to load receipt")}finally{p(!1)}},S=[{id:"today",label:"Today's Collection"},{id:"daily",label:"Daily Report"},{id:"monthly",label:"Monthly Report"},{id:"class",label:"Class Wise"},{id:"installment",label:"Installment Wise"},{id:"due",label:"Due Report"}];return n.jsxs("div",{className:"container mx-auto p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[n.jsx("span",{className:"bg-violet-100 text-violet-600 p-2 rounded mr-3",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),"Fee Reports"]}),n.jsx("div",{className:"flex flex-wrap gap-2 mb-8 border-b border-gray-200 pb-1",children:S.map(b=>n.jsx("button",{onClick:()=>o(b.id),className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${a===b.id?"bg-violet-600 text-white shadow-md":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:b.label},b.id))}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm min-h-[400px]",children:[a==="today"&&n.jsx(dx,{onViewReceipt:A}),a==="daily"&&n.jsx(ux,{onViewReceipt:A}),a==="monthly"&&n.jsx(mx,{onViewReceipt:A}),a==="class"&&n.jsx(fx,{onViewReceipt:A}),a==="installment"&&n.jsx(px,{onViewReceipt:A}),a==="due"&&n.jsx(hx,{})]}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex justify-center items-center z-50",children:n.jsx("div",{className:"bg-white p-4 rounded shadow",children:"Loading Receipt..."})}),c&&n.jsx(Fu,{receiptData:c,onClose:()=>d(null)})]})},gx=a=>{const o=()=>{const v=window.location.hash.replace("#","");return v||null},[c,d]=x.useState(()=>o()||a);x.useEffect(()=>{const v=()=>{const A=o();d(A||a)};return o()||(window.location.hash=a),window.addEventListener("hashchange",v),()=>window.removeEventListener("hashchange",v)},[a]);const u=x.useCallback(v=>{v!==c&&(window.location.hash=v)},[c]),p=x.useCallback(()=>{window.history.back()},[]),f=x.useCallback(()=>{window.history.forward()},[]);return{currentPage:c,navigateTo:u,goBack:p,goForward:f,canGoBack:!0,canGoForward:!0}},yx=({onLogout:a})=>{const[o,c]=x.useState(!0),{currentPage:d,navigateTo:u,goBack:p,goForward:f,canGoBack:v,canGoForward:A}=gx("dashboard"),S=()=>{c(!o)};return n.jsxs("div",{className:"flex h-screen overflow-hidden bg-gray-100",children:[n.jsx(Ph,{isOpen:o,toggleSidebar:S,navigateTo:u,currentPage:d}),n.jsxs("div",{className:"flex flex-col flex-1 overflow-y-auto overflow-x-hidden",children:[n.jsx(Eh,{toggleSidebar:S,navigateTo:u,onLogout:a,goBack:p,goForward:f,canGoBack:v,canGoForward:A}),n.jsxs("main",{className:"flex-1",children:[d==="dashboard"&&n.jsx(Bh,{navigateTo:u}),d==="profile"&&n.jsx(Mh,{}),d==="fee"&&n.jsx(zh,{navigateTo:u}),d==="fee-type"&&n.jsx(Uh,{}),d==="class-fee-structure"&&n.jsx($h,{}),d==="assign-special-fee"&&n.jsx(Hh,{}),d==="fee-installments"&&n.jsx(Vh,{}),d==="take-fee"&&n.jsx(Yh,{navigateTo:u}),d==="administration"&&n.jsx(Jh,{navigateTo:u}),d==="academic"&&n.jsx(Io,{pageTitle:"Academic"}),d==="setup"&&n.jsx(Io,{pageTitle:"Setup Your School"}),d==="student-attendance"&&n.jsx(tu,{navigateTo:u}),d==="attendance-report"&&n.jsx(tu,{navigateTo:u,defaultTab:"absent-report"}),d==="student-administration"&&n.jsx(sx,{navigateTo:u}),d==="concession-master"&&n.jsx(rx,{}),d==="student-concession"&&n.jsx(lx,{}),d==="update-student-fee-structure"&&n.jsx(ax,{}),d==="fee-reports"&&n.jsx(xx,{})]})]})]})},vx=()=>{const[a,o]=x.useState(()=>!!localStorage.getItem("token")),c=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),o(!1)};return n.jsx(n.Fragment,{children:a?n.jsx(yx,{onLogout:c}):n.jsx(mh,{onLoginSuccess:()=>o(!0)})})};If.createRoot(document.getElementById("root")).render(n.jsx(Rh,{children:n.jsx(vx,{})}));
